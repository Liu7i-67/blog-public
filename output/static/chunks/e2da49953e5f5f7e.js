(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,28547,(e,t,r)=>{e.e,t.exports=function(e){"use strict";var t={name:"zh-cn",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(e,t){return"W"===t?e+"周":e+"日"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},meridiem:function(e,t){var r=100*e+t;return r<600?"凌晨":r<900?"早上":r<1100?"上午":r<1300?"中午":r<1800?"下午":"晚上"}};return(e&&"object"==typeof e&&"default"in e?e:{default:e}).default.locale(t,null,!0),t}(e.r(66324))},10849,e=>{"use strict";var t,r=e.i(58190),a=e.i(52434),l=e.i(39331),s=e.i(94846),n=e.i(2310);function o(){let e,t,o,i,c=(0,a.c)(9),d=(0,l.useCenterStore)(),{cardStyles:m}=(0,n.useConfigStore)(),u=m.hiCard,h=null!==u.offsetX?d.x+u.offsetX:d.x,f=null!==u.offsetY?d.y+u.offsetY:d.y;return c[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)("img",{src:"/images/avatar.png",className:"mx-auto rounded-full",style:{width:120,height:120}}),c[0]=e):e=c[0],c[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)("span",{className:"text-linear text-[32px]",children:"柒书"}),c[1]=t):t=c[1],c[2]===Symbol.for("react.memo_cache_sentinel")?(o=(0,r.jsxs)("h1",{className:"font-averia mt-3 text-2xl",children:[t," ",(0,r.jsx)("br",{})," 活到老，玩到老"]}),c[2]=o):o=c[2],c[3]!==u.height||c[4]!==u.order||c[5]!==u.width||c[6]!==h||c[7]!==f?(i=(0,r.jsxs)(s.default,{order:u.order,width:u.width,height:u.height,x:h,y:f,className:"-translate-1/2 text-center max-sm:static max-sm:translate-0",children:[e,o]}),c[3]=u.height,c[4]=u.order,c[5]=u.width,c[6]=h,c[7]=f,c[8]=i):i=c[8],i}var i=e.i(63580),c=e.i(98788);function d(){let e,t,o,d,m,u=(0,a.c)(17),h=(0,l.useCenterStore)(),{cardStyles:f,siteContent:x}=(0,n.useConfigStore)(),p=(0,c.useRouter)(),g=f.artCard,b=f.hiCard,y=null!==g.offsetX?h.x+g.offsetX:h.x,v=null!==g.offsetY?h.y+g.offsetY:h.y-b.height/2-g.height/2-i.CARD_SPACING;u[0]!==x.artImages?(e=x.artImages??[],u[0]=x.artImages,u[1]=e):e=u[1];let j=e,w=x.currentArtImageId;u[2]!==j||u[3]!==w?(t=(w?j.find(e=>e.id===w):void 0)??j[0],u[2]=j,u[3]=w,u[4]=t):t=u[4];let C=t,N=C?.url||"/images/art/cat.png";return u[5]!==p?(o=()=>p.push("/pictures"),u[5]=p,u[6]=o):o=u[6],u[7]!==N||u[8]!==o?(d=(0,r.jsx)("img",{onClick:o,src:N,alt:"wall art",className:"h-full w-full rounded-[32px] object-cover"}),u[7]=N,u[8]=o,u[9]=d):d=u[9],u[10]!==g.height||u[11]!==g.order||u[12]!==g.width||u[13]!==d||u[14]!==y||u[15]!==v?(m=(0,r.jsx)(s.default,{className:"-translate-1/2 p-2 max-sm:static max-sm:translate-0",order:g.order,width:g.width,height:g.height,x:y,y:v,children:d}),u[10]=g.height,u[11]=g.order,u[12]=g.width,u[13]=d,u[14]=y,u[15]=v,u[16]=m):m=u[16],m}var m=e.i(35311);function u(){let e,t,o,c,d,u,x,p,g,b,y,v,j=(0,a.c)(28),w=(0,l.useCenterStore)(),{cardStyles:C}=(0,n.useConfigStore)();j[0]===Symbol.for("react.memo_cache_sentinel")?(e=new Date,j[0]=e):e=j[0];let[N,_]=(0,m.useState)(e),S=C.clockCard,I=C.hiCard;j[1]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{let e=setInterval(()=>{_(new Date)},5e3);return()=>clearInterval(e)},o=[],j[1]=t,j[2]=o):(t=j[1],o=j[2]),(0,m.useEffect)(t,o),j[3]!==N?(c=N.getHours().toString().padStart(2,"0"),j[3]=N,j[4]=c):c=j[4];let k=c;j[5]!==N?(d=N.getMinutes().toString().padStart(2,"0"),j[5]=N,j[6]=d):d=j[6];let R=d,A=null!==S.offsetX?w.x+S.offsetX:w.x+i.CARD_SPACING+I.width/2,B=null!==S.offsetY?w.y+S.offsetY:w.y-S.offset-S.height,L=S.order,E=S.width,Y=S.height,O=parseInt(k[0]);j[7]!==O?(u=(0,r.jsx)(h,{value:O}),j[7]=O,j[8]=u):u=j[8];let U=parseInt(k[1]);j[9]!==U?(x=(0,r.jsx)(h,{value:U}),j[9]=U,j[10]=x):x=j[10],j[11]===Symbol.for("react.memo_cache_sentinel")?(p=(0,r.jsx)(f,{}),j[11]=p):p=j[11];let T=parseInt(R[0]);j[12]!==T?(g=(0,r.jsx)(h,{value:T}),j[12]=T,j[13]=g):g=j[13];let D=parseInt(R[1]);return j[14]!==D?(b=(0,r.jsx)(h,{value:D}),j[14]=D,j[15]=b):b=j[15],j[16]!==x||j[17]!==g||j[18]!==b||j[19]!==u?(y=(0,r.jsxs)("div",{className:"bg-secondary/20 flex h-full w-full items-center justify-center gap-1.5 rounded-4xl",children:[u,x,p,g,b]}),j[16]=x,j[17]=g,j[18]=b,j[19]=u,j[20]=y):y=j[20],j[21]!==S.height||j[22]!==S.order||j[23]!==S.width||j[24]!==y||j[25]!==A||j[26]!==B?(v=(0,r.jsx)(s.default,{order:L,width:E,height:Y,x:A,y:B,className:"p-2",children:y}),j[21]=S.height,j[22]=S.order,j[23]=S.width,j[24]=y,j[25]=A,j[26]=B,j[27]=v):v=j[27],v}function h(e){let t,l,s,n,o,i,c,d,m=(0,a.c)(23),{value:u,className:h}=e,f={0:[!0,!0,!0,!0,!0,!0,!1],1:[!1,!0,!0,!1,!1,!1,!1],2:[!0,!0,!1,!0,!0,!1,!0],3:[!0,!0,!0,!0,!1,!1,!0],4:[!1,!0,!0,!1,!1,!0,!0],5:[!0,!1,!0,!0,!1,!0,!0],6:[!0,!1,!0,!0,!0,!0,!0],7:[!0,!0,!0,!1,!1,!1,!1],8:[!0,!0,!0,!0,!0,!0,!0],9:[!0,!0,!0,!0,!1,!0,!0]},x=f[u]||f[0],p=x[0]?"var(--color-primary)":"rgba(0, 0, 0, 0.05)";m[0]!==p?(t=(0,r.jsx)("path",{d:"M4.20248 3.49482C2.82797 2.27303 3.69218 0 5.53121 0H22.6867C24.5522 0 25.4019 2.32821 23.975 3.52982L23.5791 3.86316C23.2186 4.16681 22.7623 4.33333 22.2909 4.33333H5.90621C5.41638 4.33333 4.94359 4.15358 4.57748 3.82815L4.20248 3.49482Z",fill:p}),m[0]=p,m[1]=t):t=m[1];let g=x[6]?"var(--color-primary)":"rgba(0, 0, 0, 0.05)";m[2]!==g?(l=(0,r.jsx)("path",{d:"M3.85122 24.13C4.16644 23.936 4.5293 23.8333 4.89942 23.8333H23.3022C23.6503 23.8333 23.9923 23.9242 24.2945 24.0969L24.5862 24.2635C25.9298 25.0313 25.9298 26.9687 24.5862 27.7365L24.2945 27.9032C23.9923 28.0758 23.6503 28.1667 23.3022 28.1667H4.89942C4.5293 28.1667 4.16644 28.064 3.85122 27.87L3.58039 27.7033C2.31131 26.9224 2.31132 25.0777 3.58039 24.2967L3.85122 24.13Z",fill:g}),m[2]=g,m[3]=l):l=m[3];let b=x[5]?"var(--color-primary)":"rgba(0, 0, 0, 0.05)";m[4]!==b?(s=(0,r.jsx)("path",{d:"M3.06 23.5458C1.7279 24.3784 -8.31295e-08 23.4207 -1.47217e-07 21.8498L-8.06095e-07 5.69981C-8.77526e-07 3.94893 2.09055 3.04323 3.36788 4.24073L3.70121 4.55323C4.10452 4.93133 4.33333 5.45949 4.33333 6.01231L4.33333 21.6415C4.33333 22.3311 3.97809 22.972 3.39333 23.3375L3.06 23.5458Z",fill:b}),m[4]=b,m[5]=s):s=m[5];let y=x[1]?"var(--color-primary)":"rgba(0, 0, 0, 0.05)";m[6]!==y?(n=(0,r.jsx)("path",{d:"M24.8497 4.25654C26.1428 3.12502 28.1667 4.04338 28.1667 5.76169L28.1667 21.8498C28.1667 23.4207 26.4388 24.3784 25.1067 23.5458L24.7734 23.3375C24.1886 22.972 23.8334 22.3311 23.8334 21.6415L23.8334 6.05336C23.8334 5.47663 24.0823 4.92798 24.5163 4.54821L24.8497 4.25654Z",fill:y}),m[6]=y,m[7]=n):n=m[7];let v=x[3]?"var(--color-primary)":"rgba(0, 0, 0, 0.05)";m[8]!==v?(o=(0,r.jsx)("path",{d:"M23.9259 48.6321C25.1234 49.9094 24.2177 52 22.4669 52L5.69978 52C3.9489 52 3.04321 49.9094 4.24071 48.6321L4.55321 48.2988C4.9313 47.8955 5.45947 47.6667 6.01228 47.6667L22.1544 47.6667C22.7072 47.6667 23.2353 47.8955 23.6134 48.2988L23.9259 48.6321Z",fill:v}),m[8]=v,m[9]=o):o=m[9];let j=x[2]?"var(--color-primary)":"rgba(0, 0, 0, 0.05)";m[10]!==j?(i=(0,r.jsx)("path",{d:"M25.1862 28.489C26.5194 27.7391 28.1667 28.7025 28.1667 30.2322L28.1667 46.6299C28.1667 48.4117 26.0124 49.3041 24.7525 48.0441L24.4191 47.7108C24.0441 47.3357 23.8334 46.827 23.8334 46.2966L23.8334 30.4197C23.8334 29.6971 24.2231 29.0308 24.8528 28.6765L25.1862 28.489Z",fill:j}),m[10]=j,m[11]=i):i=m[11];let w=x[4]?"var(--color-primary)":"rgba(0, 0, 0, 0.05)";return m[12]!==w?(c=(0,r.jsx)("path",{d:"M3.4564 47.7859C2.21509 49.1048 4.23823e-07 48.2263 6.6133e-07 46.4152L2.79423e-06 30.1501C3.00022e-06 28.5793 1.72791 27.6216 3.06 28.4541L3.39333 28.6625C3.9781 29.028 4.33334 29.6689 4.33334 30.3585L4.33333 46.061C4.33333 46.5705 4.13891 47.0607 3.78973 47.4317L3.4564 47.7859Z",fill:w}),m[12]=w,m[13]=c):c=m[13],m[14]!==h||m[15]!==o||m[16]!==i||m[17]!==c||m[18]!==t||m[19]!==l||m[20]!==s||m[21]!==n?(d=(0,r.jsxs)("svg",{width:"29",height:"52",viewBox:"0 0 29 52",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:h,children:[t,l,s,n,o,i,c]}),m[14]=h,m[15]=o,m[16]=i,m[17]=c,m[18]=t,m[19]=l,m[20]=s,m[21]=n,m[22]=d):d=m[22],d}function f(e){let t,l,s,n=(0,a.c)(4),{className:o}=e,i=`flex flex-col justify-center gap-2 ${o}`;return n[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)("div",{className:"bg-primary h-1.5 w-1.5"}),l=(0,r.jsx)("div",{className:"bg-primary h-1.5 w-1.5"}),n[0]=t,n[1]=l):(t=n[0],l=n[1]),n[2]!==i?(s=(0,r.jsxs)("div",{className:i,children:[t,l]}),n[2]=i,n[3]=s):s=n[3],s}var x=e.i(66324);e.i(28547);var p=e.i(75157);function g(){let e,t,o,c,d,m,u,h,f,g,v,j,w,C=(0,a.c)(32),N=(0,l.useCenterStore)(),{cardStyles:_}=(0,n.useConfigStore)();if(C[0]!==_.calendarCard||C[1]!==_.clockCard||C[2]!==_.hiCard||C[3]!==N.x||C[4]!==N.y){let a=(0,x.default)(),l=a.date(),n=(a.startOf("month").day()+6)%7,j=a.daysInMonth(),w=(a.day()+6)%7,S=_.calendarCard,I=_.hiCard,k=_.clockCard,R=null!==S.offsetX?N.x+S.offsetX:N.x+i.CARD_SPACING+I.width/2,A=null!==S.offsetY?N.y+S.offsetY:N.y-k.offset+i.CARD_SPACING;e=s.default,m=S.order,u=S.width,h=S.height,f=R,g=A,v=(0,r.jsxs)("h3",{className:"text-secondary text-sm",children:[a.format("YYYY/M/D")," ",a.format("ddd")]}),t="text-secondary mt-3 grid h-[206px] grid-cols-7 gap-2 text-sm",C[16]===Symbol.for("react.memo_cache_sentinel")?(o=Array(7).fill(0).map((e,t)=>(0,r.jsx)("li",{className:(0,p.cn)("flex items-center justify-center font-medium",t===w&&"text-brand"),children:y[t]},t)),c=Array(n).fill(0).map(b),C[16]=o,C[17]=c):(o=C[16],c=C[17]),d=Array(j).fill(0).map((e,t)=>{let a=t+1,s=a===l;return(0,r.jsx)("li",{className:(0,p.cn)("flex items-center justify-center rounded-lg",s&&"bg-linear border font-medium"),children:a},a)}),C[0]=_.calendarCard,C[1]=_.clockCard,C[2]=_.hiCard,C[3]=N.x,C[4]=N.y,C[5]=e,C[6]=t,C[7]=o,C[8]=c,C[9]=d,C[10]=m,C[11]=u,C[12]=h,C[13]=f,C[14]=g,C[15]=v}else e=C[5],t=C[6],o=C[7],c=C[8],d=C[9],m=C[10],u=C[11],h=C[12],f=C[13],g=C[14],v=C[15];return C[18]!==t||C[19]!==o||C[20]!==c||C[21]!==d?(j=(0,r.jsxs)("ul",{className:t,children:[o,c,d]}),C[18]=t,C[19]=o,C[20]=c,C[21]=d,C[22]=j):j=C[22],C[23]!==e||C[24]!==j||C[25]!==m||C[26]!==u||C[27]!==h||C[28]!==f||C[29]!==g||C[30]!==v?(w=(0,r.jsxs)(e,{order:m,width:u,height:h,x:f,y:g,children:[v,j]}),C[23]=e,C[24]=j,C[25]=m,C[26]=u,C[27]=h,C[28]=f,C[29]=g,C[30]=v,C[31]=w):w=C[31],w}function b(e,t){return(0,r.jsx)("li",{},`empty-${t}`)}x.default.locale("zh-cn");let y=["一","二","三","四","五","六","日"];var v=e.i(60489),j=e.i(18785);function w(){let e,t,o,c,d,m=(0,a.c)(10),u=(0,l.useCenterStore)(),{cardStyles:h}=(0,n.useConfigStore)(),f=h.musicCard,x=h.hiCard,p=h.clockCard,g=h.calendarCard,b=null!==f.offsetX?u.x+f.offsetX:u.x+i.CARD_SPACING+x.width/2-f.offset,y=null!==f.offsetY?u.y+f.offsetY:u.y-p.offset+i.CARD_SPACING+g.height+i.CARD_SPACING;return m[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(v.default,{className:"h-8 w-8"}),m[0]=e):e=m[0],m[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)("div",{className:"text-secondary text-sm",children:"随机音乐"}),m[1]=t):t=m[1],m[2]===Symbol.for("react.memo_cache_sentinel")?(o=(0,r.jsxs)("div",{className:"flex-1",children:[t,(0,r.jsx)("div",{className:"mt-1 h-2 rounded-full bg-white/60",children:(0,r.jsx)("div",{className:"bg-linear h-full w-1/2 rounded-full"})})]}),m[2]=o):o=m[2],m[3]===Symbol.for("react.memo_cache_sentinel")?(c=(0,r.jsx)("button",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-white",children:(0,r.jsx)(j.default,{className:"text-brand ml-1 h-4 w-4"})}),m[3]=c):c=m[3],m[4]!==f.height||m[5]!==f.order||m[6]!==f.width||m[7]!==b||m[8]!==y?(d=(0,r.jsxs)(s.default,{order:f.order,width:f.width,height:f.height,x:b,y:y,className:"flex items-center gap-3",children:[e,o,c]}),m[4]=f.height,m[5]=f.order,m[6]=f.width,m[7]=b,m[8]=y,m[9]=d):d=m[9],d}var C=e.i(21420),N=e.i(76999),_=e.i(67698),S=e.i(7281),I=e.i(95403),k=e.i(99151);let R=100;function A(){let e=(0,l.useCenterStore)(),{cardStyles:t}=(0,n.useConfigStore)(),{maxSM:a,init:s}=(0,k.useSize)(),o=t.socialButtons,c=t.hiCard,d=o.order;a&&s&&(d=0,R=0);let[u,h]=(0,m.useState)(!1),[f,x]=(0,m.useState)(!1),[p,g]=(0,m.useState)(!1);(0,m.useEffect)(()=>{setTimeout(()=>h(!0),d*i.ANIMATION_DELAY*1e3),setTimeout(()=>x(!0),d*i.ANIMATION_DELAY*1e3+ +R),setTimeout(()=>g(!0),d*i.ANIMATION_DELAY*1e3+2*R)},[d]);let b=null!==o.offsetX?e.x+o.offsetX:e.x+c.width/2,y=null!==o.offsetY?e.y+o.offsetY:e.y+c.height/2+i.CARD_SPACING;return u?(0,r.jsx)(S.motion.div,{className:"absolute max-sm:static",animate:{left:b,top:y},initial:{left:b,top:y},children:(0,r.jsxs)("div",{className:"absolute top-0 right-0 flex items-center gap-3 max-sm:static",children:[p&&(0,r.jsxs)(S.motion.a,{href:"https://github.com/Liu7i-67",target:"_blank",initial:{opacity:0,scale:.6},animate:{opacity:1,scale:1},whileHover:{scale:1.05},whileTap:{scale:.95},className:"font-averia flex items-center gap-2 rounded-xl border bg-[#070707] px-3 py-2 text-xl text-white",style:{boxShadow:" inset 0 0 12px rgba(255, 255, 255, 0.4)"},children:[(0,r.jsx)(C.default,{}),"Github"]}),f&&(0,r.jsxs)(S.motion.a,{href:"https://space.bilibili.com/189975021",target:"_blank",initial:{opacity:0,scale:.6},animate:{opacity:1,scale:1},whileHover:{scale:1.05},whileTap:{scale:.95},className:"card relative flex items-center gap-2 rounded-xl px-3 py-2.5 font-medium whitespace-nowrap",children:[(0,r.jsx)(N.default,{className:"h-6 w-6"}),"哔哩哔哩"]}),(0,r.jsx)(S.motion.button,{onClick:()=>{navigator.clipboard.writeText("liu67iq@gmail.com").then(()=>{I.toast.success("邮箱已复制到剪贴板")})},initial:{opacity:0,scale:.6},animate:{opacity:1,scale:1},whileHover:{scale:1.05},whileTap:{scale:.95},className:"card btn relative rounded-xl p-1.5",children:(0,r.jsx)(_.default,{})})]})}):null}var B=e.i(92609),L=e.i(86087);function E(){let e,t,o,c,d,u,h,f,x,p=(0,a.c)(22),g=(0,l.useCenterStore)(),{cardStyles:b}=(0,n.useConfigStore)(),[y,v]=(0,m.useState)(null),j=b.shareCard,w=b.hiCard,C=b.socialButtons;if(p[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{let e=Math.floor(Math.random()*B.default.length);v(B.default[e])},t=[],p[0]=e,p[1]=t):(e=p[0],t=p[1]),(0,m.useEffect)(e,t),!y)return null;let N=null!==j.offsetX?g.x+j.offsetX:g.x+w.width/2-C.width,_=null!==j.offsetY?g.y+j.offsetY:g.y+w.height/2+i.CARD_SPACING+C.height+i.CARD_SPACING;return p[2]===Symbol.for("react.memo_cache_sentinel")?(o=(0,r.jsx)("h2",{className:"text-secondary text-sm",children:"随机推荐"}),p[2]=o):o=p[2],p[3]!==y.logo||p[4]!==y.name?(c=(0,r.jsx)("div",{className:"relative mr-3 h-12 w-12 shrink-0 overflow-hidden rounded-xl",children:(0,r.jsx)("img",{src:y.logo,alt:y.name,className:"h-full w-full object-contain"})}),p[3]=y.logo,p[4]=y.name,p[5]=c):c=p[5],p[6]!==y.name?(d=(0,r.jsx)("h3",{className:"text-sm font-medium",children:y.name}),p[6]=y.name,p[7]=d):d=p[7],p[8]!==c||p[9]!==d?(u=(0,r.jsxs)("div",{className:"flex items-center",children:[c,d]}),p[8]=c,p[9]=d,p[10]=u):u=p[10],p[11]!==y.description?(h=(0,r.jsx)("p",{className:"text-secondary line-clamp-3 text-xs",children:y.description}),p[11]=y.description,p[12]=h):h=p[12],p[13]!==u||p[14]!==h?(f=(0,r.jsxs)(L.default,{href:"/share",className:"mt-2 block space-y-2",children:[u,h]}),p[13]=u,p[14]=h,p[15]=f):f=p[15],p[16]!==j.order||p[17]!==j.width||p[18]!==f||p[19]!==N||p[20]!==_?(x=(0,r.jsxs)(s.default,{order:j.order,width:j.width,x:N,y:_,children:[o,f]}),p[16]=j.order,p[17]=j.width,p[18]=f,p[19]=N,p[20]=_,p[21]=x):x=p[21],x}var Y=e.i(90770);function O(){let e,t,o,c=(0,a.c)(10),d=(0,l.useCenterStore)(),{cardStyles:m}=(0,n.useConfigStore)(),{blog:u,loading:h}=(0,Y.useLatestBlog)(),f=m.articleCard,p=m.hiCard,g=m.socialButtons,b=null!==f.offsetX?d.x+f.offsetX:d.x+p.width/2-g.width-i.CARD_SPACING-f.width,y=null!==f.offsetY?d.y+f.offsetY:d.y+p.height/2+i.CARD_SPACING;return c[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)("h2",{className:"text-secondary text-sm",children:"最新文章"}),c[0]=e):e=c[0],c[1]!==u||c[2]!==h?(t=h?(0,r.jsx)("div",{className:"flex h-[60px] items-center justify-center",children:(0,r.jsx)("span",{className:"text-secondary text-xs",children:"加载中..."})}):u?(0,r.jsxs)(L.default,{href:`/blog/${u.slug}`,className:"flex transition-opacity hover:opacity-80",children:[u.cover?(0,r.jsx)("img",{src:u.cover,alt:"cover",className:"mr-3 h-12 w-12 shrink-0 rounded-xl border object-cover"}):(0,r.jsx)("div",{className:"text-secondary mr-3 grid h-12 w-12 shrink-0 place-items-center rounded-xl bg-white/60",children:"+"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"line-clamp-1 text-sm font-medium",children:u.title||u.slug}),u.summary&&(0,r.jsx)("p",{className:"text-secondary mt-1 line-clamp-3 text-xs",children:u.summary}),(0,r.jsx)("p",{className:"text-secondary mt-3 text-xs",children:(0,x.default)(u.date).format("YYYY/M/D")})]})]}):(0,r.jsx)("div",{className:"flex h-[60px] items-center justify-center",children:(0,r.jsx)("span",{className:"text-secondary text-xs",children:"暂无文章"})}),c[1]=u,c[2]=h,c[3]=t):t=c[3],c[4]!==f.order||c[5]!==f.width||c[6]!==t||c[7]!==b||c[8]!==y?(o=(0,r.jsxs)(s.default,{order:f.order,width:f.width,x:b,y:y,className:"space-y-2 max-sm:static",children:[e,t]}),c[4]=f.order,c[5]=f.width,c[6]=t,c[7]=b,c[8]=y,c[9]=o):o=c[9],o}var U=e.i(36432);function T(){return(T=Object.assign.bind()).apply(null,arguments)}let D=function(e){return m.createElement("svg",T({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 32"},e),t||(t=m.createElement("path",{fill:"#fff",fillOpacity:.8,d:"M16 23.333a2 2 0 1 1 0 4.001 2 2 0 0 1 0-4m9.333 0a2 2 0 1 1 0 4.001 2 2 0 0 1 0-4m-18.666 0a2 2 0 1 1 0 4 2 2 0 0 1 0-4M16 14a2 2 0 1 1 0 4 2 2 0 0 1 0-4m9.333 0a2 2 0 1 1 0 4 2 2 0 0 1 0-4M6.667 14a2 2 0 1 1 0 4 2 2 0 0 1 0-4M16 4.667a2 2 0 1 1 0 4 2 2 0 0 1 0-4m9.333 0a2 2 0 1 1 0 4 2 2 0 0 1 0-4m-18.666 0a2 2 0 1 1 0 4 2 2 0 0 1 0-4"})))};var M=e.i(72412),G=e.i(71436),H=e.i(37572),P=e.i(86909),F=e.i(97005);async function $(e,t,r,a,l,s){let n=await (0,P.getAuthToken)();I.toast.info("正在获取分支信息...");let o=(await (0,H.getRef)(n,i.GITHUB_CONFIG.OWNER,i.GITHUB_CONFIG.REPO,`heads/${i.GITHUB_CONFIG.BRANCH}`)).sha,c=`更新站点配置`;I.toast.info("正在准备文件...");let d=[];if(r?.type==="file"){I.toast.info("正在上传 Favicon...");let e=await (0,F.fileToBase64NoPrefix)(r.file),t=await (0,H.createBlob)(n,i.GITHUB_CONFIG.OWNER,i.GITHUB_CONFIG.REPO,e,"base64");d.push({path:"public/favicon.png",mode:"100644",type:"blob",sha:t.sha})}if(a?.type==="file"){I.toast.info("正在上传 Avatar...");let e=await (0,F.fileToBase64NoPrefix)(a.file),t=await (0,H.createBlob)(n,i.GITHUB_CONFIG.OWNER,i.GITHUB_CONFIG.REPO,e,"base64");d.push({path:"public/images/avatar.png",mode:"100644",type:"blob",sha:t.sha})}if(l)for(let[t,r]of Object.entries(l)){if("file"!==r.type)continue;let a=e.artImages?.find(e=>e.id===t);if(!a)continue;let l=a.url.startsWith("/")?a.url:`/${a.url}`,s=`public${l}`;if(!s)continue;I.toast.info(`正在上传 Art 图片 ${t}...`);let o=await (0,F.fileToBase64NoPrefix)(r.file),c=await (0,H.createBlob)(n,i.GITHUB_CONFIG.OWNER,i.GITHUB_CONFIG.REPO,o,"base64");d.push({path:s,mode:"100644",type:"blob",sha:c.sha})}if(s&&s.length>0)for(let e of s){let t=e.url.startsWith("/")?e.url:`/${e.url}`,r=`public${t}`;d.push({path:r,mode:"100644",type:"blob",sha:null})}let m=JSON.stringify(e,null,"	"),u=await (0,H.createBlob)(n,i.GITHUB_CONFIG.OWNER,i.GITHUB_CONFIG.REPO,(0,H.toBase64Utf8)(m),"base64");d.push({path:"src/config/site-content.json",mode:"100644",type:"blob",sha:u.sha});let h=JSON.stringify(t,null,"	"),f=await (0,H.createBlob)(n,i.GITHUB_CONFIG.OWNER,i.GITHUB_CONFIG.REPO,(0,H.toBase64Utf8)(h),"base64");d.push({path:"src/config/card-styles.json",mode:"100644",type:"blob",sha:f.sha}),I.toast.info("正在创建文件树...");let x=await (0,H.createTree)(n,i.GITHUB_CONFIG.OWNER,i.GITHUB_CONFIG.REPO,d,o);I.toast.info("正在创建提交...");let p=await (0,H.createCommit)(n,i.GITHUB_CONFIG.OWNER,i.GITHUB_CONFIG.REPO,c,x.sha,[o]);I.toast.info("正在更新分支..."),await (0,H.updateRef)(n,i.GITHUB_CONFIG.OWNER,i.GITHUB_CONFIG.REPO,`heads/${i.GITHUB_CONFIG.BRANCH}`,p.sha),I.toast.success("保存成功！")}function X(e){let t,l,s,n,o,i,c,d,u,h,f,x,p,g,b,y,v,j,w,C,N,_,k,R,A,B,L,E,Y,O,U,T,D,M,G,H,P,$,X=(0,a.c)(95),{formData:W,setFormData:z,faviconItem:Z,setFaviconItem:q,avatarItem:J,setAvatarItem:K,artImageUploads:Q,setArtImageUploads:V}=e,ee=(0,m.useRef)(null),et=(0,m.useRef)(null),er=(0,m.useRef)(null);X[0]!==q?(t=async e=>{let t=e.target.files?.[0];if(!t)return;if(!t.type.startsWith("image/"))return void I.toast.error("请选择图片文件");let r=await (0,F.hashFileSHA256)(t),a=URL.createObjectURL(t);q({type:"file",file:t,previewUrl:a,hash:r}),e.currentTarget&&(e.currentTarget.value="")},X[0]=q,X[1]=t):t=X[1];let ea=t;X[2]!==K?(l=async e=>{let t=e.target.files?.[0];if(!t)return;if(!t.type.startsWith("image/"))return void I.toast.error("请选择图片文件");let r=await (0,F.hashFileSHA256)(t),a=URL.createObjectURL(t);K({type:"file",file:t,previewUrl:a,hash:r}),e.currentTarget&&(e.currentTarget.value="")},X[2]=K,X[3]=l):l=X[3];let el=l;X[4]!==Z||X[5]!==q?(s=()=>{Z?.type==="file"&&URL.revokeObjectURL(Z.previewUrl),q(null)},X[4]=Z,X[5]=q,X[6]=s):s=X[6];let es=s;X[7]!==J||X[8]!==K?(n=()=>{J?.type==="file"&&URL.revokeObjectURL(J.previewUrl),K(null)},X[7]=J,X[8]=K,X[9]=n):n=X[9];let en=n;X[10]!==V||X[11]!==z?(o=async e=>{let t=Array.from(e.target.files||[]);if(t.length){for(let e of t){if(!e.type.startsWith("image/")){I.toast.error("请选择图片文件");continue}let t=await (0,F.hashFileSHA256)(e),r=e.name.split(".").pop()||"png",a=`/images/art/${t}.${r}`,l=URL.createObjectURL(e);V(r=>({...r,[t]:{type:"file",file:e,previewUrl:l,hash:t}})),z(e=>{let r=[...(e.artImages??[]).filter(e=>e.id!==t),{id:t,url:a}];return{...e,artImages:r,currentArtImageId:e.currentArtImageId||t}})}e.currentTarget&&(e.currentTarget.value="")}},X[10]=V,X[11]=z,X[12]=o):o=X[12];let eo=o;X[13]!==z?(i=e=>{z(t=>({...t,currentArtImageId:e}))},X[13]=z,X[14]=i):i=X[14];let ei=i;X[15]!==Q||X[16]!==V||X[17]!==z?(c=e=>{let t=Q[e];t?.type==="file"&&URL.revokeObjectURL(t.previewUrl),V(t=>{let r={...t};return delete r[e],r}),z(t=>{let r=(t.artImages??[]).filter(t=>t.id!==e),a=t.currentArtImageId===e;return{...t,artImages:r,currentArtImageId:a?r[0]?.id||"":t.currentArtImageId}})},X[15]=Q,X[16]=V,X[17]=z,X[18]=c):c=X[18];let ec=c;X[19]===Symbol.for("react.memo_cache_sentinel")?(d=(0,r.jsx)("label",{className:"mb-2 block text-sm font-medium",children:"Favicon"}),X[19]=d):d=X[19],X[20]!==ea?(u=(0,r.jsx)("input",{ref:ee,type:"file",accept:"image/*",className:"hidden",onChange:ea}),X[20]=ea,X[21]=u):u=X[21],X[22]!==Z?(h=Z?.type==="file"?(0,r.jsx)("img",{src:Z.previewUrl,alt:"favicon preview",className:"h-full w-full object-cover"}):(0,r.jsx)("img",{src:"/favicon.png",alt:"current favicon",className:"h-full w-full object-cover"}),X[22]=Z,X[23]=h):h=X[23];let ed=Z?"更换":"上传";X[24]!==ed?(f=(0,r.jsx)("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center rounded-lg bg-black/40 opacity-0 transition-opacity group-hover:opacity-100",children:(0,r.jsx)("span",{className:"text-xs text-white",children:ed})}),X[24]=ed,X[25]=f):f=X[25],X[26]!==Z||X[27]!==es?(x=Z&&(0,r.jsx)("div",{className:"absolute top-1 right-1 hidden group-hover:block",children:(0,r.jsx)(S.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e=>{e.stopPropagation(),es()},className:"rounded-md bg-white/90 px-2 py-1 text-xs text-red-500 shadow hover:bg-white",children:"清除"})}),X[26]=Z,X[27]=es,X[28]=x):x=X[28],X[29]===Symbol.for("react.memo_cache_sentinel")?(p=(0,r.jsx)("div",{className:"absolute inset-0",onClick:()=>ee.current?.click()}),X[29]=p):p=X[29],X[30]!==h||X[31]!==f||X[32]!==x?(g=(0,r.jsxs)("div",{className:"group relative h-20 w-20 cursor-pointer overflow-hidden rounded-lg border bg-white/60",children:[h,f,x,p]}),X[30]=h,X[31]=f,X[32]=x,X[33]=g):g=X[33],X[34]!==g||X[35]!==u?(b=(0,r.jsxs)("div",{children:[d,u,g]}),X[34]=g,X[35]=u,X[36]=b):b=X[36],X[37]===Symbol.for("react.memo_cache_sentinel")?(y=(0,r.jsx)("label",{className:"mb-2 block text-sm font-medium",children:"Avatar"}),X[37]=y):y=X[37],X[38]!==el?(v=(0,r.jsx)("input",{ref:et,type:"file",accept:"image/*",className:"hidden",onChange:el}),X[38]=el,X[39]=v):v=X[39],X[40]!==J?(j=J?.type==="file"?(0,r.jsx)("img",{src:J.previewUrl,alt:"avatar preview",className:"h-full w-full object-cover"}):(0,r.jsx)("img",{src:"/images/avatar.png",alt:"current avatar",className:"h-full w-full object-cover"}),X[40]=J,X[41]=j):j=X[41];let em=J?"更换":"上传";return X[42]!==em?(w=(0,r.jsx)("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center rounded-full bg-black/40 opacity-0 transition-opacity group-hover:opacity-100",children:(0,r.jsx)("span",{className:"text-xs text-white",children:em})}),X[42]=em,X[43]=w):w=X[43],X[44]!==J||X[45]!==en?(C=J&&(0,r.jsx)("div",{className:"absolute top-1 right-1 hidden group-hover:block",children:(0,r.jsx)(S.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e=>{e.stopPropagation(),en()},className:"rounded-md bg-white/90 px-2 py-1 text-xs text-red-500 shadow hover:bg-white",children:"清除"})}),X[44]=J,X[45]=en,X[46]=C):C=X[46],X[47]===Symbol.for("react.memo_cache_sentinel")?(N=(0,r.jsx)("div",{className:"absolute inset-0",onClick:()=>et.current?.click()}),X[47]=N):N=X[47],X[48]!==j||X[49]!==w||X[50]!==C?(_=(0,r.jsxs)("div",{className:"group relative h-20 w-20 cursor-pointer overflow-hidden rounded-full border bg-white/60",children:[j,w,C,N]}),X[48]=j,X[49]=w,X[50]=C,X[51]=_):_=X[51],X[52]!==v||X[53]!==_?(k=(0,r.jsxs)("div",{children:[y,v,_]}),X[52]=v,X[53]=_,X[54]=k):k=X[54],X[55]!==b||X[56]!==k?(R=(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[b,k]}),X[55]=b,X[56]=k,X[57]=R):R=X[57],X[58]===Symbol.for("react.memo_cache_sentinel")?(A=(0,r.jsx)("label",{className:"mb-2 block text-sm font-medium",children:"站点标题"}),X[58]=A):A=X[58],X[59]!==W||X[60]!==z?(B=e=>z({...W,meta:{...W.meta,title:e.target.value}}),X[59]=W,X[60]=z,X[61]=B):B=X[61],X[62]!==W.meta.title||X[63]!==B?(L=(0,r.jsxs)("div",{children:[A,(0,r.jsx)("input",{type:"text",value:W.meta.title,onChange:B,className:"bg-secondary/10 w-full rounded-lg border px-4 py-2 text-sm"})]}),X[62]=W.meta.title,X[63]=B,X[64]=L):L=X[64],X[65]===Symbol.for("react.memo_cache_sentinel")?(E=(0,r.jsx)("label",{className:"mb-2 block text-sm font-medium",children:"站点描述"}),X[65]=E):E=X[65],X[66]!==W||X[67]!==z?(Y=e=>z({...W,meta:{...W.meta,description:e.target.value}}),X[66]=W,X[67]=z,X[68]=Y):Y=X[68],X[69]!==W.meta.description||X[70]!==Y?(O=(0,r.jsxs)("div",{children:[E,(0,r.jsx)("textarea",{value:W.meta.description,onChange:Y,rows:3,className:"bg-secondary/10 w-full rounded-lg border px-4 py-2 text-sm"})]}),X[69]=W.meta.description,X[70]=Y,X[71]=O):O=X[71],X[72]===Symbol.for("react.memo_cache_sentinel")?(U=(0,r.jsx)("label",{className:"mb-2 block text-sm font-medium",children:"首页图片"}),X[72]=U):U=X[72],X[73]!==eo?(T=(0,r.jsx)("input",{ref:er,type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:eo}),X[73]=eo,X[74]=T):T=X[74],X[75]!==W.artImages?.length?(D=(W.artImages?.length??0)===0&&(0,r.jsx)("p",{className:"mb-2 text-xs text-gray-500",children:"暂未配置 Art 图片，点击下方「+」添加。"}),X[75]=W.artImages?.length,X[76]=D):D=X[76],X[77]!==Q||X[78]!==W.artImages||X[79]!==W.currentArtImageId||X[80]!==ec||X[81]!==ei?(M=W.artImages?.map(e=>{let t=W.currentArtImageId===e.id,a=Q[e.id],l=a?.type==="file"?a.previewUrl:e.url;return(0,r.jsxs)("div",{className:"group relative",children:[(0,r.jsx)("button",{type:"button",onClick:()=>ei(e.id),className:`block w-full overflow-hidden rounded-xl border bg-white/60 transition-all ${t?"ring-brand shadow-md ring-2":"hover:border-brand/60"}`,children:(0,r.jsx)("img",{src:l,alt:"art preview",className:"h-24 w-full object-cover"})}),t&&(0,r.jsx)("span",{className:"bg-brand pointer-events-none absolute top-1 left-1 rounded-full px-2 py-0.5 text-[10px] text-white shadow",children:"当前使用"}),(0,r.jsx)("button",{type:"button",onClick:()=>ec(e.id),className:"text-secondary absolute top-1 right-1 hidden rounded-full bg-white/90 px-1.5 py-0.5 text-[10px] shadow group-hover:block",children:"删除"})]},e.id)}),X[77]=Q,X[78]=W.artImages,X[79]=W.currentArtImageId,X[80]=ec,X[81]=ei,X[82]=M):M=X[82],X[83]===Symbol.for("react.memo_cache_sentinel")?(G=(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)("button",{type:"button",onClick:()=>er.current?.click(),className:"hover:border-brand/60 flex h-24 w-full items-center justify-center rounded-xl border border-dashed bg-white/40 text-2xl text-gray-400 hover:bg-white/80",children:"+"})}),X[83]=G):G=X[83],X[84]!==M?(H=(0,r.jsxs)("div",{className:"grid grid-cols-4 gap-3 max-sm:grid-cols-3",children:[M,G]}),X[84]=M,X[85]=H):H=X[85],X[86]!==T||X[87]!==D||X[88]!==H?(P=(0,r.jsxs)("div",{children:[U,T,D,H]}),X[86]=T,X[87]=D,X[88]=H,X[89]=P):P=X[89],X[90]!==R||X[91]!==L||X[92]!==O||X[93]!==P?($=(0,r.jsxs)("div",{className:"space-y-6",children:[R,L,O,P]}),X[90]=R,X[91]=L,X[92]=O,X[93]=P,X[94]=$):$=X[94],$}var W=e.i(21503);function z(e,t,r){let a=r*(2-t)/2;return 0!=a&&(t=1==a?0:a<.5?t*r/(2*a):t*r/(2-2*a)),{h:e,s:t,l:a}}function Z(e){var t,r,a;let l,s=function(e){let t=e.replace("#","");if(6===t.length){let e=parseInt(t.slice(0,2),16);return{r:e,g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:1}}if(8===t.length){let e=parseInt(t.slice(0,2),16),r=parseInt(t.slice(2,4),16);return{r:e,g:r,b:parseInt(t.slice(4,6),16),a:parseInt(t.slice(6,8),16)/255}}return{r:0,g:0,b:0,a:1}}(e),n=function(e,t,r){let a=Math.max(e/=255,t/=255,r/=255),l=Math.min(e,t,r),s=0,n=0,o=(a+l)/2;if(a!==l){let i=a-l;switch(n=o>.5?i/(2-a-l):i/(a+l),a){case e:s=((t-r)/i+6*(t<r))/6;break;case t:s=((r-e)/i+2)/6;break;case r:s=((e-t)/i+4)/6}}return{h:360*s,s:n,l:o}}(s.r,s.g,s.b),o=(t=n.h,r=n.s,{h:t,s:0===(l=(a=n.l)+r*Math.min(a,1-a))?0:2*(1-a/l),v:l,a:1});return{h:o.h,s:o.s,v:o.v,a:s.a}}function q(e,t,r){return Math.min(Math.max(e,t),r)}function J(e,t=2){return Number(e.toFixed(t))}function K({value:e,onChange:t,style:a,className:l}){let[s,n]=(0,m.useState)(!1),[o,i]=(0,m.useState)(0),[c,d]=(0,m.useState)(255),[u,h]=(0,m.useState)(255),[f,x]=(0,m.useState)(0),g=(0,m.useRef)(null),b=(0,m.useRef)(null),y=(0,m.useRef)(null),[v,j]=(0,m.useState)(!1),[w,C]=(0,m.useState)(!1),[N,_]=(0,m.useState)(!1),[S,I]=(0,m.useState)(!1),k=(0,m.useRef)(e);(0,m.useEffect)(()=>{if(e){let t=Z(e);k.current=e,setTimeout(()=>{if(g.current&&b.current&&y.current){let e=g.current.getBoundingClientRect().width,r=b.current.getBoundingClientRect().width,a=b.current.getBoundingClientRect().height,l=y.current.getBoundingClientRect().width;i(t.h/360*e),h(t.s*r),x((1-t.v)*a),d(t.a*l),n(!0)}},0)}},[]);let R=(0,m.useMemo)(()=>{if(g.current){let{width:e}=g.current.getBoundingClientRect();return J(o/e*360)}return 0},[o,g.current]),A=(0,m.useMemo)(()=>{if(y.current){let{width:e}=y.current.getBoundingClientRect();return q(J(c/e,4),0,1)}return 1},[c,y.current]),B=(0,m.useMemo)(()=>{if(b.current){let{width:e}=b.current.getBoundingClientRect();return q(J(u/e,4),0,1)}return 1},[u,b.current]),L=(0,m.useMemo)(()=>{if(b.current){let{height:e}=b.current.getBoundingClientRect();return 1-q(J(f/e,4),0,1)}return 0},[f,b.current]),E=(0,m.useMemo)(()=>z(R,B,L),[R,B,L]),Y=(0,m.useMemo)(()=>(function(e,t,r,a=1){var l;let s=z(e,t,r),n=function(e,t,r){let a,l,s;if(e/=360,0===t)a=l=s=r;else{let n=(e,t,r)=>(r<0&&(r+=1),r>1&&(r-=1),r<1/6)?e+(t-e)*6*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e,o=r<.5?r*(1+t):r+t-r*t,i=2*r-o;a=n(i,o,e+1/3),l=n(i,o,e),s=n(i,o,e-1/3)}return{r:Math.round(255*a),g:Math.round(255*l),b:Math.round(255*s)}}(s.h,s.s,s.l),o=(l=n.r,"#"+[l,n.g,n.b].map(e=>Math.round(e).toString(16).padStart(2,"0")).join("")),i=q(a,0,1);if(i>=1)return o;let c=Math.round(255*i).toString(16).padStart(2,"0");return`${o}${c}`})(R,B,L,A),[R,B,L,A]);return(0,m.useEffect)(()=>{t&&Y&&Y!==k.current&&(k.current=Y,t(Y))},[Y,t]),(0,m.useEffect)(()=>{let e=e=>{if(v&&g.current){let{left:t,right:r,width:a}=g.current.getBoundingClientRect();e.pageX<t?i(0):e.pageX>r?i(a):i(e.pageX-t)}if(w&&y.current){let{left:t,right:r,width:a}=y.current.getBoundingClientRect();e.pageX<t?d(0):e.pageX>r?d(a):d(e.pageX-t)}if((N||S)&&b.current){let{left:t,top:r,right:a,bottom:l,width:s,height:n}=b.current.getBoundingClientRect();N&&(e.pageX<t?h(0):e.pageX>a?h(s):h(e.pageX-t)),S&&(e.pageY<r?x(0):e.pageY>l?x(n):x(e.pageY-r))}},t=()=>{j(!1),C(!1),_(!1),I(!1)};return(v||w||N||S)&&(document.addEventListener("mousemove",e),document.addEventListener("mouseup",t),document.addEventListener("mouseleave",t)),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t),document.removeEventListener("mouseleave",t)}},[v,w,N,S]),(0,r.jsxs)("div",{"data-color-picker-panel":!0,className:(0,p.cn)("w-56 rounded-lg border bg-white p-3 shadow-lg select-none",l,s?"opacity-100":"opacity-0"),style:a,children:[(0,r.jsx)("div",{ref:b,onMouseDown:e=>{if(0===e.button){let{left:t,top:r,width:a,height:l}=b.current.getBoundingClientRect();h(q(e.pageX-t,0,a)),x(q(e.pageY-r,0,l)),_(!0),I(!0)}},className:"relative h-32 w-full cursor-crosshair rounded-t-md",style:{backgroundColor:`hsl(${R}, 100%, 50%)`,backgroundImage:"linear-gradient(0deg, #000, transparent), linear-gradient(90deg, #fff, hsla(0, 0%, 100%, 0))"},children:(0,r.jsx)("div",{className:"absolute z-10 h-4 w-4 -translate-x-1/2 -translate-y-1/2 cursor-crosshair rounded-full border-2 border-white shadow-md",style:{backgroundColor:`hsl(${E.h} ${100*E.s}% ${100*E.l}%)`,left:u,top:f}})}),(0,r.jsx)("div",{ref:g,onMouseDown:e=>{if(0===e.button){let{left:t,width:r}=g.current.getBoundingClientRect();i(q(e.pageX-t,0,r)),j(!0)}},className:"relative flex h-5 cursor-pointer items-center",style:{background:"linear-gradient(to right, rgb(255, 0, 0), rgb(255, 255, 0), rgb(0, 255, 0), rgb(0, 255, 255), rgb(0, 0, 255), rgb(255, 0, 255), rgb(255, 0, 0))"},children:(0,r.jsx)("div",{className:"absolute h-4 w-4 -translate-x-1/2 cursor-pointer rounded-full border-2 border-white shadow-md",style:{backgroundColor:`hsl(${R} 100% 50%)`,left:o}})}),(0,r.jsx)("div",{style:{backgroundSize:"12px 12px",backgroundImage:"url(\"data:image/svg+xml,%3Csvg width='12' height='12' xmlns='http://www.w3.org/2000/svg'%3E%3Cdefs%3E%3Cpattern id='grid' width='12' height='12' patternUnits='userSpaceOnUse'%3E%3Cpath d='M 12 0 L 0 0 0 12' fill='none' stroke='%23e5e7eb' stroke-width='1'/%3E%3C/pattern%3E%3C/defs%3E%3Crect width='100%25' height='100%25' fill='url(%23grid)'/%3E%3C/svg%3E\")"},className:"rounded-b-md",children:(0,r.jsx)("div",{ref:y,onMouseDown:e=>{if(0===e.button){let{left:t,width:r}=y.current.getBoundingClientRect();d(q(e.pageX-t,0,r)),C(!0)}},className:"relative flex h-5 cursor-pointer items-center",style:{background:`linear-gradient(to right, hsl(${E.h} ${100*E.s}% ${100*E.l}% / 0%), hsl(${E.h} ${100*E.s}% ${100*E.l}% / 100%))`},children:(0,r.jsx)("div",{style:{left:c},className:"absolute h-4 w-4 -translate-x-1/2 cursor-pointer rounded-full border-2 border-white bg-white shadow-md",children:(0,r.jsx)("div",{className:"h-full w-full rounded-full",style:{backgroundColor:`hsl(${E.h} ${100*E.s}% ${100*E.l}% / ${100*A}%)`}})})})}),(0,r.jsx)("input",{type:"text",value:Y,onChange:e=>{let r=e.target.value;if(/^#[0-9A-Fa-f]{0,8}$/.test(r)&&((7===r.length||9===r.length)&&t&&t(r),7===r.length||9===r.length)){let e=Z(r);if(g.current&&b.current&&y.current){let t=g.current.getBoundingClientRect().width,r=b.current.getBoundingClientRect().width,a=b.current.getBoundingClientRect().height,l=y.current.getBoundingClientRect().width;i(e.h/360*t),h(e.s*r),x((1-e.v)*a),d(e.a*l)}}},className:"w-full rounded-md border px-2 py-1 text-sm focus:ring-2 focus:ring-blue-500 focus:outline-none",placeholder:"#000000"})]})}function Q(e){let t,l,s,n,o,i,c,d,u,h,f,x,g,b,y=(0,a.c)(29),{value:v,onChange:j,className:w}=e,C=void 0===v?"#000000":v,[N,_]=(0,m.useState)(!1),[S,I]=(0,m.useState)(!1),k=(0,m.useRef)(null);y[0]===Symbol.for("react.memo_cache_sentinel")?(t={top:0,left:0},y[0]=t):t=y[0];let[R,A]=(0,m.useState)(t);return y[1]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{I(!0)},s=[],y[1]=l,y[2]=s):(l=y[1],s=y[2]),(0,m.useEffect)(l,s),y[3]!==N?(n=()=>{if(N&&k.current){let e=k.current.getBoundingClientRect();A({top:e.top-240,left:e.left})}},o=[N],y[3]=N,y[4]=n,y[5]=o):(n=y[4],o=y[5]),(0,m.useEffect)(n,o),y[6]!==N?(i=()=>{if(!N)return;let e=e=>{let t=e.target;if(k.current&&!k.current.contains(t)){let e=document.querySelector("[data-color-picker-panel]");e&&!e.contains(t)&&_(!1)}};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},c=[N],y[6]=N,y[7]=i,y[8]=c):(i=y[7],c=y[8]),(0,m.useEffect)(i,c),y[9]!==N?(d=()=>_(!N),y[9]=N,y[10]=d):d=y[10],y[11]!==w?(u=(0,p.cn)("h-10 w-10 rounded-lg border-2 border-white/20 shadow-sm transition-all hover:scale-105",w),y[11]=w,y[12]=u):u=y[12],y[13]!==C?(h={backgroundColor:C},y[13]=C,y[14]=h):h=y[14],y[15]===Symbol.for("react.memo_cache_sentinel")?(f=(0,r.jsx)("span",{className:"sr-only",children:"Select color"}),y[15]=f):f=y[15],y[16]!==u||y[17]!==h||y[18]!==d?(x=(0,r.jsx)("button",{ref:k,type:"button",onClick:d,className:u,style:h,children:f}),y[16]=u,y[17]=h,y[18]=d,y[19]=x):x=y[19],y[20]!==S||y[21]!==j||y[22]!==N||y[23]!==R||y[24]!==C?(g=S&&N&&R.top>0&&(0,W.createPortal)((0,r.jsx)(K,{value:C,onChange:j,style:{position:"fixed",top:`${R.top}px`,left:`${R.left}px`,zIndex:1e3}}),document.body),y[20]=S,y[21]=j,y[22]=N,y[23]=R,y[24]=C,y[25]=g):g=y[25],y[26]!==x||y[27]!==g?(b=(0,r.jsxs)(r.Fragment,{children:[x,g]}),y[26]=x,y[27]=g,y[28]=b):b=y[28],b}let V=(0,e.i(22436).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ee=e.i(17431).default.theme,et=[{name:"春暖",theme:{colorBrand:"#35bfab",colorBrandSecondary:"#1fc9e7",colorPrimary:"#334f52",colorSecondary:"#7b888e",colorBg:"#eeeeee",colorBorder:"#ffffff",colorCard:"#ffffff66",colorArticle:"#ffffffcc"},backgroundColors:["#EDDD62","#9EE7D1","#84D68A","#EDDD62","#88E6E5","#a7f3d0"]},{name:"秋实",theme:{colorPrimary:"#4E3F42",colorBrand:"#de4331",colorBrandSecondary:"#FCC841"},backgroundColors:["#FCC841","#DFEFFC","#DEDE92","#DE4331","#FE9750","#FCC841"]},{name:"夜晚",theme:{colorBrand:"#3a8fac",colorPrimary:"#e6e8e8",colorSecondary:"#acadae",colorBrandSecondary:"#51d0b9",colorBg:"#505050",colorBorder:"#8a8a8a5e",colorCard:"#34343466",colorArticle:"#333c"},backgroundColors:["#669590","#9ec3e7"]}];function er(e){let t,l,s,n,o,i,c,d,m,u,h,f,x,p,g,b,y,v,j,w,C,N,_,I,k,R,A,B,L,E,Y,O,U,T,D,M,G,H,P,F,$,X,W,z,Z,q,J,K,er,es,en,eo,ei,ec,ed,em=(0,a.c)(124),{formData:eu,setFormData:eh}=e;em[0]!==eu.theme?(t=eu.theme??{},em[0]=eu.theme,em[1]=t):t=em[1];let ef=t;em[2]!==eh?(l=(e,t)=>{eh(r=>({...r,theme:{...r.theme,[e]:t}}))},em[2]=eh,em[3]=l):l=em[3];let ex=l;em[4]!==eh?(s=e=>{eh(t=>({...t,theme:{...t.theme,colorBrand:e}}))},em[4]=eh,em[5]=s):s=em[5];let ep=s;em[6]!==eu||em[7]!==eh?(n=(e,t)=>{let r=[...eu.backgroundColors];r[e]=t,eh({...eu,backgroundColors:r})},em[6]=eu,em[7]=eh,em[8]=n):n=em[8];let eg=n,eb=el;em[9]!==eh?(o=()=>{let e=Array.from({length:Math.floor(5*Math.random())+4},()=>eb()),t=eb();eh(r=>({...r,backgroundColors:e,theme:{...r.theme,colorBrand:t}}))},em[9]=eh,em[10]=o):o=em[10];let ey=o;em[11]!==eu||em[12]!==eh?(i=()=>{eh({...eu,backgroundColors:[...eu.backgroundColors,"#EDDD62"]})},em[11]=eu,em[12]=eh,em[13]=i):i=em[13];let ev=i;em[14]!==eu||em[15]!==eh?(c=e=>{if(eu.backgroundColors.length>1){let t=eu.backgroundColors.filter((t,r)=>r!==e);eh({...eu,backgroundColors:t})}},em[14]=eu,em[15]=eh,em[16]=c):c=em[16];let ej=c;em[17]!==eh?(d=e=>{eh(t=>({...t,backgroundColors:[...e.backgroundColors],theme:{...t.theme,...e.theme}}))},em[17]=eh,em[18]=d):d=em[18];let ew=d;em[19]===Symbol.for("react.memo_cache_sentinel")?(m=(0,r.jsx)("label",{className:"mb-2 block text-sm font-medium",children:"基础颜色"}),em[19]=m):m=em[19];let eC=eu.theme?.colorBrand??"#35bfab";em[20]!==ep||em[21]!==eC?(u=(0,r.jsx)(Q,{value:eC,onChange:ep}),em[20]=ep,em[21]=eC,em[22]=u):u=em[22],em[23]===Symbol.for("react.memo_cache_sentinel")?(h=(0,r.jsx)("span",{className:"text-xs",children:"主题色"}),em[23]=h):h=em[23],em[24]!==u?(f=(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[u,h]}),em[24]=u,em[25]=f):f=em[25];let eN=ef.colorBrandSecondary??ee.colorBrandSecondary;em[26]!==ex?(x=e=>ex("colorBrandSecondary",e),em[26]=ex,em[27]=x):x=em[27],em[28]!==eN||em[29]!==x?(p=(0,r.jsx)(Q,{value:eN,onChange:x}),em[28]=eN,em[29]=x,em[30]=p):p=em[30],em[31]===Symbol.for("react.memo_cache_sentinel")?(g=(0,r.jsx)("span",{className:"text-xs",children:"次级主题色"}),em[31]=g):g=em[31],em[32]!==p?(b=(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[p,g]}),em[32]=p,em[33]=b):b=em[33];let e_=ef.colorPrimary??ee.colorPrimary;em[34]!==ex?(y=e=>ex("colorPrimary",e),em[34]=ex,em[35]=y):y=em[35],em[36]!==e_||em[37]!==y?(v=(0,r.jsx)(Q,{value:e_,onChange:y}),em[36]=e_,em[37]=y,em[38]=v):v=em[38],em[39]===Symbol.for("react.memo_cache_sentinel")?(j=(0,r.jsx)("span",{className:"text-xs",children:"主色"}),em[39]=j):j=em[39],em[40]!==v?(w=(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[v,j]}),em[40]=v,em[41]=w):w=em[41];let eS=ef.colorSecondary??ee.colorSecondary;em[42]!==ex?(C=e=>ex("colorSecondary",e),em[42]=ex,em[43]=C):C=em[43],em[44]!==eS||em[45]!==C?(N=(0,r.jsx)(Q,{value:eS,onChange:C}),em[44]=eS,em[45]=C,em[46]=N):N=em[46],em[47]===Symbol.for("react.memo_cache_sentinel")?(_=(0,r.jsx)("span",{className:"text-xs",children:"次色"}),em[47]=_):_=em[47],em[48]!==N?(I=(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[N,_]}),em[48]=N,em[49]=I):I=em[49];let eI=ef.colorBg??ee.colorBg;em[50]!==ex?(k=e=>ex("colorBg",e),em[50]=ex,em[51]=k):k=em[51],em[52]!==eI||em[53]!==k?(R=(0,r.jsx)(Q,{value:eI,onChange:k}),em[52]=eI,em[53]=k,em[54]=R):R=em[54],em[55]===Symbol.for("react.memo_cache_sentinel")?(A=(0,r.jsx)("span",{className:"text-xs",children:"背景色"}),em[55]=A):A=em[55],em[56]!==R?(B=(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[R,A]}),em[56]=R,em[57]=B):B=em[57];let ek=ef.colorBorder??ee.colorBorder;em[58]!==ex?(L=e=>ex("colorBorder",e),em[58]=ex,em[59]=L):L=em[59],em[60]!==ek||em[61]!==L?(E=(0,r.jsx)(Q,{value:ek,onChange:L}),em[60]=ek,em[61]=L,em[62]=E):E=em[62],em[63]===Symbol.for("react.memo_cache_sentinel")?(Y=(0,r.jsx)("span",{className:"text-xs",children:"边框色"}),em[63]=Y):Y=em[63],em[64]!==E?(O=(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[E,Y]}),em[64]=E,em[65]=O):O=em[65];let eR=ef.colorCard??ee.colorCard;em[66]!==ex?(U=e=>ex("colorCard",e),em[66]=ex,em[67]=U):U=em[67],em[68]!==eR||em[69]!==U?(T=(0,r.jsx)(Q,{value:eR,onChange:U}),em[68]=eR,em[69]=U,em[70]=T):T=em[70],em[71]===Symbol.for("react.memo_cache_sentinel")?(D=(0,r.jsx)("span",{className:"text-xs",children:"卡片色"}),em[71]=D):D=em[71],em[72]!==T?(M=(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[T,D]}),em[72]=T,em[73]=M):M=em[73];let eA=ef.colorArticle??ee.colorArticle;if(em[74]!==ex?(G=e=>ex("colorArticle",e),em[74]=ex,em[75]=G):G=em[75],em[76]!==eA||em[77]!==G?(H=(0,r.jsx)(Q,{value:eA,onChange:G}),em[76]=eA,em[77]=G,em[78]=H):H=em[78],em[79]===Symbol.for("react.memo_cache_sentinel")?(P=(0,r.jsx)("span",{className:"text-xs",children:"文章背景"}),em[79]=P):P=em[79],em[80]!==H?(F=(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[H,P]}),em[80]=H,em[81]=F):F=em[81],em[82]!==f||em[83]!==b||em[84]!==w||em[85]!==I||em[86]!==B||em[87]!==O||em[88]!==M||em[89]!==F?($=(0,r.jsxs)("div",{children:[m,(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[f,b,w,I,B,O,M,F]})]}),em[82]=f,em[83]=b,em[84]=w,em[85]=I,em[86]=B,em[87]=O,em[88]=M,em[89]=F,em[90]=$):$=em[90],em[91]===Symbol.for("react.memo_cache_sentinel")?(X=(0,r.jsx)("label",{className:"block text-sm font-medium",children:"背景颜色"}),em[91]=X):X=em[91],em[92]===Symbol.for("react.memo_cache_sentinel")?(W={scale:1.05},z={scale:.95},em[92]=W,em[93]=z):(W=em[92],z=em[93]),em[94]!==ey?(Z=(0,r.jsx)(S.motion.button,{whileHover:W,whileTap:z,onClick:ey,className:"rounded-lg border bg-white/60 px-3 py-1 text-xs whitespace-nowrap",children:"随机配色"}),em[94]=ey,em[95]=Z):Z=em[95],em[96]===Symbol.for("react.memo_cache_sentinel")?(q={scale:1.05},J={scale:.95},em[96]=q,em[97]=J):(q=em[96],J=em[97]),em[98]!==ev?(K=(0,r.jsx)(S.motion.button,{whileHover:q,whileTap:J,onClick:ev,className:"rounded-lg border bg-white/60 px-3 py-1 text-xs whitespace-nowrap",children:"+ 添加颜色"}),em[98]=ev,em[99]=K):K=em[99],em[100]!==Z||em[101]!==K?(er=(0,r.jsxs)("div",{className:"mb-2 flex items-center justify-between gap-3",children:[X,(0,r.jsxs)("div",{className:"flex gap-2",children:[Z,K]})]}),em[100]=Z,em[101]=K,em[102]=er):er=em[102],em[103]!==eu.backgroundColors||em[104]!==eg||em[105]!==ej){let e;em[107]!==eu.backgroundColors.length||em[108]!==eg||em[109]!==ej?(e=(e,t)=>(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsxs)("div",{className:"group relative",children:[(0,r.jsx)(Q,{value:e,onChange:e=>eg(t,e)}),eu.backgroundColors.length>1&&(0,r.jsx)("button",{onClick:()=>ej(t),className:"text-secondary absolute -top-1 -right-2 rounded-lg border bg-white/60 text-xs whitespace-nowrap opacity-0 transition-opacity group-hover:opacity-100",children:(0,r.jsx)(V,{className:"size-3"})})]})},t),em[107]=eu.backgroundColors.length,em[108]=eg,em[109]=ej,em[110]=e):e=em[110],es=eu.backgroundColors.map(e),em[103]=eu.backgroundColors,em[104]=eg,em[105]=ej,em[106]=es}else es=em[106];return em[111]!==es?(en=(0,r.jsx)("div",{className:"flex gap-3",children:es}),em[111]=es,em[112]=en):en=em[112],em[113]!==er||em[114]!==en?(eo=(0,r.jsxs)("div",{children:[er,en]}),em[113]=er,em[114]=en,em[115]=eo):eo=em[115],em[116]!==ew?(ei=et.map(e=>(0,r.jsxs)("button",{onClick:()=>ew(e),className:"flex items-center gap-3 rounded-lg border bg-white/60 p-3 transition-colors hover:bg-white/80",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"h-10 w-10 rounded-lg border-2 border-white/20 shadow-sm",style:{backgroundColor:e.theme.colorBrand??ee.colorBrand}}),e.backgroundColors.map(ea)]}),(0,r.jsx)("span",{className:"text-sm font-medium whitespace-nowrap",children:e.name})]},e.name)),em[116]=ew,em[117]=ei):ei=em[117],em[118]!==ei?(ec=(0,r.jsx)("div",{className:"flex flex-col gap-3",children:ei}),em[118]=ei,em[119]=ec):ec=em[119],em[120]!==$||em[121]!==eo||em[122]!==ec?(ed=(0,r.jsxs)("div",{className:"space-y-6",children:[$,eo,ec]}),em[120]=$,em[121]=eo,em[122]=ec,em[123]=ed):ed=em[123],ed}function ea(e,t){return(0,r.jsx)("div",{className:"h-10 w-10 rounded-lg border-2 border-white/20 shadow-sm",style:{backgroundColor:e}},t)}function el(){let e=en;return`#${[e(),e(),e()].map(es).join("").toUpperCase()}`}function es(e){return e.toString(16).padStart(2,"0")}function en(){return Math.floor(256*Math.random())}let eo={artCard:"首图",hiCard:"中心",clockCard:"时钟",calendarCard:"日历",musicCard:"音乐",socialButtons:"联系",shareCard:"分享",articleCard:"文章",writeButtons:"写作",navCard:"导航"};function ei(e){let t,l,s,n,o=(0,a.c)(7),{cardStylesData:i,setCardStylesData:c}=e;return o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)("div",{className:"text-secondary text-sm",children:"（偏移代表相对平面中心的偏移，比如 (0,0) 代表卡牌左上角为屏幕中心）"}),o[0]=t):t=o[0],o[1]===Symbol.for("react.memo_cache_sentinel")?(l=(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b text-xs text-gray-500",children:[(0,r.jsx)("th",{className:"px-3 py-2 text-left font-medium",children:"卡片"}),(0,r.jsx)("th",{className:"px-3 py-2 text-left font-medium",children:"宽度"}),(0,r.jsx)("th",{className:"px-3 py-2 text-left font-medium",children:"高度"}),(0,r.jsx)("th",{className:"px-3 py-2 text-left font-medium",children:"显示顺序"}),(0,r.jsx)("th",{className:"px-3 py-2 text-left font-medium",children:"横向偏移"}),(0,r.jsx)("th",{className:"px-3 py-2 text-left font-medium",children:"纵向偏移"})]})}),o[1]=l):l=o[1],o[2]!==i?(s=Object.entries(i),o[2]=i,o[3]=s):s=o[3],o[4]!==c||o[5]!==s?(n=(0,r.jsxs)("div",{className:"overflow-x-auto",children:[t,(0,r.jsxs)("table",{className:"mt-3 w-full border-collapse text-sm",children:[l,(0,r.jsx)("tbody",{children:s.map(e=>{let[t,a]=e;return(0,r.jsxs)("tr",{className:"border-b last:border-0",children:[(0,r.jsx)("td",{className:"px-3 py-2 align-middle whitespace-nowrap",children:eo[t]??t.replace(/([A-Z])/g," $1").trim()}),(0,r.jsx)("td",{className:"px-3 py-2",children:void 0!==a.width?(0,r.jsx)("input",{type:"number",value:a.width,onChange:e=>c(r=>({...r,[t]:{...r[t],width:parseInt(e.target.value)||0}})),className:"no-spinner w-full rounded-lg border bg-secondary/10 px-3 py-1.5 text-xs"}):(0,r.jsx)("span",{className:"text-xs text-gray-400",children:"-"})}),(0,r.jsx)("td",{className:"px-3 py-2",children:void 0!==a.height?(0,r.jsx)("input",{type:"number",value:a.height,onChange:e=>c(r=>({...r,[t]:{...r[t],height:parseInt(e.target.value)||0}})),className:"no-spinner w-full rounded-lg border bg-secondary/10 px-3 py-1.5 text-xs"}):(0,r.jsx)("span",{className:"text-xs text-gray-400",children:"-"})}),(0,r.jsx)("td",{className:"px-3 py-2",children:(0,r.jsx)("input",{type:"number",value:a.order,onChange:e=>c(r=>({...r,[t]:{...r[t],order:parseInt(e.target.value)||0}})),className:"w-full rounded-lg border bg-secondary/10 px-3 py-1.5 text-xs"})}),(0,r.jsx)("td",{className:"px-3 py-2",children:(0,r.jsx)("input",{type:"number",value:a.offsetX??"",placeholder:"null",onChange:e=>{let r=""===e.target.value?null:parseInt(e.target.value)||0;c(e=>({...e,[t]:{...e[t],offsetX:r}}))},className:"no-spinner w-full rounded-lg border bg-secondary/10 px-3 py-1.5 text-xs"})}),(0,r.jsx)("td",{className:"px-3 py-2",children:(0,r.jsx)("input",{type:"number",value:a.offsetY??"",placeholder:"null",onChange:e=>{let r=""===e.target.value?null:parseInt(e.target.value)||0;c(e=>({...e,[t]:{...e[t],offsetY:r}}))},className:"no-spinner w-full rounded-lg border bg-secondary/10 px-3 py-1.5 text-xs"})})]},t)})})]})]}),o[4]=c,o[5]=s,o[6]=n):n=o[6],n}function ec({open:e,onClose:t}){let{isAuth:a,setPrivateKey:l}=(0,G.useAuthStore)(),{siteContent:s,setSiteContent:o,cardStyles:i,setCardStyles:c,regenerateBubbles:d}=(0,n.useConfigStore)(),[u,h]=(0,m.useState)(s),[f,x]=(0,m.useState)(i),[p,g]=(0,m.useState)(s),[b,y]=(0,m.useState)(i),[v,j]=(0,m.useState)(!1),[w,C]=(0,m.useState)("site"),N=(0,m.useRef)(null),[_,k]=(0,m.useState)(null),[R,A]=(0,m.useState)(null),[B,L]=(0,m.useState)({});(0,m.useEffect)(()=>{if(e){let e={...s},t={...i};h(e),x(t),g(e),y(t),k(null),A(null),L({}),C("site")}},[e,s,i]),(0,m.useEffect)(()=>()=>{_?.type==="file"&&URL.revokeObjectURL(_.previewUrl),R?.type==="file"&&URL.revokeObjectURL(R.previewUrl),Object.values(B).forEach(e=>{"file"===e.type&&URL.revokeObjectURL(e.previewUrl)})},[_,R,B]);let E=async e=>{try{let t=await e.text();l(t),await Y()}catch(e){console.error("Failed to read private key:",e),I.toast.error("读取密钥文件失败")}},Y=async()=>{j(!0);try{let e=p.artImages??[],r=u.artImages??[],a=e.filter(e=>!r.some(t=>t.id===e.id));await $(u,f,_,R,B,a),o(u),c(f),U(u.theme),k(null),A(null),L({}),t()}catch(e){console.error("Failed to save:",e),I.toast.error(`保存失败: ${e?.message||"未知错误"}`)}finally{j(!1)}},O=()=>{if(_?.type==="file"&&URL.revokeObjectURL(_.previewUrl),R?.type==="file"&&URL.revokeObjectURL(R.previewUrl),Object.values(B).forEach(e=>{"file"===e.type&&URL.revokeObjectURL(e.previewUrl)}),o(p),c(b),d(),"undefined"!=typeof document){document.title=p.meta.title;let e=document.querySelector('meta[name="description"]');e&&e.setAttribute("content",p.meta.description)}U(p.theme),k(null),A(null),L({}),t()},U=e=>{if("undefined"==typeof document||!e)return;let{colorBrand:t,colorBrandSecondary:r,colorPrimary:a,colorSecondary:l,colorBg:s,colorBorder:n,colorCard:o,colorArticle:i}=e,c=document.documentElement;t&&c.style.setProperty("--color-brand",t),r&&c.style.setProperty("--color-brand-secondary",r),a&&c.style.setProperty("--color-primary",a),l&&c.style.setProperty("--color-secondary",l),s&&c.style.setProperty("--color-bg",s),n&&c.style.setProperty("--color-border",n),o&&c.style.setProperty("--color-card",o),i&&c.style.setProperty("--color-article",i)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{ref:N,type:"file",accept:".pem",className:"hidden",onChange:async e=>{let t=e.target.files?.[0];t&&await E(t),e.currentTarget&&(e.currentTarget.value="")}}),(0,r.jsxs)(M.DialogModal,{open:e,onClose:O,className:"card scrollbar-none max-h-[90vh] min-h-[600px] w-[640px] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,r.jsx)("div",{className:"flex gap-1",children:[{id:"site",label:"网站设置"},{id:"color",label:"色彩配置"},{id:"layout",label:"首页布局"}].map(e=>(0,r.jsxs)("button",{onClick:()=>C(e.id),className:`relative px-4 py-2 text-sm font-medium transition-colors ${w===e.id?"text-brand":"text-secondary hover:text-primary"}`,children:[e.label,w===e.id&&(0,r.jsx)("div",{className:"bg-brand absolute right-0 bottom-0 left-0 h-0.5"})]},e.id))}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)(S.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{if(console.log("formData",u),o(u),c(f),d(),"undefined"!=typeof document){document.title=u.meta.title;let e=document.querySelector('meta[name="description"]');e&&e.setAttribute("content",u.meta.description)}U(u.theme),t()},className:"rounded-xl border bg-white/60 px-6 py-2 text-sm",children:"预览"}),(0,r.jsx)(S.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:O,disabled:v,className:"rounded-xl border bg-white/60 px-6 py-2 text-sm",children:"取消"}),(0,r.jsx)(S.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{a?Y():N.current?.click()},disabled:v,className:"brand-btn px-6",children:v?"保存中...":a?"保存":"导入密钥"})]})]}),(0,r.jsxs)("div",{className:"min-h-[200px]",children:["site"===w&&(0,r.jsx)(X,{formData:u,setFormData:h,faviconItem:_,setFaviconItem:k,avatarItem:R,setAvatarItem:A,artImageUploads:B,setArtImageUploads:L}),"color"===w&&(0,r.jsx)(er,{formData:u,setFormData:h}),"layout"===w&&(0,r.jsx)(ei,{cardStylesData:f,setCardStylesData:x})]})]})]})}function ed(){let e,t,s,o,d,u,h,f,x,p,g,b,y,v,j,w,C,N,_,I,R,A,B=(0,a.c)(32),L=(0,l.useCenterStore)(),{cardStyles:E}=(0,n.useConfigStore)(),{maxSM:Y}=(0,k.useSize)(),O=(0,c.useRouter)(),[T,M]=(0,m.useState)(!1),G=E.writeButtons,H=E.hiCard,P=E.clockCard,[F,$]=(0,m.useState)(!1);if(B[0]!==G.order?(e=()=>{setTimeout(()=>$(!0),G.order*i.ANIMATION_DELAY*1e3)},t=[G.order],B[0]=G.order,B[1]=e,B[2]=t):(e=B[1],t=B[2]),(0,m.useEffect)(e,t),Y||!F)return null;let X=null!==G.offsetX?L.x+G.offsetX:L.x+i.CARD_SPACING+H.width/2,W=null!==G.offsetY?L.y+G.offsetY:L.y-P.offset-G.height-i.CARD_SPACING/2-P.height;return B[3]!==X||B[4]!==W?(s={left:X,top:W},o={left:X,top:W},B[3]=X,B[4]=W,B[5]=s,B[6]=o):(s=B[5],o=B[6]),B[7]!==O?(d=()=>O.push("/write"),B[7]=O,B[8]=d):d=B[8],B[9]===Symbol.for("react.memo_cache_sentinel")?(u={opacity:0,scale:.6},h={opacity:1,scale:1},f={scale:1.05},x={scale:.95},p={boxShadow:"inset 0 0 12px rgba(255, 255, 255, 0.4)"},B[9]=u,B[10]=h,B[11]=f,B[12]=x,B[13]=p):(u=B[9],h=B[10],f=B[11],x=B[12],p=B[13]),B[14]===Symbol.for("react.memo_cache_sentinel")?(g=(0,r.jsx)(U.default,{}),b=(0,r.jsx)("span",{children:"写文章"}),B[14]=g,B[15]=b):(g=B[14],b=B[15]),B[16]!==d?(y=(0,r.jsxs)(S.motion.button,{onClick:d,initial:u,animate:h,whileHover:f,whileTap:x,style:p,className:"brand-btn whitespace-nowrap",children:[g,b]}),B[16]=d,B[17]=y):y=B[17],B[18]===Symbol.for("react.memo_cache_sentinel")?(v={opacity:0,scale:.6},j={opacity:1,scale:1},w={scale:1.05},C={scale:.95},N=()=>M(!0),B[18]=v,B[19]=j,B[20]=w,B[21]=C,B[22]=N):(v=B[18],j=B[19],w=B[20],C=B[21],N=B[22]),B[23]===Symbol.for("react.memo_cache_sentinel")?(_=(0,r.jsx)(S.motion.button,{initial:v,animate:j,whileHover:w,whileTap:C,onClick:N,className:"p-2",children:(0,r.jsx)(D,{className:"h-6 w-6"})}),B[23]=_):_=B[23],B[24]===Symbol.for("react.memo_cache_sentinel")?(I=()=>M(!1),B[24]=I):I=B[24],B[25]!==T?(R=(0,r.jsx)(ec,{open:T,onClose:I}),B[25]=T,B[26]=R):R=B[26],B[27]!==y||B[28]!==s||B[29]!==R||B[30]!==o?(A=(0,r.jsxs)(S.motion.div,{initial:s,animate:o,className:"absolute flex items-center gap-4",children:[y,_,R]}),B[27]=y,B[28]=s,B[29]=R,B[30]=o,B[31]=A):A=B[31],A}var em=e.i(99533);function eu(){let e,t,s,o,c=(0,a.c)(10),d=(0,l.useCenterStore)(),{cardStyles:m}=(0,n.useConfigStore)(),u=m.hiCard,h=m.socialButtons,f=m.musicCard,x=m.shareCard,p=d.x+u.width/2-h.width+x.width+i.CARD_SPACING,g=d.y+u.height/2+i.CARD_SPACING+h.height+i.CARD_SPACING+f.height+i.CARD_SPACING;c[0]!==p||c[1]!==g?(e={left:p,top:g},t={left:p,top:g},c[0]=p,c[1]=g,c[2]=e,c[3]=t):(e=c[2],t=c[3]);let b=m.shareCard.order*i.ANIMATION_DELAY*1e3;return c[4]!==b?(s=(0,r.jsx)(em.default,{delay:b}),c[4]=b,c[5]=s):s=c[5],c[6]!==e||c[7]!==t||c[8]!==s?(o=(0,r.jsx)(S.motion.div,{className:"absolute max-sm:static",initial:e,animate:t,children:s}),c[6]=e,c[7]=t,c[8]=s,c[9]=o):o=c[9],o}function eh(){let e,t,l,s,n,i,c,m,h,f,x,p=(0,a.c)(21),{maxSM:b}=(0,k.useSize)();return p[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(d,{}),t=(0,r.jsx)(o,{}),p[0]=e,p[1]=t):(e=p[0],t=p[1]),p[2]!==b?(l=!b&&(0,r.jsx)(u,{}),p[2]=b,p[3]=l):l=p[3],p[4]!==b?(s=!b&&(0,r.jsx)(g,{}),p[4]=b,p[5]=s):s=p[5],p[6]!==b?(n=!b&&(0,r.jsx)(w,{}),p[6]=b,p[7]=n):n=p[7],p[8]===Symbol.for("react.memo_cache_sentinel")?(i=(0,r.jsx)(A,{}),p[8]=i):i=p[8],p[9]!==b?(c=!b&&(0,r.jsx)(E,{}),p[9]=b,p[10]=c):c=p[10],p[11]===Symbol.for("react.memo_cache_sentinel")?(m=(0,r.jsx)(O,{}),p[11]=m):m=p[11],p[12]!==b?(h=!b&&(0,r.jsx)(ed,{}),p[12]=b,p[13]=h):h=p[13],p[14]===Symbol.for("react.memo_cache_sentinel")?(f=(0,r.jsx)(eu,{}),p[14]=f):f=p[14],p[15]!==l||p[16]!==s||p[17]!==n||p[18]!==c||p[19]!==h?(x=(0,r.jsxs)("div",{className:"max-sm:flex max-sm:flex-col max-sm:items-center max-sm:gap-6 max-sm:pt-28 max-sm:pb-20",children:[e,t,l,s,n,i,c,m,h,f]}),p[15]=l,p[16]=s,p[17]=n,p[18]=c,p[19]=h,p[20]=x):x=p[20],x}e.s(["default",()=>eh],10849)}]);