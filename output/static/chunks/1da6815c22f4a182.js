(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,99533,e=>{"use strict";var t=e.i(58190),r=e.i(35311),n=e.i(55926),i=e.i(7281),a=e.i(69968);let s=(0,e.i(22436).default)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]);var l=e.i(7284),o=e.i(75157),c=e.i(95403);let u="https://blog-liker.yysuni1001.workers.dev/api/like";function d({slug:e="yysuni",delay:d,className:f}){let[m,h]=(0,r.useState)(!1),[g,p]=(0,r.useState)(!1),[y,v]=(0,r.useState)(!1),[x,w]=(0,r.useState)([]);(0,r.useEffect)(()=>{setTimeout(()=>{p(!0)},d||1e3)},[]),(0,r.useEffect)(()=>{if(y){let e=setTimeout(()=>v(!1),600);return()=>clearTimeout(e)}},[y]);let b=(0,r.useCallback)(async e=>{let t=await fetch(e,{method:"GET",cache:"no-store"});if(!t.ok)return null;let r=await t.json().catch(()=>({}));return"number"==typeof r?.count?r.count:null},[]),{data:N,mutate:O}=(0,n.default)(e?`${u}?slug=${encodeURIComponent(e)}`:null,b,{revalidateOnFocus:!1,dedupingInterval:1e4}),E=(0,r.useCallback)(async()=>{if(e){h(!0),v(!0),w(Array.from({length:6},(e,t)=>({id:Date.now()+t,x:60*Math.random()-30,y:60*Math.random()-30}))),setTimeout(()=>w([]),1e3);try{let t=`${u}?slug=${encodeURIComponent(e)}`,r=await fetch(t,{method:"POST"}),n=await r.json().catch(()=>({}));"rate_limited"==n.reason&&(0,c.toast)("è°¢è°¢å•¦ðŸ˜˜ï¼Œä»Šå¤©å·²ç»ä¸èƒ½å†ç‚¹èµžå•¦ðŸ’•");let i="number"==typeof n?.count?n.count:(N??0)+1;await O(i,{revalidate:!1})}catch{}}},[e,N,O]),_="number"==typeof N?N:null;if(g)return(0,t.jsxs)(i.motion.button,{initial:{opacity:0,scale:.6},animate:{opacity:1,scale:1},whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":"Like this post",onClick:E,className:(0,l.default)("card heartbeat-container relative overflow-visible rounded-full p-3",f),children:[(0,t.jsx)(a.AnimatePresence,{children:x.map(e=>(0,t.jsx)(i.motion.div,{className:"pointer-events-none absolute inset-0 flex items-center justify-center",initial:{opacity:1,scale:0,x:0,y:0},animate:{opacity:[1,1,0],scale:[0,1.2,.8],x:e.x,y:e.y},exit:{opacity:0},transition:{duration:.8,ease:"easeOut"},children:(0,t.jsx)(s,{className:"fill-rose-400 text-rose-400",size:12})},e.id))}),"number"==typeof _&&(0,t.jsx)(i.motion.span,{initial:{scale:.4},animate:{scale:1},className:(0,o.cn)("absolute -top-2 left-9 min-w-6 rounded-full px-1.5 py-1 text-center text-xs text-white tabular-nums",m?"bg-rose-400":"bg-gray-300"),children:_}),(0,t.jsx)(i.motion.div,{animate:y?{scale:[1,1.4,1],rotate:[0,-10,10,0]}:{},transition:{duration:.6,ease:"easeOut"},children:(0,t.jsx)(s,{className:(0,l.default)("heartbeat",m?"fill-rose-400 text-rose-400":"fill-rose-200 text-rose-200"),size:28})})]})}e.s(["default",()=>d],99533)},66324,(e,t,r)=>{e.e,t.exports=function(){"use strict";var e="millisecond",t="second",r="minute",n="hour",i="week",a="month",s="quarter",l="year",o="date",c="Invalid Date",u=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,d=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f=function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e},m="en",h={};h[m]={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||t[0])+"]"}};var g="$isDayjsObject",p=function(e){return e instanceof w||!(!e||!e[g])},y=function e(t,r,n){var i;if(!t)return m;if("string"==typeof t){var a=t.toLowerCase();h[a]&&(i=a),r&&(h[a]=r,i=a);var s=t.split("-");if(!i&&s.length>1)return e(s[0])}else{var l=t.name;h[l]=t,i=l}return!n&&i&&(m=i),i||!n&&m},v=function(e,t){if(p(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new w(r)},x={s:f,z:function(e){var t=-e.utcOffset(),r=Math.abs(t);return(t<=0?"+":"-")+f(Math.floor(r/60),2,"0")+":"+f(r%60,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var n=12*(r.year()-t.year())+(r.month()-t.month()),i=t.clone().add(n,a),s=r-i<0,l=t.clone().add(n+(s?-1:1),a);return+(-(n+(r-i)/(s?i-l:l-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(c){return({M:a,y:l,w:i,d:"day",D:o,h:n,m:r,s:t,ms:e,Q:s})[c]||String(c||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}};x.l=y,x.i=p,x.w=function(e,t){return v(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var w=function(){function f(e){this.$L=y(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[g]=!0}var m=f.prototype;return m.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(x.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(u);if(n){var i=n[2]-1||0,a=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)):new Date(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)}}return new Date(t)}(e),this.init()},m.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},m.$utils=function(){return x},m.isValid=function(){return this.$d.toString()!==c},m.isSame=function(e,t){var r=v(e);return this.startOf(t)<=r&&r<=this.endOf(t)},m.isAfter=function(e,t){return v(e)<this.startOf(t)},m.isBefore=function(e,t){return this.endOf(t)<v(e)},m.$g=function(e,t,r){return x.u(e)?this[t]:this.set(r,e)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(e,s){var c=this,u=!!x.u(s)||s,d=x.p(e),f=function(e,t){var r=x.w(c.$u?Date.UTC(c.$y,t,e):new Date(c.$y,t,e),c);return u?r:r.endOf("day")},m=function(e,t){return x.w(c.toDate()[e].apply(c.toDate("s"),(u?[0,0,0,0]:[23,59,59,999]).slice(t)),c)},h=this.$W,g=this.$M,p=this.$D,y="set"+(this.$u?"UTC":"");switch(d){case l:return u?f(1,0):f(31,11);case a:return u?f(1,g):f(0,g+1);case i:var v=this.$locale().weekStart||0,w=(h<v?h+7:h)-v;return f(u?p-w:p+(6-w),g);case"day":case o:return m(y+"Hours",0);case n:return m(y+"Minutes",1);case r:return m(y+"Seconds",2);case t:return m(y+"Milliseconds",3);default:return this.clone()}},m.endOf=function(e){return this.startOf(e,!1)},m.$set=function(i,s){var c,u=x.p(i),d="set"+(this.$u?"UTC":""),f=((c={}).day=d+"Date",c[o]=d+"Date",c[a]=d+"Month",c[l]=d+"FullYear",c[n]=d+"Hours",c[r]=d+"Minutes",c[t]=d+"Seconds",c[e]=d+"Milliseconds",c)[u],m="day"===u?this.$D+(s-this.$W):s;if(u===a||u===l){var h=this.clone().set(o,1);h.$d[f](m),h.init(),this.$d=h.set(o,Math.min(this.$D,h.daysInMonth())).$d}else f&&this.$d[f](m);return this.init(),this},m.set=function(e,t){return this.clone().$set(e,t)},m.get=function(e){return this[x.p(e)]()},m.add=function(e,s){var o,c=this;e=Number(e);var u=x.p(s),d=function(t){var r=v(c);return x.w(r.date(r.date()+Math.round(t*e)),c)};if(u===a)return this.set(a,this.$M+e);if(u===l)return this.set(l,this.$y+e);if("day"===u)return d(1);if(u===i)return d(7);var f=((o={})[r]=6e4,o[n]=36e5,o[t]=1e3,o)[u]||1,m=this.$d.getTime()+e*f;return x.w(m,this)},m.subtract=function(e,t){return this.add(-1*e,t)},m.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||c;var n=e||"YYYY-MM-DDTHH:mm:ssZ",i=x.z(this),a=this.$H,s=this.$m,l=this.$M,o=r.weekdays,u=r.months,f=r.meridiem,m=function(e,r,i,a){return e&&(e[r]||e(t,n))||i[r].slice(0,a)},h=function(e){return x.s(a%12||12,e,"0")},g=f||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n};return n.replace(d,function(e,n){return n||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return x.s(t.$y,4,"0");case"M":return l+1;case"MM":return x.s(l+1,2,"0");case"MMM":return m(r.monthsShort,l,u,3);case"MMMM":return m(u,l);case"D":return t.$D;case"DD":return x.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return m(r.weekdaysMin,t.$W,o,2);case"ddd":return m(r.weekdaysShort,t.$W,o,3);case"dddd":return o[t.$W];case"H":return String(a);case"HH":return x.s(a,2,"0");case"h":return h(1);case"hh":return h(2);case"a":return g(a,s,!0);case"A":return g(a,s,!1);case"m":return String(s);case"mm":return x.s(s,2,"0");case"s":return String(t.$s);case"ss":return x.s(t.$s,2,"0");case"SSS":return x.s(t.$ms,3,"0");case"Z":return i}return null}(e)||i.replace(":","")})},m.utcOffset=function(){return-(15*Math.round(this.$d.getTimezoneOffset()/15))},m.diff=function(e,o,c){var u,d=this,f=x.p(o),m=v(e),h=(m.utcOffset()-this.utcOffset())*6e4,g=this-m,p=function(){return x.m(d,m)};switch(f){case l:u=p()/12;break;case a:u=p();break;case s:u=p()/3;break;case i:u=(g-h)/6048e5;break;case"day":u=(g-h)/864e5;break;case n:u=g/36e5;break;case r:u=g/6e4;break;case t:u=g/1e3;break;default:u=g}return c?u:x.a(u)},m.daysInMonth=function(){return this.endOf(a).$D},m.$locale=function(){return h[this.$L]},m.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=y(e,t,!0);return n&&(r.$L=n),r},m.clone=function(){return x.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},f}(),b=w.prototype;return v.prototype=b,[["$ms",e],["$s",t],["$m",r],["$H",n],["$W","day"],["$M",a],["$y",l],["$D",o]].forEach(function(e){b[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),v.extend=function(e,t){return e.$i||(e(t,w,v),e.$i=!0),v},v.locale=y,v.isDayjs=p,v.unix=function(e){return v(1e3*e)},v.en=h[m],v.Ls=h,v.p={},v}()},78363,e=>{"use strict";async function t(e){if(!e)throw Error("Slug is required");let t={},r=await fetch(`/blogs/${encodeURIComponent(e)}/config.json`);if(r.ok)try{t=await r.json()}catch{t={}}let n=await fetch(`/blogs/${encodeURIComponent(e)}/index.md`);if(!n.ok)throw Error("Blog not found");return{slug:e,config:t,markdown:await n.text(),cover:t.cover}}e.s(["loadBlog",()=>t])},64169,e=>{"use strict";let t,r;var n=e.i(58190),i=e.i(52434),a=e.i(7281),s=e.i(63580),l=e.i(72910),o=e.i(99151),c=e.i(35311),u=e.i(34026),d=e.i(48367),f=e.i(75602),m=e.i(47248);function h(e,t){let r,n=()=>{let{currentTime:n}=t,i=(null===n?0:n.value)/100;r!==i&&e(i),r=i};return m.frame.preUpdate(n,!0),()=>(0,m.cancelFrame)(n)}var g=e.i(15965),p=e.i(61979),y=e.i(69710);let v=new WeakMap,x=(e,t,r)=>(n,i)=>i&&i[0]?i[0][e+"Size"]:(0,p.isSVGElement)(n)&&"getBBox"in n?n.getBBox()[t]:n[r],w=x("inline","width","offsetWidth"),b=x("block","height","offsetHeight");function N({target:e,borderBoxSize:t}){v.get(e)?.forEach(r=>{r(e,{get width(){return w(e,t)},get height(){return b(e,t)}})})}function O(e){e.forEach(N)}let E=new Set;var _=e.i(47113),S=e.i(95153);let T=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),I={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function j(e,t,r,n){let i=r[t],{length:a,position:s}=I[t],l=i.current,o=r.time;i.current=e[`scroll${s}`],i.scrollLength=e[`scroll${a}`]-e[`client${a}`],i.offset.length=0,i.offset[0]=0,i.offset[1]=i.scrollLength,i.progress=(0,_.progress)(0,i.scrollLength,i.current);let c=n-o;i.velocity=c>50?0:(0,S.velocityPerSecond)(i.current-l,c)}e.i(37484);var $=e.i(79126),C=e.i(68617),R=e.i(83032),D=e.i(12064);let k={start:0,center:.5,end:1};function M(e,t,r=0){let n=0;if(e in k&&(e=k[e]),"string"==typeof e){let t=parseFloat(e);e.endsWith("px")?n=t:e.endsWith("%")?e=t/100:e.endsWith("vw")?n=t/100*document.documentElement.clientWidth:e.endsWith("vh")?n=t/100*document.documentElement.clientHeight:e=t}return"number"==typeof e&&(n=t*e),r+n}let A=[0,0],L=[[0,0],[1,1]],B={x:0,y:0},G=new WeakMap,F=new WeakMap,U=new WeakMap,H=e=>e===document.scrollingElement?window:e;function W(e,{container:n=document.scrollingElement,...i}={}){if(!n)return f.noop;let a=U.get(n);a||(a=new Set,U.set(n,a));let s=function(e,t,r,n={}){return{measure:t=>{!function(e,t=e,r){if(r.x.targetOffset=0,r.y.targetOffset=0,t!==e){let n=t;for(;n&&n!==e;)r.x.targetOffset+=n.offsetLeft,r.y.targetOffset+=n.offsetTop,n=n.offsetParent}r.x.targetLength=t===e?t.scrollWidth:t.clientWidth,r.y.targetLength=t===e?t.scrollHeight:t.clientHeight,r.x.containerLength=e.clientWidth,r.y.containerLength=e.clientHeight}(e,n.target,r),j(e,"x",r,t),j(e,"y",r,t),r.time=t,(n.offset||n.target)&&function(e,t,r){let{offset:n=L}=r,{target:i=e,axis:a="y"}=r,s="y"===a?"height":"width",l=i!==e?function(e,t){let r={x:0,y:0},n=e;for(;n&&n!==t;)if((0,D.isHTMLElement)(n))r.x+=n.offsetLeft,r.y+=n.offsetTop,n=n.offsetParent;else if("svg"===n.tagName){let e=n.getBoundingClientRect(),t=(n=n.parentElement).getBoundingClientRect();r.x+=e.left-t.left,r.y+=e.top-t.top}else if(n instanceof SVGGraphicsElement){let{x:e,y:t}=n.getBBox();r.x+=e,r.y+=t;let i=null,a=n.parentNode;for(;!i;)"svg"===a.tagName&&(i=a),a=n.parentNode;n=i}else break;return r}(i,e):B,o=i===e?{width:e.scrollWidth,height:e.scrollHeight}:"getBBox"in i&&"svg"!==i.tagName?i.getBBox():{width:i.clientWidth,height:i.clientHeight},c={width:e.clientWidth,height:e.clientHeight};t[a].offset.length=0;let u=!t[a].interpolate,d=n.length;for(let e=0;e<d;e++){let r=function(e,t,r,n){let i=Array.isArray(e)?e:A,a=0;return"number"==typeof e?i=[e,e]:"string"==typeof e&&(i=(e=e.trim()).includes(" ")?e.split(" "):[e,k[e]?e:"0"]),(a=M(i[0],r,n))-M(i[1],t)}(n[e],c[s],o[s],l[a]);u||r===t[a].interpolatorOffsets[e]||(u=!0),t[a].offset[e]=r}u&&(t[a].interpolate=(0,$.interpolate)(t[a].offset,(0,C.defaultOffset)(n),{clamp:!1}),t[a].interpolatorOffsets=[...t[a].offset]),t[a].progress=(0,R.clamp)(0,1,t[a].interpolate(t[a].current))}(e,r,n)},notify:()=>t(r)}}(n,e,{time:0,x:T(),y:T()},i);if(a.add(s),!G.has(n)){let e,i=()=>{for(let e of a)e.measure(m.frameData.timestamp);m.frame.preUpdate(s)},s=()=>{for(let e of a)e.notify()},l=()=>m.frame.read(i);G.set(n,l);let o=H(n);window.addEventListener("resize",l,{passive:!0}),n!==document.documentElement&&F.set(n,"function"==typeof n?(E.add(n),r||(r=()=>{let e={get width(){return window.innerWidth},get height(){return window.innerHeight}};E.forEach(t=>t(e))},window.addEventListener("resize",r)),()=>{E.delete(n),E.size||"function"!=typeof r||(window.removeEventListener("resize",r),r=void 0)}):(t||"undefined"!=typeof ResizeObserver&&(t=new ResizeObserver(O)),(e=(0,y.resolveElements)(n)).forEach(e=>{let r=v.get(e);r||(r=new Set,v.set(e,r)),r.add(l),t?.observe(e)}),()=>{e.forEach(e=>{let r=v.get(e);r?.delete(l),r?.size||t?.unobserve(e)})})),o.addEventListener("scroll",l,{passive:!0}),l()}let l=G.get(n);return m.frame.read(l,!1,!0),()=>{(0,m.cancelFrame)(l);let e=U.get(n);if(!e||(e.delete(s),e.size))return;let t=G.get(n);G.delete(n),t&&(H(n).removeEventListener("scroll",t),F.get(n)?.(),window.removeEventListener("resize",t))}}let P=new Map;function V({source:e,container:t,...r}){var n;let i,a,{axis:s}=r;e&&(t=e);let l=P.get(t)??new Map;P.set(t,l);let o=r.target??"self",c=l.get(o)??{},u=s+(r.offset??[]).join(",");return c[u]||(c[u]=!r.target&&(0,g.supportsScrollTimeline)()?new ScrollTimeline({source:t,axis:s}):(n={container:t,...r},i={value:0},a=W(e=>{i.value=100*e[n.axis].progress},n),{currentTime:i,cancel:a})),c[u]}var Y=e.i(66443),z=e.i(80851);let J=()=>({scrollX:(0,u.motionValue)(0),scrollY:(0,u.motionValue)(0),scrollXProgress:(0,u.motionValue)(0),scrollYProgress:(0,u.motionValue)(0)}),K=e=>!!e&&!e.current;var q=e.i(63960),X=e.i(38305);function Z(e){return"number"==typeof e?e:parseFloat(e)}var Q=e.i(364);function ee(e){let t=(0,Y.useConstant)(()=>(0,u.motionValue)(e)),{isStatic:r}=(0,c.useContext)(Q.MotionConfigContext);if(r){let[,r]=(0,c.useState)(e);(0,c.useEffect)(()=>t.on("change",r),[])}return t}function et(e,t){let r=ee(t()),n=()=>r.set(t());return n(),(0,z.useIsomorphicLayoutEffect)(()=>{let t=()=>m.frame.preRender(n,!1,!0),r=e.map(e=>e.on("change",t));return()=>{r.forEach(e=>e()),(0,m.cancelFrame)(n)}}),r}function er(e,t,r,n){if("function"==typeof e){let t;return u.collectMotionValues.current=[],e(),t=et(u.collectMotionValues.current,e),u.collectMotionValues.current=void 0,t}let i="function"==typeof t?t:function(...e){let t=!Array.isArray(e[0]),r=t?0:-1,n=e[0+r],i=e[1+r],a=e[2+r],s=e[3+r],l=(0,$.interpolate)(i,a,s);return t?l(n):l}(t,r,n);return Array.isArray(e)?en(e,i):en([e],([e])=>i(e))}function en(e,t){let r=(0,Y.useConstant)(()=>[]);return et(e,()=>{r.length=0;let n=e.length;for(let t=0;t<n;t++)r[t]=e[t].get();return t(r)})}var ei=e.i(99533),ea=e.i(7284);function es(e){let t,r,s,l,o,u,d,f,m,h,g,p,y=(0,i.c)(27),{toc:v,delay:x}=e,w=void 0===x?0:x;y[0]===Symbol.for("react.memo_cache_sentinel")?(t=new Set,y[0]=t):t=y[0];let[b,N]=(0,c.useState)(t);if(y[1]!==b||y[2]!==v){let e;y[4]!==v?(e=(e,t)=>v.findIndex(t=>t.id===e)-v.findIndex(e=>e.id===t),y[4]=v,y[5]=e):e=y[5],r=Array.from(b).sort(e),y[1]=b,y[2]=v,y[3]=r}else r=y[3];let O=r[0];if(y[6]!==v?(s=()=>{if(0===v.length)return;let e=new Map;return v.forEach(t=>{let r=document.getElementById(t.id);if(!r)return;let n=new IntersectionObserver(e=>{e.forEach(e=>{N(t=>{let r=new Set(t);return e.isIntersecting?r.add(e.target.id):r.delete(e.target.id),r})})},{rootMargin:"-100px 0px -100px 0px",threshold:0});n.observe(r),e.set(t.id,n)}),()=>{e.forEach(el)}},l=[v],y[6]=v,y[7]=s,y[8]=l):(s=y[7],l=y[8]),(0,c.useEffect)(s,l),y[9]===Symbol.for("react.memo_cache_sentinel")?(o={opacity:0,scale:.8},u={opacity:1,scale:1},y[9]=o,y[10]=u):(o=y[9],u=y[10]),y[11]!==w?(d={delay:w},y[11]=w,y[12]=d):d=y[12],y[13]===Symbol.for("react.memo_cache_sentinel")?(f=(0,n.jsx)("h2",{className:"text-secondary mb-2 font-medium",children:"ç›®å½•"}),y[13]=f):f=y[13],y[14]!==v.length?(m=0===v.length&&(0,n.jsx)("div",{className:"text-secondary",children:"æš‚æ— "}),y[14]=v.length,y[15]=m):m=y[15],y[16]!==O||y[17]!==v){let e;y[19]!==O?(e=e=>(0,n.jsx)("a",{href:`#${e.id}`,className:(0,ea.default)("hover:text-brand relative block pl-3 transition-colors",e.id===O&&"text-brand"),style:{paddingLeft:(e.level-1)*8},children:e.text},e.id+e.level),y[19]=O,y[20]=e):e=y[20],h=v.map(e),y[16]=O,y[17]=v,y[18]=h}else h=y[18];return y[21]!==m||y[22]!==h?(g=(0,n.jsxs)("div",{className:"relative max-h-[300px] space-y-2 overflow-auto",children:[m,h]}),y[21]=m,y[22]=h,y[23]=g):g=y[23],y[24]!==g||y[25]!==d?(p=(0,n.jsxs)(a.motion.div,{initial:o,animate:u,transition:d,className:"bg-card w-full rounded-xl border p-3 text-sm",children:[f,g]}),y[24]=g,y[25]=d,y[26]=p):p=y[26],p}function el(e){return e.disconnect()}var eo=e.i(25024);function ec(e){let t,r,l,o,u,g,p,y,v,x,w,b=(0,i.c)(22),{cover:N,summary:O,toc:E,slug:_}=e,[S,T]=(0,c.useState)(0),{scrollY:I}=function({container:e,target:t,...r}={}){let n=(0,Y.useConstant)(J),i=(0,c.useRef)(null),a=(0,c.useRef)(!1),s=(0,c.useCallback)(()=>(i.current=function(e,{axis:t="y",container:r=document.scrollingElement,...n}={}){var i,a;let s;if(!r)return f.noop;let l={axis:t,container:r,...n};return"function"==typeof e?(i=e,a=l,2===i.length?W(e=>{i(e[a.axis].progress,e)},a):h(i,V(a))):(s=V(l),e.attachTimeline({timeline:l.target?void 0:s,observe:e=>(e.pause(),h(t=>{e.time=e.iterationDuration*t},s))}))}((e,{x:t,y:r})=>{n.scrollX.set(t.current),n.scrollXProgress.set(t.progress),n.scrollY.set(r.current),n.scrollYProgress.set(r.progress)},{...r,container:e?.current||void 0,target:t?.current||void 0}),()=>{i.current?.()}),[e,t,JSON.stringify(r.offset)]);return(0,z.useIsomorphicLayoutEffect)(()=>{if(a.current=!1,!(K(e)||K(t)))return s();a.current=!0},[s]),(0,c.useEffect)(()=>a.current?((0,d.invariant)(!K(e),"Container ref is defined but not hydrated","use-scroll-ref"),(0,d.invariant)(!K(t),"Target ref is defined but not hydrated","use-scroll-ref"),s()):void 0,[s]),n}();b[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{let e=()=>{T(Math.max(0,document.documentElement.scrollHeight-window.innerHeight-72))},t=setTimeout(()=>{e()},5e3);return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e),clearTimeout(t)}},r=[],b[0]=t,b[1]=r):(t=b[0],r=b[1]),(0,c.useEffect)(t,r),b[2]!==S?(l=e=>Math.min(Math.max(0,e-72),S),b[2]=S,b[3]=l):l=b[3];let j=er(I,l);b[4]===Symbol.for("react.memo_cache_sentinel")?(o={stiffness:100,damping:15,mass:.6,restDelta:.5},b[4]=o):o=b[4];let $=function(e,t={}){let{isStatic:r}=(0,c.useContext)(Q.MotionConfigContext),n=()=>(0,X.isMotionValue)(e)?e.get():e;if(r)return er(n);let i=ee(n());return(0,c.useInsertionEffect)(()=>(function(e,t,r){let n,i=e.get(),a=null,s=i,l="string"==typeof i?i.replace(/[\d.-]/g,""):void 0,o=()=>{a&&(a.stop(),a=null)},c=()=>{o(),a=new q.JSAnimation({keyframes:[Z(e.get()),Z(s)],velocity:e.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...r,onUpdate:n})};if(e.attach((e,t)=>{s=e,n=e=>{var r,n;return t((r=e,(n=l)?r+n:r))},m.frame.postRender(c)},o),(0,X.isMotionValue)(t)){let r=t.on("change",t=>{var r,n;return e.set((r=t,(n=l)?r+n:r))}),n=e.on("destroy",r);return()=>{r(),n()}}return o})(i,e,t),[i,JSON.stringify(t)]),i}(j,o);return b[5]!==$?(u={y:$},b[5]=$,b[6]=u):u=b[6],b[7]!==N?(g=N&&(0,n.jsx)(a.motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:s.INIT_DELAY+ +s.ANIMATION_DELAY},className:"bg-card w-full rounded-xl p-3",children:(0,n.jsx)("img",{src:N,alt:"cover",className:"h-auto w-full rounded-xl border object-cover"})}),b[7]=N,b[8]=g):g=b[8],b[9]!==O?(p=O&&(0,n.jsxs)(a.motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:s.INIT_DELAY+2*s.ANIMATION_DELAY},className:"bg-card w-full rounded-xl border p-3 text-sm",children:[(0,n.jsx)("h2",{className:"text-secondary mb-2 font-medium",children:"æ‘˜è¦"}),(0,n.jsx)("div",{className:"text-secondary cursor-text",children:O})]}),b[9]=O,b[10]=p):p=b[10],b[11]!==E?(y=(0,n.jsx)(es,{toc:E,delay:s.INIT_DELAY+3*s.ANIMATION_DELAY}),b[11]=E,b[12]=y):y=b[12],b[13]!==_?(v=(0,n.jsx)(ei.default,{slug:_,delay:(s.INIT_DELAY+4*s.ANIMATION_DELAY)*1e3}),b[13]=_,b[14]=v):v=b[14],b[15]===Symbol.for("react.memo_cache_sentinel")?(x=(0,n.jsx)(eo.ScrollTopButton,{delay:s.INIT_DELAY+5*s.ANIMATION_DELAY}),b[15]=x):x=b[15],b[16]!==u||b[17]!==g||b[18]!==p||b[19]!==y||b[20]!==v?(w=(0,n.jsxs)(a.motion.div,{className:"relative flex w-[200px] shrink-0 flex-col items-start gap-4 self-start max-sm:hidden",style:u,children:[g,p,y,v,x]}),b[16]=u,b[17]=g,b[18]=p,b[19]=y,b[20]=v,b[21]=w):w=b[21],w}function eu(e){let t,r,c,u,d,f,m,h,g,p,y,v=(0,i.c)(28),{markdown:x,title:w,tags:b,date:N,summary:O,cover:E,slug:_}=e,{maxSM:S}=(0,o.useSize)(),{content:T,toc:I,loading:j}=(0,l.useMarkdownRender)(x);if(j){let e;return v[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)("div",{className:"text-secondary flex h-full items-center justify-center text-sm",children:"æ¸²æŸ“ä¸­..."}),v[0]=e):e=v[0],e}return v[1]===Symbol.for("react.memo_cache_sentinel")?(t={opacity:0},r={opacity:1},c={delay:s.INIT_DELAY},v[1]=t,v[2]=r,v[3]=c):(t=v[1],r=v[2],c=v[3]),v[4]!==w?(u=(0,n.jsx)("div",{className:"text-center text-2xl font-semibold",children:w}),v[4]=w,v[5]=u):u=v[5],v[6]!==b?(d=b.map(ed),v[6]=b,v[7]=d):d=v[7],v[8]!==d?(f=(0,n.jsx)("div",{className:"text-secondary mt-4 flex flex-wrap items-center justify-center gap-3 px-8 text-center text-sm",children:d}),v[8]=d,v[9]=f):f=v[9],v[10]!==N?(m=(0,n.jsx)("div",{className:"text-secondary mt-3 text-center text-sm",children:N}),v[10]=N,v[11]=m):m=v[11],v[12]!==T?(h=(0,n.jsx)("div",{className:"prose mt-6 max-w-none cursor-text",children:T}),v[12]=T,v[13]=h):h=v[13],v[14]!==u||v[15]!==f||v[16]!==m||v[17]!==h?(g=(0,n.jsx)(a.motion.article,{initial:t,animate:r,transition:c,className:"card bg-article static flex-1 overflow-auto rounded-xl p-8",children:(0,n.jsxs)("div",{children:[u,f,m,h]})}),v[14]=u,v[15]=f,v[16]=m,v[17]=h,v[18]=g):g=v[18],v[19]!==E||v[20]!==S||v[21]!==_||v[22]!==O||v[23]!==I?(p=!S&&(0,n.jsx)(ec,{cover:E,summary:O,toc:I,slug:_}),v[19]=E,v[20]=S,v[21]=_,v[22]=O,v[23]=I,v[24]=p):p=v[24],v[25]!==p||v[26]!==g?(y=(0,n.jsxs)("div",{className:"mx-auto flex max-w-[1140px] justify-center gap-6 px-6 pt-28 pb-12 max-sm:px-0",children:[g,p]}),v[25]=p,v[26]=g,v[27]=y):y=v[27],y}function ed(e){return(0,n.jsxs)("span",{children:["#",e]},e)}e.s(["BlogPreview",()=>eu],64169)},70305,(e,t,r)=>{"use strict";var n=e.r(35311),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=n.useState,s=n.useEffect,l=n.useLayoutEffect,o=n.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!i(e,r)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=a({inst:{value:r,getSnapshot:t}}),i=n[0].inst,u=n[1];return l(function(){i.value=r,i.getSnapshot=t,c(i)&&u({inst:i})},[e,r,t]),s(function(){return c(i)&&u({inst:i}),e(function(){c(i)&&u({inst:i})})},[e]),o(r),r};r.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:u},34960,(e,t,r)=>{"use strict";t.exports=e.r(70305)},55926,e=>{"use strict";let t;var r=e.i(35311),n=e.i(34960);e.s(["ERROR_REVALIDATE_EVENT",()=>3,"FOCUS_EVENT",()=>0,"MUTATE_EVENT",()=>2,"RECONNECT_EVENT",()=>1],89601);var i=Object.prototype.hasOwnProperty;let a=new WeakMap,s=()=>{},l=s(),o=Object,c=e=>e===l,u=(e,t)=>({...e,...t}),d={},f={},m="undefined",h=typeof window!=m,g=typeof document!=m,p=h&&"Deno"in window,y=(e,t)=>{let r=a.get(e);return[()=>!c(t)&&e.get(t)||d,n=>{if(!c(t)){let i=e.get(t);t in f||(f[t]=i),r[5](t,u(i,n),i||d)}},r[6],()=>!c(t)&&t in f?f[t]:!c(t)&&e.get(t)||d]},v=!0,[x,w]=h&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[s,s],b={initFocus:e=>(g&&document.addEventListener("visibilitychange",e),x("focus",e),()=>{g&&document.removeEventListener("visibilitychange",e),w("focus",e)}),initReconnect:e=>{let t=()=>{v=!0,e()},r=()=>{v=!1};return x("online",t),x("offline",r),()=>{w("online",t),w("offline",r)}}},N=!r.default.useId,O=!h||p,E=O?r.useEffect:r.useLayoutEffect,_="undefined"!=typeof navigator&&navigator.connection,S=!O&&_&&(["slow-2g","2g"].includes(_.effectiveType)||_.saveData),T=new WeakMap,I=(e,t)=>e===`[object ${t}]`,j=0,$=e=>{let t,r,n=typeof e,i=o.prototype.toString.call(e),a=I(i,"Date"),s=I(i,"RegExp"),l=I(i,"Object");if(o(e)!==e||a||s)t=a?e.toJSON():"symbol"==n?e.toString():"string"==n?JSON.stringify(e):""+e;else{if(t=T.get(e))return t;if(t=++j+"~",T.set(e,t),Array.isArray(e)){for(r=0,t="@";r<e.length;r++)t+=$(e[r])+",";T.set(e,t)}if(l){t="#";let n=o.keys(e).sort();for(;!c(r=n.pop());)c(e[r])||(t+=r+":"+$(e[r])+",");T.set(e,t)}}return t},C=e=>{if("function"==typeof e)try{e=e()}catch(t){e=""}let t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?$(e):"",t]},R=0,D=()=>++R;async function k(...e){let[t,r,n,i]=e,s=u({populateCache:!0,throwOnError:!0},"boolean"==typeof i?{revalidate:i}:i||{}),o=s.populateCache,d=s.rollbackOnError,f=s.optimisticData,m=s.throwOnError;if("function"==typeof r){let e=[];for(let n of t.keys())!/^\$(inf|sub)\$/.test(n)&&r(t.get(n)._k)&&e.push(n);return Promise.all(e.map(h))}return h(r);async function h(r){let i,[u]=C(r);if(!u)return;let[h,g]=y(t,u),[p,v,x,w]=a.get(t),b=()=>{let e=p[u];return("function"==typeof s.revalidate?s.revalidate(h().data,r):!1!==s.revalidate)&&(delete x[u],delete w[u],e&&e[0])?e[0](2).then(()=>h().data):h().data};if(e.length<3)return b();let N=n,O=!1,E=D();v[u]=[E,0];let _=!c(f),S=h(),T=S.data,I=S._c,j=c(I)?T:I;if(_&&g({data:f="function"==typeof f?f(j,T):f,_c:j}),"function"==typeof N)try{N=N(j)}catch(e){i=e,O=!0}if(N&&"function"==typeof N.then){let e;if(N=await N.catch(e=>{i=e,O=!0}),E!==v[u][0]){if(O)throw i;return N}O&&_&&(e=i,"function"==typeof d?d(e):!1!==d)&&(o=!0,g({data:j,_c:l}))}if(o&&!O&&("function"==typeof o?g({data:o(N,j),error:l,_c:l}):g({data:N,error:l,_c:l})),v[u][1]=D(),Promise.resolve(b()).then(()=>{g({_c:l})}),O){if(m)throw i;return}return N}}let M=(e,t)=>{for(let r in e)e[r][0]&&e[r][0](t)},A=(e,t)=>{if(!a.has(e)){let r=u(b,t),n=Object.create(null),i=k.bind(l,e),o=s,c=Object.create(null),d=(e,t)=>{let r=c[e]||[];return c[e]=r,r.push(t),()=>r.splice(r.indexOf(t),1)},f=(t,r,n)=>{e.set(t,r);let i=c[t];if(i)for(let e of i)e(r,n)},m=()=>{if(!a.has(e)&&(a.set(e,[n,Object.create(null),Object.create(null),Object.create(null),i,f,d]),!O)){let t=r.initFocus(setTimeout.bind(l,M.bind(l,n,0))),i=r.initReconnect(setTimeout.bind(l,M.bind(l,n,1)));o=()=>{t&&t(),i&&i(),a.delete(e)}}};return m(),[e,i,m,o]}return[e,a.get(e)[4]]},[L,B]=A(new Map),G=u({onLoadingSlow:s,onSuccess:s,onError:s,onErrorRetry:(e,t,r,n,i)=>{let a=r.errorRetryCount,s=i.retryCount,l=~~((Math.random()+.5)*(1<<(s<8?s:8)))*r.errorRetryInterval;(c(a)||!(s>a))&&setTimeout(n,l,i)},onDiscarded:s,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:S?1e4:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:S?5e3:3e3,compare:function e(t,r){var n,a;if(t===r)return!0;if(t&&r&&(n=t.constructor)===r.constructor){if(n===Date)return t.getTime()===r.getTime();if(n===RegExp)return t.toString()===r.toString();if(n===Array){if((a=t.length)===r.length)for(;a--&&e(t[a],r[a]););return -1===a}if(!n||"object"==typeof t){for(n in a=0,t)if(i.call(t,n)&&++a&&!i.call(r,n)||!(n in r)||!e(t[n],r[n]))return!1;return Object.keys(r).length===a}}return t!=t&&r!=r},isPaused:()=>!1,cache:L,mutate:B,fallback:{}},{isOnline:()=>v,isVisible:()=>{let e=g&&document.visibilityState;return c(e)||"hidden"!==e}}),F=(e,t)=>{let r=u(e,t);if(t){let{use:n,fallback:i}=e,{use:a,fallback:s}=t;n&&a&&(r.use=n.concat(a)),i&&s&&(r.fallback=u(i,s))}return r},U=(0,r.createContext)({});var H=e.i(89601);let W=h&&window.__SWR_DEVTOOLS_USE__,P=(W?window.__SWR_DEVTOOLS_USE__:[]).concat(e=>(t,r,n)=>{let i=r&&((...e)=>{let[n]=C(t),[,,,i]=a.get(L);if(n.startsWith("$inf$"))return r(...e);let s=i[n];return c(s)?r(...e):(delete i[n],s)});return e(t,i,n)});W&&(window.__SWR_DEVTOOLS_REACT__=r.default);let V=()=>{},Y=V(),z=(new WeakMap,r.default.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}})),J={dedupe:!0},K=Promise.resolve(l);o.defineProperty(e=>{let{value:t}=e,n=(0,r.useContext)(U),i="function"==typeof t,a=(0,r.useMemo)(()=>i?t(n):t,[i,n,t]),s=(0,r.useMemo)(()=>i?a:F(n,a),[i,n,a]),o=a&&a.provider,c=(0,r.useRef)(l);o&&!c.current&&(c.current=A(o(s.cache||L),a));let d=c.current;return d&&(s.cache=d[0],s.mutate=d[1]),E(()=>{if(d)return d[2]&&d[2](),d[3]},[]),(0,r.createElement)(U.Provider,u(e,{value:s}))},"defaultValue",{value:G});let q=(t=(e,t,i)=>{let{cache:s,compare:o,suspense:d,fallbackData:f,revalidateOnMount:g,revalidateIfStale:p,refreshInterval:v,refreshWhenHidden:x,refreshWhenOffline:w,keepPreviousData:b}=i,[_,S,T,I]=a.get(s),[j,$]=C(e),R=(0,r.useRef)(!1),M=(0,r.useRef)(!1),A=(0,r.useRef)(j),L=(0,r.useRef)(t),B=(0,r.useRef)(i),G=()=>B.current.isVisible()&&B.current.isOnline(),[F,U,W,P]=y(s,j),V=(0,r.useRef)({}).current,Y=c(f)?c(i.fallback)?l:i.fallback[j]:f,q=(e,t)=>{for(let r in V)if("data"===r){if(!o(e[r],t[r])&&(!c(e[r])||!o(ea,t[r])))return!1}else if(t[r]!==e[r])return!1;return!0},X=(0,r.useMemo)(()=>{let e=!!j&&!!t&&(c(g)?!B.current.isPaused()&&!d&&!1!==p:g),r=t=>{let r=u(t);return(delete r._k,e)?{isValidating:!0,isLoading:!0,...r}:r},n=F(),i=P(),a=r(n),s=n===i?a:r(i),l=a;return[()=>{let e=r(F());return q(e,l)?(l.data=e.data,l.isLoading=e.isLoading,l.isValidating=e.isValidating,l.error=e.error,l):(l=e,e)},()=>s]},[s,j]),Z=(0,n.useSyncExternalStore)((0,r.useCallback)(e=>W(j,(t,r)=>{q(r,t)||e()}),[s,j]),X[0],X[1]),Q=!R.current,ee=_[j]&&_[j].length>0,et=Z.data,er=c(et)?Y&&"function"==typeof Y.then?z(Y):Y:et,en=Z.error,ei=(0,r.useRef)(er),ea=b?c(et)?c(ei.current)?er:ei.current:et:er,es=(!ee||!!c(en))&&(Q&&!c(g)?g:!B.current.isPaused()&&(d?!c(er)&&p:c(er)||p)),el=!!(j&&t&&Q&&es),eo=c(Z.isValidating)?el:Z.isValidating,ec=c(Z.isLoading)?el:Z.isLoading,eu=(0,r.useCallback)(async e=>{let t,r,n=L.current;if(!j||!n||M.current||B.current.isPaused())return!1;let a=!0,s=e||{},u=!T[j]||!s.dedupe,d=()=>N?!M.current&&j===A.current&&R.current:j===A.current,f={isValidating:!1,isLoading:!1},m=()=>{U(f)},h=()=>{let e=T[j];e&&e[1]===r&&delete T[j]},g={isValidating:!0};c(F().data)&&(g.isLoading=!0);try{if(u&&(U(g),i.loadingTimeout&&c(F().data)&&setTimeout(()=>{a&&d()&&B.current.onLoadingSlow(j,i)},i.loadingTimeout),T[j]=[n($),D()]),[t,r]=T[j],t=await t,u&&setTimeout(h,i.dedupingInterval),!T[j]||T[j][1]!==r)return u&&d()&&B.current.onDiscarded(j),!1;f.error=l;let e=S[j];if(!c(e)&&(r<=e[0]||r<=e[1]||0===e[1]))return m(),u&&d()&&B.current.onDiscarded(j),!1;let s=F().data;f.data=o(s,t)?s:t,u&&d()&&B.current.onSuccess(t,j,i)}catch(r){h();let e=B.current,{shouldRetryOnError:t}=e;!e.isPaused()&&(f.error=r,u&&d())&&(e.onError(r,j,e),(!0===t||"function"==typeof t&&t(r))&&(!B.current.revalidateOnFocus||!B.current.revalidateOnReconnect||G())&&e.onErrorRetry(r,j,e,e=>{let t=_[j];t&&t[0]&&t[0](H.ERROR_REVALIDATE_EVENT,e)},{retryCount:(s.retryCount||0)+1,dedupe:!0}))}return a=!1,m(),!0},[j,s]),ed=(0,r.useCallback)((...e)=>k(s,A.current,...e),[]);if(E(()=>{L.current=t,B.current=i,c(et)||(ei.current=et)}),E(()=>{var e;let t;if(!j)return;let r=eu.bind(l,J),n=0;B.current.revalidateOnFocus&&(n=Date.now()+B.current.focusThrottleInterval);let i=(e=(e,t={})=>{if(e==H.FOCUS_EVENT){let e=Date.now();B.current.revalidateOnFocus&&e>n&&G()&&(n=e+B.current.focusThrottleInterval,r())}else if(e==H.RECONNECT_EVENT)B.current.revalidateOnReconnect&&G()&&r();else if(e==H.MUTATE_EVENT)return eu();else if(e==H.ERROR_REVALIDATE_EVENT)return eu(t)},(t=_[j]||(_[j]=[])).push(e),()=>{let r=t.indexOf(e);r>=0&&(t[r]=t[t.length-1],t.pop())});if(M.current=!1,A.current=j,R.current=!0,U({_k:$}),es&&!T[j])if(c(er)||O)r();else h&&typeof window.requestAnimationFrame!=m?window.requestAnimationFrame(r):setTimeout(r,1);return()=>{M.current=!0,i()}},[j]),E(()=>{let e;function t(){let t="function"==typeof v?v(F().data):v;t&&-1!==e&&(e=setTimeout(r,t))}function r(){!F().error&&(x||B.current.isVisible())&&(w||B.current.isOnline())?eu(J).then(t):t()}return t(),()=>{e&&(clearTimeout(e),e=-1)}},[v,x,w,j]),(0,r.useDebugValue)(ea),d){let e=j&&c(er);if(!N&&O&&e)throw Error("Fallback data is required when using Suspense in SSR.");e&&(L.current=t,B.current=i,M.current=!1);let r=I[j];if(z(!c(r)&&e?ed(r):K),!c(en)&&e)throw en;let n=e?eu(J):K;!c(ea)&&e&&(n.status="fulfilled",n.value=!0),z(n)}return{mutate:ed,get data(){return V.data=!0,ea},get error(){return V.error=!0,en},get isValidating(){return V.isValidating=!0,eo},get isLoading(){return V.isLoading=!0,ec}}},function(...e){let n,i=(n=(0,r.useContext)(U),(0,r.useMemo)(()=>u(G,n),[n])),[a,s,l]="function"==typeof e[1]?[e[0],e[1],e[2]||{}]:[e[0],null,(null===e[1]?e[2]:e[1])||{}],o=F(i,l),c=t,{use:d}=o,f=(d||[]).concat(P);for(let e=f.length;e--;)c=f[e](c);return c(a,s||o.fetcher||null,o)});e.s(["default",()=>q],55926)},86266,e=>{"use strict";let t=(0,e.i(22436).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>t],86266)},43026,e=>{"use strict";var t=e.i(37572);async function r(e,r,n,i,a){let s=[];try{let i=await (0,t.readTextFileFromRepo)(e,r,n,"public/blogs/index.json",a);i&&(s=JSON.parse(i))}catch{}let l=new Map(s.map(e=>[e.slug,e]));return l.set(i.slug,i),JSON.stringify(Array.from(l.values()).sort((e,t)=>(t.date||"").localeCompare(e.date||"")),null,2)}async function n(e,r,n,i,a){let s=[];try{let i=await (0,t.readTextFileFromRepo)(e,r,n,"public/blogs/index.json",a);i&&(s=JSON.parse(i))}catch{}let l=new Set(i.filter(Boolean));return 0===l.size?JSON.stringify(s,null,2):JSON.stringify(s.filter(e=>!l.has(e.slug)),null,2)}async function i(e,t,r,i,a){return n(e,t,r,[i],a)}e.s(["prepareBlogsIndex",()=>r,"removeBlogFromIndex",()=>i,"removeBlogsFromIndex",()=>n])},13376,92996,82051,32058,43765,94121,e=>{"use strict";var t=e.i(10586),r=e.i(95403),n=e.i(97005),i=e.i(78363);let a={slug:"",title:"",md:"",tags:[],date:new Date().toISOString().slice(0,10),summary:""},s=(0,t.create)((e,t)=>({mode:"create",originalSlug:null,setMode:(t,r)=>e({mode:t,originalSlug:r||null}),form:{...a},updateForm:t=>e(e=>({form:{...e.form,...t}})),setForm:t=>e({form:t}),images:[],addUrlImage:n=>{let{images:i}=t();if(i.some(e=>"url"===e.type&&e.url===n))return void r.toast.info("è¯¥å›¾ç‰‡å·²åœ¨åˆ—è¡¨ä¸­");let a=Math.random().toString(36).slice(2,10);e(e=>({images:[{id:a,type:"url",url:n},...e.images]}))},addFiles:async i=>{let{images:a}=t(),s=Array.from(i).filter(e=>e.type.startsWith("image/"));if(0===s.length)return[];let l=new Map(a.filter(e=>"file"===e.type&&e.hash).map(e=>[e.hash,e])),o=await Promise.all(s.map(async e=>{let t=await (0,n.hashFileSHA256)(e);return{file:e,hash:t}})),c=new Set,u=o.filter(({hash:e})=>!(l.has(e)||c.has(e))&&(c.add(e),!0)),d=[];for(let{hash:e}of o)l.has(e)&&d.push(l.get(e));if(u.length>0){let t=u.map(({file:e,hash:t})=>{let r=Math.random().toString(36).slice(2,10),n=URL.createObjectURL(e),i=e.name;return{id:r,type:"file",file:e,previewUrl:n,filename:i,hash:t}});e(e=>({images:[...t,...e.images]})),d.push(...t)}else 0===d.length&&r.toast.info("å›¾ç‰‡å·²å­˜åœ¨ï¼Œä¸é‡å¤æ·»åŠ ");return d},deleteImage:t=>e(r=>{for(let n of r.images)"file"===n.type&&n.id===t&&(URL.revokeObjectURL(n.previewUrl),n.id===r.cover?.id&&e({cover:null}));return{images:r.images.filter(e=>e.id!==t)}}),cover:null,setCover:t=>e({cover:t}),loading:!1,setLoading:t=>e({loading:t}),loadBlogForEdit:async t=>{try{let n;e({loading:!0});let a=await (0,i.loadBlog)(t),s=[],l=/!\[.*?\]\((.*?)\)/g;for(;null!==(n=l.exec(a.markdown));){let e=n[1];if(e&&e!==a.cover&&!e.startsWith("local-image:")&&!s.some(t=>"url"===t.type&&t.url===e)){let t=Math.random().toString(36).slice(2,10);s.push({id:t,type:"url",url:e})}}let o=null;a.cover&&(o={id:Math.random().toString(36).slice(2,10),type:"url",url:a.cover}),e({mode:"edit",originalSlug:t,form:{slug:t,title:a.config.title||"",md:a.markdown,tags:a.config.tags||[],date:a.config.date||new Date().toISOString().slice(0,10),summary:a.config.summary||""},images:s,cover:o,loading:!1}),r.toast.success("åšå®¢åŠ è½½æˆåŠŸ")}catch(t){throw console.error("Failed to load blog:",t),r.toast.error(t?.message||"åŠ è½½åšå®¢å¤±è´¥"),e({loading:!1}),t}},reset:()=>{let{images:r,cover:n}=t();for(let e of r)"file"===e.type&&URL.revokeObjectURL(e.previewUrl);n?.type==="file"&&URL.revokeObjectURL(n.previewUrl),e({mode:"create",originalSlug:null,form:{...a,date:new Date().toISOString().slice(0,10)},images:[],cover:null})}}));e.s(["useWriteStore",0,s],13376);let l=(0,t.create)(e=>({isPreview:!1,openPreview:()=>e({isPreview:!0}),closePreview:()=>e({isPreview:!1}),togglePreview:()=>e(e=>({isPreview:!e.isPreview}))}));e.s(["usePreviewStore",0,l],92996);var o=e.i(58190),c=e.i(52434),u=e.i(7281),d=e.i(63580),f=e.i(35311);let m="text";function h(){let e,t,r,n,i,a,l,h,y,v,x,w,b,N,O=(0,c.c)(33),{form:E,updateForm:_,addFiles:S}=s(),T=(0,f.useRef)(null);O[0]!==_?(e=e=>{let t=T.current;if(t&&(t.focus(),!document.execCommand("insertText",!1,e))){let{selectionStart:r,selectionEnd:n,value:i}=t;_({md:i.substring(0,r)+e+i.substring(n)}),setTimeout(()=>{t.setSelectionRange(r+e.length,r+e.length),t.focus()},0)}},O[0]=_,O[1]=e):e=O[1];let I=e;O[2]!==I?(t=e=>{let t=T.current;if(!t)return;let{selectionStart:r,selectionEnd:n,value:i}=t,a=i.substring(r,n);if((e.ctrlKey||e.metaKey)&&"b"===e.key){e.preventDefault();let s=i.substring(0,r),l=i.substring(n);if(s.endsWith("**")&&l.startsWith("**")&&a)t.setSelectionRange(r-2,n+2),I(a);else{let e=a||m;I(`**${e}**`),a||setTimeout(()=>{t.setSelectionRange(r+2,r+2+m.length)},0)}return}if((e.ctrlKey||e.metaKey)&&"i"===e.key){e.preventDefault();let s=i.substring(0,r),l=i.substring(n);if(s.endsWith("*")&&l.startsWith("*")&&!(s.endsWith("**")&&l.startsWith("**"))&&a)t.setSelectionRange(r-1,n+1),I(a);else{let e=a||m;I(`*${e}*`),a||setTimeout(()=>{t.setSelectionRange(r+1,r+1+m.length)},0)}return}if((e.ctrlKey||e.metaKey)&&"k"===e.key){e.preventDefault();let n=a||m;I(`[${n}](url)`),setTimeout(()=>{let e=r+n.length+3;t.setSelectionRange(e,e+3)},0);return}if("Tab"===e.key&&!e.shiftKey){e.preventDefault(),I("	");return}if("Tab"===e.key&&e.shiftKey){e.preventDefault();let n=i.lastIndexOf("\n",r-1)+1,a=i.substring(n,i.indexOf("\n",r));a.startsWith("	")?(t.setSelectionRange(n,n+1),I("")):a.startsWith("  ")&&(t.setSelectionRange(n,n+2),I(""));return}},O[2]=I,O[3]=t):t=O[3];let j=t;O[4]!==S||O[5]!==I?(r=async e=>{let t=e.clipboardData.items;if(!t)return;let r=[];for(let e=0;e<t.length;e++){let n=t[e];if(n.type.startsWith("image/")){let e=n.getAsFile();e&&r.push(e)}}if(r.length>0){e.preventDefault();let t=await S(r).catch(p);t&&t.length>0&&I(t.map(g).join("\n"))}},O[4]=S,O[5]=I,O[6]=r):r=O[6];let $=r;return O[7]===Symbol.for("react.memo_cache_sentinel")?(n={opacity:0,scale:.8},i={opacity:1,scale:1},a={delay:d.INIT_DELAY},O[7]=n,O[8]=i,O[9]=a):(n=O[7],i=O[8],a=O[9]),O[10]!==_?(l=e=>_({title:e.target.value}),O[10]=_,O[11]=l):l=O[11],O[12]!==E.title||O[13]!==l?(h=(0,o.jsx)("input",{type:"text",placeholder:"æ ‡é¢˜",className:"flex-1 rounded-lg border bg-white/60 px-3 py-2 text-sm",value:E.title,onChange:l}),O[12]=E.title,O[13]=l,O[14]=h):h=O[14],O[15]!==_?(y=e=>_({slug:e.target.value}),O[15]=_,O[16]=y):y=O[16],O[17]!==E.slug||O[18]!==y?(v=(0,o.jsx)("input",{type:"text",placeholder:"slugï¼ˆxx-xxï¼‰",className:"w-[200px] rounded-lg border bg-white/60 px-3 py-2 text-sm",value:E.slug,onChange:y}),O[17]=E.slug,O[18]=y,O[19]=v):v=O[19],O[20]!==h||O[21]!==v?(x=(0,o.jsxs)("div",{className:"mb-3 flex gap-3",children:[h,v]}),O[20]=h,O[21]=v,O[22]=x):x=O[22],O[23]!==_?(w=e=>_({md:e.target.value}),O[23]=_,O[24]=w):w=O[24],O[25]!==E.md||O[26]!==j||O[27]!==$||O[28]!==w?(b=(0,o.jsx)("textarea",{ref:T,placeholder:"Markdown å†…å®¹",className:"h-[650px] w-full flex-1 resize-none rounded-xl border bg-white/60 p-4 text-sm",value:E.md,onChange:w,onKeyDown:j,onPaste:$}),O[25]=E.md,O[26]=j,O[27]=$,O[28]=w,O[29]=b):b=O[29],O[30]!==x||O[31]!==b?(N=(0,o.jsxs)(u.motion.div,{initial:n,animate:i,transition:a,className:"flex min-h-[800px] w-[800px] flex-col rounded-[40px] border bg-white/60 p-6 shadow",children:[x,b]}),O[30]=x,O[31]=b,O[32]=N):N=O[32],N}function g(e){return"url"===e.type?`![](${e.url})`:`![](local-image:${e.id})`}function p(){return[]}function y(e){let t,n,i,a,l,d,m,h,g,p,y,w=(0,c.c)(24),{delay:b}=e,N=void 0===b?0:b,{images:O,setCover:E,cover:_,addFiles:S}=s(),T=(0,f.useRef)(null),I=_?"url"===_.type?_.url:_.previewUrl:null;w[0]!==S||w[1]!==O||w[2]!==E?(t=async e=>{e.preventDefault();let t=e.dataTransfer.getData("text/markdown")||e.dataTransfer.getData("text/plain")||"",n=/!\[\]\(([^)]+)\)/.exec(t.trim());if(n){let e,t=n[1];if(t.startsWith("local-image:")){let r=t.replace(/^local-image:/,"");e=O.find(e=>e.id===r)}else e=O.find(e=>"url"===e.type&&e.url===t);if(e){E(e),r.toast.success("å·²è®¾ç½®å°é¢");return}}let i=e.dataTransfer.files;if(i&&i.length>0){let e=Array.from(i).filter(x);if(0===e.length)return void r.toast.error("è¯·æ‹–å…¥å›¾ç‰‡æ–‡ä»¶");let t=await S(e);return void(t&&t.length>0&&(E(t[0]),r.toast.success("å·²è®¾ç½®å°é¢")))}},w[0]=S,w[1]=O,w[2]=E,w[3]=t):t=w[3];let j=t;w[4]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{T.current?.click()},w[4]=n):n=w[4];let $=n;w[5]!==S||w[6]!==E?(i=async e=>{let t=e.target.files;if(!t||0===t.length)return;let n=await S(t);n&&n.length>0&&(E(n[0]),r.toast.success("å·²è®¾ç½®å°é¢")),e.target.value=""},w[5]=S,w[6]=E,w[7]=i):i=w[7];let C=i;return w[8]===Symbol.for("react.memo_cache_sentinel")?(a={opacity:0,scale:.8},l={opacity:1,scale:1},w[8]=a,w[9]=l):(a=w[8],l=w[9]),w[10]!==N?(d={delay:N},w[10]=N,w[11]=d):d=w[11],w[12]===Symbol.for("react.memo_cache_sentinel")?(m=(0,o.jsx)("h2",{className:"text-sm",children:"å°é¢"}),w[12]=m):m=w[12],w[13]!==C?(h=(0,o.jsx)("input",{ref:T,type:"file",accept:"image/*",className:"hidden",onChange:C}),w[13]=C,w[14]=h):h=w[14],w[15]!==I?(g=I?(0,o.jsx)("img",{src:I,alt:"cover preview",className:"h-full w-full rounded-2xl object-cover"}):(0,o.jsx)("div",{className:"grid h-full w-full cursor-pointer place-items-center transition-colors hover:bg-white/60",onClick:$,children:(0,o.jsx)("span",{className:"text-3xl leading-none text-neutral-400",children:"+"})}),w[15]=I,w[16]=g):g=w[16],w[17]!==j||w[18]!==g?(p=(0,o.jsx)("div",{className:"mt-3 h-[150px] overflow-hidden rounded-xl border bg-white/60",onDragOver:v,onDrop:j,children:g}),w[17]=j,w[18]=g,w[19]=p):p=w[19],w[20]!==p||w[21]!==d||w[22]!==h?(y=(0,o.jsxs)(u.motion.div,{initial:a,animate:l,transition:d,className:"card relative",children:[m,h,p]}),w[20]=p,w[21]=d,w[22]=h,w[23]=y):y=w[23],y}function v(e){e.preventDefault()}function x(e){return e.type.startsWith("image/")}function w(e){let t,r,n,i,a,s,l,u=(0,c.c)(19),{tags:d,onChange:m}=e,[h,g]=(0,f.useState)("");u[0]!==m||u[1]!==h||u[2]!==d?(t=()=>{h.trim()&&!d.includes(h.trim())&&(m([...d,h.trim()]),g(""))},u[0]=m,u[1]=h,u[2]=d,u[3]=t):t=u[3];let p=t;u[4]!==m||u[5]!==d?(r=e=>{m(d.filter((t,r)=>r!==e))},u[4]=m,u[5]=d,u[6]=r):r=u[6];let y=r;return u[7]!==y||u[8]!==d?(n=d.length>0&&(0,o.jsx)("div",{className:"mb-2 flex flex-wrap gap-2",children:d.map((e,t)=>(0,o.jsxs)("span",{className:"flex items-center gap-1.5 rounded-md bg-blue-100 px-2 py-1 text-sm text-blue-700",children:["#",e,(0,o.jsx)("button",{type:"button",onClick:()=>y(t),className:"text-secondary",children:"Ã—"})]},t))}),u[7]=y,u[8]=d,u[9]=n):n=u[9],u[10]===Symbol.for("react.memo_cache_sentinel")?(i=e=>g(e.target.value),u[10]=i):i=u[10],u[11]!==p?(a=e=>{"Enter"===e.key&&(e.preventDefault(),p())},u[11]=p,u[12]=a):a=u[12],u[13]!==a||u[14]!==h?(s=(0,o.jsx)("input",{type:"text",placeholder:"æ·»åŠ æ ‡ç­¾ï¼ˆæŒ‰å›žè½¦ï¼‰",className:"w-full bg-transparent text-sm outline-none",value:h,onChange:i,onKeyDown:a}),u[13]=a,u[14]=h,u[15]=s):s=u[15],u[16]!==n||u[17]!==s?(l=(0,o.jsxs)("div",{className:"w-full rounded-lg border bg-white/70 px-3 py-2",children:[n,s]}),u[16]=n,u[17]=s,u[18]=l):l=u[18],l}function b(e){let t,r,n,i,a,l,d,f,m,h,g,p,y=(0,c.c)(27),{delay:v}=e,x=void 0===v?0:v,{form:b,updateForm:N}=s();return y[0]===Symbol.for("react.memo_cache_sentinel")?(t={opacity:0,scale:.8},r={opacity:1,scale:1},y[0]=t,y[1]=r):(t=y[0],r=y[1]),y[2]!==x?(n={delay:x},y[2]=x,y[3]=n):n=y[3],y[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,o.jsx)("h2",{className:"text-sm",children:"å…ƒä¿¡æ¯"}),y[4]=i):i=y[4],y[5]!==N?(a=e=>N({summary:e.target.value}),y[5]=N,y[6]=a):a=y[6],y[7]!==b.summary||y[8]!==a?(l=(0,o.jsx)("textarea",{placeholder:"ä¸ºè¿™ç¯‡æ–‡ç« å†™ä¸€æ®µç®€çŸ­æ‘˜è¦",rows:2,className:"block w-full resize-none rounded-xl border bg-white/60 p-3 text-sm",value:b.summary,onChange:a}),y[7]=b.summary,y[8]=a,y[9]=l):l=y[9],y[10]!==N?(d=e=>N({tags:e}),y[10]=N,y[11]=d):d=y[11],y[12]!==b.tags||y[13]!==d?(f=(0,o.jsx)(w,{tags:b.tags,onChange:d}),y[12]=b.tags,y[13]=d,y[14]=f):f=y[14],y[15]!==N?(m=e=>N({date:e.target.value}),y[15]=N,y[16]=m):m=y[16],y[17]!==b.date||y[18]!==m?(h=(0,o.jsx)("input",{type:"date",placeholder:"æ—¥æœŸ",className:"w-full rounded-lg border bg-white/60 px-3 py-2 text-sm",value:b.date,onChange:m}),y[17]=b.date,y[18]=m,y[19]=h):h=y[19],y[20]!==h||y[21]!==l||y[22]!==f?(g=(0,o.jsxs)("div",{className:"mt-3 space-y-2",children:[l,f,h]}),y[20]=h,y[21]=l,y[22]=f,y[23]=g):g=y[23],y[24]!==g||y[25]!==n?(p=(0,o.jsxs)(u.motion.div,{initial:t,animate:r,transition:n,className:"card relative",children:[i,g]}),y[24]=g,y[25]=n,y[26]=p):p=y[26],p}e.s(["WriteEditor",()=>h],82051);var N=e.i(86087);function O(e){let t,r,n,i,a,l,d,m,h,g,p,y,v,x,w,b,O=(0,c.c)(37),{delay:_}=e,S=void 0===_?0:_,{images:T,cover:I,addUrlImage:j,addFiles:$,deleteImage:C}=s(),[R,D]=(0,f.useState)(""),k=(0,f.useRef)(null),M=I?.id??null;if(O[0]===Symbol.for("react.memo_cache_sentinel")?(t={opacity:0,scale:.8},r={opacity:1,scale:1},O[0]=t,O[1]=r):(t=O[0],r=O[1]),O[2]!==S?(n={delay:S},O[2]=S,O[3]=n):n=O[3],O[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsx)("h2",{className:"text-sm",children:"å›¾ç‰‡ç®¡ç†"}),(0,o.jsx)(N.default,{href:"/image-toolbox",target:"_blank",className:"text-xs hover:underline",children:"åŽ‹ç¼©å·¥å…·"})]}),O[4]=i):i=O[4],O[5]===Symbol.for("react.memo_cache_sentinel")?(a=e=>D(e.target.value),O[5]=a):a=O[5],O[6]!==R?(l=(0,o.jsx)("input",{type:"text",placeholder:"https://...",className:"flex-1 rounded-lg border bg-white/70 px-3 py-2 text-sm",value:R,onChange:a}),O[6]=R,O[7]=l):l=O[7],O[8]!==j||O[9]!==R?(d=(0,o.jsx)("button",{className:"rounded-lg border bg-white/70 px-3 py-2 text-sm",onClick:()=>{let e=R.trim();e&&(j(e),D(""))},children:"æ·»åŠ "}),O[8]=j,O[9]=R,O[10]=d):d=O[10],O[11]!==l||O[12]!==d?(m=(0,o.jsxs)("div",{className:"mt-3 flex items-center gap-2",children:[l,d]}),O[11]=l,O[12]=d,O[13]=m):m=O[13],O[14]!==$?(h=(0,o.jsx)("input",{ref:k,type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:e=>{let t=e.target.files;t&&t.length>0&&$(t),e.currentTarget&&(e.currentTarget.value="")}}),O[14]=$,O[15]=h):h=O[15],O[16]===Symbol.for("react.memo_cache_sentinel")?(g=()=>k.current?.click(),O[16]=g):g=O[16],O[17]!==$?(p=e=>{e.preventDefault();let t=e.dataTransfer.files;t&&t.length&&$(t)},O[17]=$,O[18]=p):p=O[18],O[19]===Symbol.for("react.memo_cache_sentinel")?(y=(0,o.jsx)("span",{className:"text-2xl leading-none text-neutral-400",children:"+"}),O[19]=y):y=O[19],O[20]!==p?(v=(0,o.jsx)("div",{className:"group relative grid aspect-square cursor-pointer place-items-center rounded-lg border bg-white/50 hover:bg-white/70",onClick:g,onDragOver:E,onDrop:p,children:y}),O[20]=p,O[21]=v):v=O[21],O[22]!==M||O[23]!==C||O[24]!==T){let e;O[26]!==M||O[27]!==C?(e=e=>{let t="url"===e.type,r=t?e.url:e.previewUrl,n=t?`![](${e.url})`:`![](local-image:${e.id})`,i=M===e.id;return(0,o.jsxs)("div",{className:`group relative aspect-square overflow-hidden rounded-lg border bg-white/50 text-xs ${i?"ring-2 ring-blue-500":""}`,children:[(0,o.jsx)("img",{src:r,className:"h-full w-full object-cover",draggable:!0,onDragStart:e=>{e.dataTransfer.setData("text/plain",n),e.dataTransfer.setData("text/markdown",n)}}),i&&(0,o.jsx)("div",{className:"absolute top-1 left-1 rounded-md bg-blue-500 px-1.5 py-0.5 text-white shadow",children:"å°é¢"}),(0,o.jsx)("div",{className:"absolute top-1 right-1 hidden group-hover:flex",children:(0,o.jsx)("button",{type:"button",className:"rounded-md bg-white/80 px-1.5 py-0.5 shadow hover:bg-white",onClick:()=>C(e.id),children:"åˆ é™¤"})})]},e.id)},O[26]=M,O[27]=C,O[28]=e):e=O[28],x=T.map(e),O[22]=M,O[23]=C,O[24]=T,O[25]=x}else x=O[25];return O[29]!==v||O[30]!==x?(w=(0,o.jsxs)("div",{className:"mt-3 grid grid-cols-4 gap-2",children:[v,x]}),O[29]=v,O[30]=x,O[31]=w):w=O[31],O[32]!==h||O[33]!==w||O[34]!==n||O[35]!==m?(b=(0,o.jsxs)(u.motion.div,{initial:t,animate:r,transition:n,className:"card relative",children:[i,m,h,w]}),O[32]=h,O[33]=w,O[34]=n,O[35]=m,O[36]=b):b=O[36],b}function E(e){e.preventDefault()}function _(){let e,t=(0,c.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsxs)("div",{className:"w-[320px] space-y-6",children:[(0,o.jsx)(y,{delay:d.INIT_DELAY+0*d.ANIMATION_DELAY}),(0,o.jsx)(b,{delay:d.INIT_DELAY+ +d.ANIMATION_DELAY}),(0,o.jsx)(O,{delay:d.INIT_DELAY+2*d.ANIMATION_DELAY})]}),t[0]=e):e=t[0],e}e.s(["WriteSidebar",()=>_],32058);var S=e.i(37572),T=e.i(43026),I=e.i(86909),j=e.i(75157);async function $(e){let t,{form:i,cover:a,images:s,mode:l="create",originalSlug:o}=e;if(!i?.slug)throw Error("éœ€è¦ slug");if("edit"===l&&o&&o!==i.slug)throw Error("ç¼–è¾‘æ¨¡å¼ä¸‹ä¸æ”¯æŒä¿®æ”¹ slugï¼Œè¯·ä¿æŒåŽŸ slug ä¸å˜");let c=await (0,I.getAuthToken)();r.toast.info("æ­£åœ¨èŽ·å–åˆ†æ”¯ä¿¡æ¯...");let u=(await (0,S.getRef)(c,d.GITHUB_CONFIG.OWNER,d.GITHUB_CONFIG.REPO,`heads/${d.GITHUB_CONFIG.BRANCH}`)).sha,f=`public/blogs/${i.slug}`,m="edit"===l?`æ›´æ–°æ–‡ç« : ${i.slug}`:`æ–°å¢žæ–‡ç« : ${i.slug}`,h=[];for(let e of s||[])"file"===e.type&&h.push({img:e,id:e.id});a?.type==="file"&&h.push({img:a,id:a.id}),r.toast.info("æ­£åœ¨å‡†å¤‡æ–‡ä»¶...");let g=new Set,p=i.md,y=[];if(h.length>0)for(let{img:e,id:s}of(r.toast.info("æ­£åœ¨ä¸Šä¼ å›¾ç‰‡..."),h)){let r=e.hash||await (0,n.hashFileSHA256)(e.file),l=(0,j.getFileExt)(e.file.name),o=`${r}${l}`,u=`/blogs/${i.slug}/${o}`;if(!g.has(r)){let t=`${f}/${o}`,i=await (0,n.fileToBase64NoPrefix)(e.file),a=await (0,S.createBlob)(c,d.GITHUB_CONFIG.OWNER,d.GITHUB_CONFIG.REPO,i,"base64");y.push({path:t,mode:"100644",type:"blob",sha:a.sha}),g.add(r)}let m=`local-image:${s}`;p=p.split(`(${m})`).join(`(${u})`),a?.type==="file"&&a.id===s&&(t=u)}a?.type==="url"&&(t=a.url),r.toast.info("æ­£åœ¨åˆ›å»ºæ–‡ä»¶...");let v=await (0,S.createBlob)(c,d.GITHUB_CONFIG.OWNER,d.GITHUB_CONFIG.REPO,(0,S.toBase64Utf8)(p),"base64");y.push({path:`${f}/index.md`,mode:"100644",type:"blob",sha:v.sha});let x=i.date||new Date().toISOString().slice(0,10),w={title:i.title,tags:i.tags,date:x,summary:i.summary,cover:t},b=await (0,S.createBlob)(c,d.GITHUB_CONFIG.OWNER,d.GITHUB_CONFIG.REPO,(0,S.toBase64Utf8)(JSON.stringify(w,null,2)),"base64");y.push({path:`${f}/config.json`,mode:"100644",type:"blob",sha:b.sha});let N=await (0,T.prepareBlogsIndex)(c,d.GITHUB_CONFIG.OWNER,d.GITHUB_CONFIG.REPO,{slug:i.slug,title:i.title,tags:i.tags,date:x,summary:i.summary,cover:t},d.GITHUB_CONFIG.BRANCH),O=await (0,S.createBlob)(c,d.GITHUB_CONFIG.OWNER,d.GITHUB_CONFIG.REPO,(0,S.toBase64Utf8)(N),"base64");y.push({path:"public/blogs/index.json",mode:"100644",type:"blob",sha:O.sha}),r.toast.info("æ­£åœ¨åˆ›å»ºæ–‡ä»¶æ ‘...");let E=await (0,S.createTree)(c,d.GITHUB_CONFIG.OWNER,d.GITHUB_CONFIG.REPO,y,u);r.toast.info("æ­£åœ¨åˆ›å»ºæäº¤...");let _=await (0,S.createCommit)(c,d.GITHUB_CONFIG.OWNER,d.GITHUB_CONFIG.REPO,m,E.sha,[u]);r.toast.info("æ­£åœ¨æ›´æ–°åˆ†æ”¯..."),await (0,S.updateRef)(c,d.GITHUB_CONFIG.OWNER,d.GITHUB_CONFIG.REPO,`heads/${d.GITHUB_CONFIG.BRANCH}`,_.sha),r.toast.success("å‘å¸ƒæˆåŠŸï¼")}async function C(e){if(!e)throw Error("éœ€è¦ slug");let t=await (0,I.getAuthToken)();r.toast.info("æ­£åœ¨èŽ·å–åˆ†æ”¯ä¿¡æ¯...");let n=(await (0,S.getRef)(t,d.GITHUB_CONFIG.OWNER,d.GITHUB_CONFIG.REPO,`heads/${d.GITHUB_CONFIG.BRANCH}`)).sha,i=`public/blogs/${e}`;r.toast.info("æ­£åœ¨æ”¶é›†æ–‡ç« æ–‡ä»¶...");let a=await (0,S.listRepoFilesRecursive)(t,d.GITHUB_CONFIG.OWNER,d.GITHUB_CONFIG.REPO,i,d.GITHUB_CONFIG.BRANCH);if(0===a.length)throw Error("æ–‡ç« ä¸å­˜åœ¨æˆ–å·²åˆ é™¤");let s=a.map(e=>({path:e,mode:"100644",type:"blob",sha:null}));r.toast.info("æ­£åœ¨æ›´æ–°ç´¢å¼•...");let l=await (0,T.removeBlogFromIndex)(t,d.GITHUB_CONFIG.OWNER,d.GITHUB_CONFIG.REPO,e,d.GITHUB_CONFIG.BRANCH),o=await (0,S.createBlob)(t,d.GITHUB_CONFIG.OWNER,d.GITHUB_CONFIG.REPO,(0,S.toBase64Utf8)(l),"base64");s.push({path:"public/blogs/index.json",mode:"100644",type:"blob",sha:o.sha}),r.toast.info("æ­£åœ¨åˆ›å»ºæäº¤...");let c=await (0,S.createTree)(t,d.GITHUB_CONFIG.OWNER,d.GITHUB_CONFIG.REPO,s,n),u=await (0,S.createCommit)(t,d.GITHUB_CONFIG.OWNER,d.GITHUB_CONFIG.REPO,`åˆ é™¤æ–‡ç« : ${e}`,c.sha,[n]);r.toast.info("æ­£åœ¨æ›´æ–°åˆ†æ”¯..."),await (0,S.updateRef)(t,d.GITHUB_CONFIG.OWNER,d.GITHUB_CONFIG.REPO,`heads/${d.GITHUB_CONFIG.BRANCH}`,u.sha),r.toast.success("åˆ é™¤æˆåŠŸï¼è¯·ç­‰å¾…é¡µé¢éƒ¨ç½²åŽåˆ·æ–°")}var R=e.i(71436);function D(){let e,t,i,a,d,m,h,g,p,y,v,x,w,b,N,O,E=(0,c.c)(35),{loading:_,mode:S,form:T}=s(),{openPreview:I}=l(),{isAuth:j,onChoosePrivateKey:D,onPublish:k,onDelete:M}=function(){let{loading:e,setLoading:t,form:i,cover:a,images:l,mode:o,originalSlug:c}=s(),{isAuth:u,setPrivateKey:d}=(0,R.useAuthStore)(),m=(0,f.useCallback)(async e=>{d(await (0,n.readFileAsText)(e))},[d]),h=(0,f.useCallback)(async()=>{try{t(!0),await $({form:i,cover:a,images:l,mode:o,originalSlug:c});let e="edit"===o?"æ›´æ–°æˆåŠŸ":"å‘å¸ƒæˆåŠŸ";r.toast.success(e)}catch(e){console.error(e),r.toast.error(e?.message||"æ“ä½œå¤±è´¥")}finally{t(!1)}},[i,a,l,o,c,t]);return{isAuth:u,loading:e,onChoosePrivateKey:m,onPublish:h,onDelete:(0,f.useCallback)(async()=>{let e=c||i.slug;if(!e)return void r.toast.error("ç¼ºå°‘ slugï¼Œæ— æ³•åˆ é™¤");try{t(!0),await C(e)}catch(e){console.error(e),r.toast.error(e?.message||"åˆ é™¤å¤±è´¥")}finally{t(!1)}},[i.slug,c,t])}}(),A=(0,f.useRef)(null);E[0]!==j||E[1]!==k?(e=()=>{j?k():A.current?.click()},E[0]=j,E[1]=k,E[2]=e):e=E[2];let L=e,B=j?"edit"===S?"æ›´æ–°":"å‘å¸ƒ":"å¯¼å…¥å¯†é’¥";E[3]!==T||E[4]!==j||E[5]!==M?(t=()=>{if(!j)return void r.toast.info("è¯·å…ˆå¯¼å…¥å¯†é’¥");let e=T?.title?`ç¡®å®šåˆ é™¤ã€Š${T.title}ã€‹å—ï¼Ÿè¯¥æ“ä½œä¸å¯æ¢å¤ã€‚`:"ç¡®å®šåˆ é™¤å½“å‰æ–‡ç« å—ï¼Ÿè¯¥æ“ä½œä¸å¯æ¢å¤ã€‚";window.confirm(e)&&M()},E[3]=T,E[4]=j,E[5]=M,E[6]=t):t=E[6];let G=t;return E[7]!==D?(i=(0,o.jsx)("input",{ref:A,type:"file",accept:".pem",className:"hidden",onChange:async e=>{let t=e.target.files?.[0];t&&await D(t),e.currentTarget&&(e.currentTarget.value="")}}),E[7]=D,E[8]=i):i=E[8],E[9]!==G||E[10]!==_||E[11]!==S?(a="edit"===S&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(u.motion.div,{initial:{opacity:0,scale:.6},animate:{opacity:1,scale:1},className:"flex items-center gap-2",children:(0,o.jsx)("div",{className:"rounded-lg border bg-blue-50 px-4 py-2 text-sm text-blue-700",children:"ç¼–è¾‘æ¨¡å¼"})}),(0,o.jsx)(u.motion.button,{initial:{opacity:0,scale:.6},animate:{opacity:1,scale:1},whileHover:{scale:1.05},whileTap:{scale:.95},className:"rounded-xl border border-red-200 bg-red-50 px-4 py-2 text-sm text-red-600 transition-colors hover:bg-red-100",disabled:_,onClick:G,children:"åˆ é™¤"})]}),E[9]=G,E[10]=_,E[11]=S,E[12]=a):a=E[12],E[13]===Symbol.for("react.memo_cache_sentinel")?(d={opacity:0,scale:.6},m={opacity:1,scale:1},h={scale:1.05},g={scale:.95},E[13]=d,E[14]=m,E[15]=h,E[16]=g):(d=E[13],m=E[14],h=E[15],g=E[16]),E[17]!==_||E[18]!==I?(p=(0,o.jsx)(u.motion.button,{initial:d,animate:m,whileHover:h,whileTap:g,className:"rounded-xl border bg-white/60 px-6 py-2 text-sm",disabled:_,onClick:I,children:"é¢„è§ˆ"}),E[17]=_,E[18]=I,E[19]=p):p=E[19],E[20]===Symbol.for("react.memo_cache_sentinel")?(w={opacity:0,scale:.6},y={opacity:1,scale:1},v={scale:1.05},x={scale:.95},E[20]=y,E[21]=v,E[22]=x,E[23]=w):(y=E[20],v=E[21],x=E[22],w=E[23]),E[24]!==B||E[25]!==L||E[26]!==_?(b=(0,o.jsx)(u.motion.button,{initial:w,animate:y,whileHover:v,whileTap:x,className:"brand-btn px-6",disabled:_,onClick:L,children:B}),E[24]=B,E[25]=L,E[26]=_,E[27]=b):b=E[27],E[28]!==b||E[29]!==a||E[30]!==p?(N=(0,o.jsxs)("ul",{className:"absolute top-4 right-6 flex items-center gap-2",children:[a,p,b]}),E[28]=b,E[29]=a,E[30]=p,E[31]=N):N=E[31],E[32]!==N||E[33]!==i?(O=(0,o.jsxs)(o.Fragment,{children:[i,N]}),E[32]=N,E[33]=i,E[34]=O):O=E[34],O}e.s(["WriteActions",()=>D],43765);var k=e.i(64169),M=e.i(66324);function A(e){let t,r,n,i,a,l,d,f=(0,c.c)(17),{form:m,coverPreviewUrl:h,onClose:g,slug:p}=e,y=function(){let e,t,r,n=(0,c.c)(9),{form:i,images:a}=s();if(n[0]!==i.md||n[1]!==a){for(let t of(e=i.md,a))if("file"===t.type){let r=`local-image:${t.id}`;e=e.split(`(${r})`).join(`(${t.previewUrl})`)}n[0]=i.md,n[1]=a,n[2]=e}else e=n[2];let l=e,o=i.title||"Untitled";n[3]!==i.date?(t=(0,M.default)(i.date).format("YYYYå¹´ Mæœˆ Dæ—¥"),n[3]=i.date,n[4]=t):t=n[4];let u=t;return n[5]!==u||n[6]!==l||n[7]!==o?(r={markdown:l,title:o,date:u},n[5]=u,n[6]=l,n[7]=o,n[8]=r):r=n[8],r}(),v=h||void 0;return f[0]!==m.summary||f[1]!==m.tags||f[2]!==y.date||f[3]!==y.markdown||f[4]!==y.title||f[5]!==p||f[6]!==v?(t=(0,o.jsx)("div",{onClick:L,children:(0,o.jsx)(k.BlogPreview,{markdown:y.markdown,title:y.title,tags:m.tags,date:y.date,summary:m.summary,cover:v,slug:p})}),f[0]=m.summary,f[1]=m.tags,f[2]=y.date,f[3]=y.markdown,f[4]=y.title,f[5]=p,f[6]=v,f[7]=t):t=f[7],f[8]===Symbol.for("react.memo_cache_sentinel")?(r={opacity:0,scale:.6},n={opacity:1,scale:1},i={scale:1.05},a={scale:.95},f[8]=r,f[9]=n,f[10]=i,f[11]=a):(r=f[8],n=f[9],i=f[10],a=f[11]),f[12]!==g?(l=(0,o.jsx)(u.motion.button,{initial:r,animate:n,whileHover:i,whileTap:a,className:"absolute top-4 right-6 rounded-xl border bg-white/60 px-6 py-2 text-sm",onClick:g,children:"å…³é—­é¢„è§ˆ"}),f[12]=g,f[13]=l):l=f[13],f[14]!==t||f[15]!==l?(d=(0,o.jsxs)("div",{children:[t,l]}),f[14]=t,f[15]=l,f[16]=d):d=f[16],d}function L(e){return e.stopPropagation()}e.s(["WritePreview",()=>A],94121)}]);