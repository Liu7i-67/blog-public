(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,28547,(e,t,r)=>{e.e,t.exports=function(e){"use strict";var t={name:"zh-cn",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(e,t){return"W"===t?e+"周":e+"日"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},meridiem:function(e,t){var r=100*e+t;return r<600?"凌晨":r<900?"早上":r<1100?"上午":r<1300?"中午":r<1800?"下午":"晚上"}};return(e&&"object"==typeof e&&"default"in e?e:{default:e}).default.locale(t,null,!0),t}(e.r(66324))},10849,e=>{"use strict";var t,r,a,l=e.i(58190),s=e.i(52434),n=e.i(39331),o=e.i(94846),i=e.i(2310);function c(){let e,t,r,a,c=(0,s.c)(9),d=(0,n.useCenterStore)(),{cardStyles:m}=(0,i.useConfigStore)(),u=m.hiCard,h=null!==u.offsetX?d.x+u.offsetX:d.x,f=null!==u.offsetY?d.y+u.offsetY:d.y;return c[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)("img",{src:"/images/avatar.png",className:"mx-auto rounded-full",style:{width:120,height:120,boxShadow:" 0 16px 32px -5px #E2D9CE"}}),c[0]=e):e=c[0],c[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.jsx)("span",{className:"text-linear text-[32px]",children:"柒书"}),c[1]=t):t=c[1],c[2]===Symbol.for("react.memo_cache_sentinel")?(r=(0,l.jsxs)("h1",{className:"font-averia mt-3 text-2xl",children:[t," ",(0,l.jsx)("br",{})," 活到老，玩到老"]}),c[2]=r):r=c[2],c[3]!==u.height||c[4]!==u.order||c[5]!==u.width||c[6]!==h||c[7]!==f?(a=(0,l.jsxs)(o.default,{order:u.order,width:u.width,height:u.height,x:h,y:f,className:"-translate-1/2 text-center max-sm:static max-sm:translate-0",children:[e,r]}),c[3]=u.height,c[4]=u.order,c[5]=u.width,c[6]=h,c[7]=f,c[8]=a):a=c[8],a}var d=e.i(63580),m=e.i(98788);function u(){let e,t,r,a,c,u=(0,s.c)(17),h=(0,n.useCenterStore)(),{cardStyles:f,siteContent:x}=(0,i.useConfigStore)(),p=(0,m.useRouter)(),g=f.artCard,b=f.hiCard,y=null!==g.offsetX?h.x+g.offsetX:h.x,v=null!==g.offsetY?h.y+g.offsetY:h.y-b.height/2-g.height/2-d.CARD_SPACING;u[0]!==x.artImages?(e=x.artImages??[],u[0]=x.artImages,u[1]=e):e=u[1];let j=e,w=x.currentArtImageId;u[2]!==j||u[3]!==w?(t=(w?j.find(e=>e.id===w):void 0)??j[0],u[2]=j,u[3]=w,u[4]=t):t=u[4];let C=t,N=C?.url||"/images/art/cat.png";return u[5]!==p?(r=()=>p.push("/pictures"),u[5]=p,u[6]=r):r=u[6],u[7]!==N||u[8]!==r?(a=(0,l.jsx)("img",{onClick:r,src:N,alt:"wall art",className:"h-full w-full rounded-[32px] object-cover"}),u[7]=N,u[8]=r,u[9]=a):a=u[9],u[10]!==g.height||u[11]!==g.order||u[12]!==g.width||u[13]!==a||u[14]!==y||u[15]!==v?(c=(0,l.jsx)(o.default,{className:"-translate-1/2 p-2 max-sm:static max-sm:translate-0",order:g.order,width:g.width,height:g.height,x:y,y:v,children:a}),u[10]=g.height,u[11]=g.order,u[12]=g.width,u[13]=a,u[14]=y,u[15]=v,u[16]=c):c=u[16],c}var h=e.i(35311);function f(){let e,t,r,a,c,m,u,f,g,b,y,v,j=(0,s.c)(28),w=(0,n.useCenterStore)(),{cardStyles:C}=(0,i.useConfigStore)();j[0]===Symbol.for("react.memo_cache_sentinel")?(e=new Date,j[0]=e):e=j[0];let[N,_]=(0,h.useState)(e),S=C.clockCard,I=C.hiCard;j[1]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{let e=setInterval(()=>{_(new Date)},5e3);return()=>clearInterval(e)},r=[],j[1]=t,j[2]=r):(t=j[1],r=j[2]),(0,h.useEffect)(t,r),j[3]!==N?(a=N.getHours().toString().padStart(2,"0"),j[3]=N,j[4]=a):a=j[4];let k=a;j[5]!==N?(c=N.getMinutes().toString().padStart(2,"0"),j[5]=N,j[6]=c):c=j[6];let A=c,R=null!==S.offsetX?w.x+S.offsetX:w.x+d.CARD_SPACING+I.width/2,B=null!==S.offsetY?w.y+S.offsetY:w.y-S.offset-S.height,L=S.order,E=S.width,Y=S.height,O=parseInt(k[0]);j[7]!==O?(m=(0,l.jsx)(x,{value:O}),j[7]=O,j[8]=m):m=j[8];let U=parseInt(k[1]);j[9]!==U?(u=(0,l.jsx)(x,{value:U}),j[9]=U,j[10]=u):u=j[10],j[11]===Symbol.for("react.memo_cache_sentinel")?(f=(0,l.jsx)(p,{}),j[11]=f):f=j[11];let M=parseInt(A[0]);j[12]!==M?(g=(0,l.jsx)(x,{value:M}),j[12]=M,j[13]=g):g=j[13];let D=parseInt(A[1]);return j[14]!==D?(b=(0,l.jsx)(x,{value:D}),j[14]=D,j[15]=b):b=j[15],j[16]!==u||j[17]!==g||j[18]!==b||j[19]!==m?(y=(0,l.jsxs)("div",{className:"bg-secondary/20 flex h-full w-full items-center justify-center gap-1.5 rounded-4xl",children:[m,u,f,g,b]}),j[16]=u,j[17]=g,j[18]=b,j[19]=m,j[20]=y):y=j[20],j[21]!==S.height||j[22]!==S.order||j[23]!==S.width||j[24]!==y||j[25]!==R||j[26]!==B?(v=(0,l.jsx)(o.default,{order:L,width:E,height:Y,x:R,y:B,className:"p-2",children:y}),j[21]=S.height,j[22]=S.order,j[23]=S.width,j[24]=y,j[25]=R,j[26]=B,j[27]=v):v=j[27],v}function x(e){let t,r,a,n,o,i,c,d,m=(0,s.c)(23),{value:u,className:h}=e,f={0:[!0,!0,!0,!0,!0,!0,!1],1:[!1,!0,!0,!1,!1,!1,!1],2:[!0,!0,!1,!0,!0,!1,!0],3:[!0,!0,!0,!0,!1,!1,!0],4:[!1,!0,!0,!1,!1,!0,!0],5:[!0,!1,!0,!0,!1,!0,!0],6:[!0,!1,!0,!0,!0,!0,!0],7:[!0,!0,!0,!1,!1,!1,!1],8:[!0,!0,!0,!0,!0,!0,!0],9:[!0,!0,!0,!0,!1,!0,!0]},x=f[u]||f[0],p=x[0]?"var(--color-primary)":"rgba(0, 0, 0, 0.05)";m[0]!==p?(t=(0,l.jsx)("path",{d:"M4.20248 3.49482C2.82797 2.27303 3.69218 0 5.53121 0H22.6867C24.5522 0 25.4019 2.32821 23.975 3.52982L23.5791 3.86316C23.2186 4.16681 22.7623 4.33333 22.2909 4.33333H5.90621C5.41638 4.33333 4.94359 4.15358 4.57748 3.82815L4.20248 3.49482Z",fill:p}),m[0]=p,m[1]=t):t=m[1];let g=x[6]?"var(--color-primary)":"rgba(0, 0, 0, 0.05)";m[2]!==g?(r=(0,l.jsx)("path",{d:"M3.85122 24.13C4.16644 23.936 4.5293 23.8333 4.89942 23.8333H23.3022C23.6503 23.8333 23.9923 23.9242 24.2945 24.0969L24.5862 24.2635C25.9298 25.0313 25.9298 26.9687 24.5862 27.7365L24.2945 27.9032C23.9923 28.0758 23.6503 28.1667 23.3022 28.1667H4.89942C4.5293 28.1667 4.16644 28.064 3.85122 27.87L3.58039 27.7033C2.31131 26.9224 2.31132 25.0777 3.58039 24.2967L3.85122 24.13Z",fill:g}),m[2]=g,m[3]=r):r=m[3];let b=x[5]?"var(--color-primary)":"rgba(0, 0, 0, 0.05)";m[4]!==b?(a=(0,l.jsx)("path",{d:"M3.06 23.5458C1.7279 24.3784 -8.31295e-08 23.4207 -1.47217e-07 21.8498L-8.06095e-07 5.69981C-8.77526e-07 3.94893 2.09055 3.04323 3.36788 4.24073L3.70121 4.55323C4.10452 4.93133 4.33333 5.45949 4.33333 6.01231L4.33333 21.6415C4.33333 22.3311 3.97809 22.972 3.39333 23.3375L3.06 23.5458Z",fill:b}),m[4]=b,m[5]=a):a=m[5];let y=x[1]?"var(--color-primary)":"rgba(0, 0, 0, 0.05)";m[6]!==y?(n=(0,l.jsx)("path",{d:"M24.8497 4.25654C26.1428 3.12502 28.1667 4.04338 28.1667 5.76169L28.1667 21.8498C28.1667 23.4207 26.4388 24.3784 25.1067 23.5458L24.7734 23.3375C24.1886 22.972 23.8334 22.3311 23.8334 21.6415L23.8334 6.05336C23.8334 5.47663 24.0823 4.92798 24.5163 4.54821L24.8497 4.25654Z",fill:y}),m[6]=y,m[7]=n):n=m[7];let v=x[3]?"var(--color-primary)":"rgba(0, 0, 0, 0.05)";m[8]!==v?(o=(0,l.jsx)("path",{d:"M23.9259 48.6321C25.1234 49.9094 24.2177 52 22.4669 52L5.69978 52C3.9489 52 3.04321 49.9094 4.24071 48.6321L4.55321 48.2988C4.9313 47.8955 5.45947 47.6667 6.01228 47.6667L22.1544 47.6667C22.7072 47.6667 23.2353 47.8955 23.6134 48.2988L23.9259 48.6321Z",fill:v}),m[8]=v,m[9]=o):o=m[9];let j=x[2]?"var(--color-primary)":"rgba(0, 0, 0, 0.05)";m[10]!==j?(i=(0,l.jsx)("path",{d:"M25.1862 28.489C26.5194 27.7391 28.1667 28.7025 28.1667 30.2322L28.1667 46.6299C28.1667 48.4117 26.0124 49.3041 24.7525 48.0441L24.4191 47.7108C24.0441 47.3357 23.8334 46.827 23.8334 46.2966L23.8334 30.4197C23.8334 29.6971 24.2231 29.0308 24.8528 28.6765L25.1862 28.489Z",fill:j}),m[10]=j,m[11]=i):i=m[11];let w=x[4]?"var(--color-primary)":"rgba(0, 0, 0, 0.05)";return m[12]!==w?(c=(0,l.jsx)("path",{d:"M3.4564 47.7859C2.21509 49.1048 4.23823e-07 48.2263 6.6133e-07 46.4152L2.79423e-06 30.1501C3.00022e-06 28.5793 1.72791 27.6216 3.06 28.4541L3.39333 28.6625C3.9781 29.028 4.33334 29.6689 4.33334 30.3585L4.33333 46.061C4.33333 46.5705 4.13891 47.0607 3.78973 47.4317L3.4564 47.7859Z",fill:w}),m[12]=w,m[13]=c):c=m[13],m[14]!==h||m[15]!==o||m[16]!==i||m[17]!==c||m[18]!==t||m[19]!==r||m[20]!==a||m[21]!==n?(d=(0,l.jsxs)("svg",{width:"29",height:"52",viewBox:"0 0 29 52",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:h,children:[t,r,a,n,o,i,c]}),m[14]=h,m[15]=o,m[16]=i,m[17]=c,m[18]=t,m[19]=r,m[20]=a,m[21]=n,m[22]=d):d=m[22],d}function p(e){let t,r,a,n=(0,s.c)(4),{className:o}=e,i=`flex flex-col justify-center gap-2 ${o}`;return n[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.jsx)("div",{className:"bg-primary h-1.5 w-1.5"}),r=(0,l.jsx)("div",{className:"bg-primary h-1.5 w-1.5"}),n[0]=t,n[1]=r):(t=n[0],r=n[1]),n[2]!==i?(a=(0,l.jsxs)("div",{className:i,children:[t,r]}),n[2]=i,n[3]=a):a=n[3],a}var g=e.i(66324);e.i(28547);var b=e.i(75157);function y(){let e,t,r,a,c,m,u,h,f,x,p,y,w,C=(0,s.c)(32),N=(0,n.useCenterStore)(),{cardStyles:_}=(0,i.useConfigStore)();if(C[0]!==_.calendarCard||C[1]!==_.clockCard||C[2]!==_.hiCard||C[3]!==N.x||C[4]!==N.y){let s=(0,g.default)(),n=s.date(),i=(s.startOf("month").day()+6)%7,y=s.daysInMonth(),w=(s.day()+6)%7,S=_.calendarCard,I=_.hiCard,k=_.clockCard,A=null!==S.offsetX?N.x+S.offsetX:N.x+d.CARD_SPACING+I.width/2,R=null!==S.offsetY?N.y+S.offsetY:N.y-k.offset+d.CARD_SPACING;e=o.default,m=S.order,u=S.width,h=S.height,f=A,x=R,p=(0,l.jsxs)("h3",{className:"text-secondary text-sm",children:[s.format("YYYY/M/D")," ",s.format("ddd")]}),t="text-secondary mt-3 grid h-[206px] grid-cols-7 gap-2 text-sm",C[16]===Symbol.for("react.memo_cache_sentinel")?(r=Array(7).fill(0).map((e,t)=>(0,l.jsx)("li",{className:(0,b.cn)("flex items-center justify-center font-medium",t===w&&"text-brand"),children:j[t]},t)),a=Array(i).fill(0).map(v),C[16]=r,C[17]=a):(r=C[16],a=C[17]),c=Array(y).fill(0).map((e,t)=>{let r=t+1,a=r===n;return(0,l.jsx)("li",{className:(0,b.cn)("flex items-center justify-center rounded-lg",a&&"bg-linear border font-medium"),children:r},r)}),C[0]=_.calendarCard,C[1]=_.clockCard,C[2]=_.hiCard,C[3]=N.x,C[4]=N.y,C[5]=e,C[6]=t,C[7]=r,C[8]=a,C[9]=c,C[10]=m,C[11]=u,C[12]=h,C[13]=f,C[14]=x,C[15]=p}else e=C[5],t=C[6],r=C[7],a=C[8],c=C[9],m=C[10],u=C[11],h=C[12],f=C[13],x=C[14],p=C[15];return C[18]!==t||C[19]!==r||C[20]!==a||C[21]!==c?(y=(0,l.jsxs)("ul",{className:t,children:[r,a,c]}),C[18]=t,C[19]=r,C[20]=a,C[21]=c,C[22]=y):y=C[22],C[23]!==e||C[24]!==y||C[25]!==m||C[26]!==u||C[27]!==h||C[28]!==f||C[29]!==x||C[30]!==p?(w=(0,l.jsxs)(e,{order:m,width:u,height:h,x:f,y:x,children:[p,y]}),C[23]=e,C[24]=y,C[25]=m,C[26]=u,C[27]=h,C[28]=f,C[29]=x,C[30]=p,C[31]=w):w=C[31],w}function v(e,t){return(0,l.jsx)("li",{},`empty-${t}`)}g.default.locale("zh-cn");let j=["一","二","三","四","五","六","日"];var w=e.i(60489),C=e.i(18785);function N(){let e,t,r,a,c,m=(0,s.c)(10),u=(0,n.useCenterStore)(),{cardStyles:h}=(0,i.useConfigStore)(),f=h.musicCard,x=h.hiCard,p=h.clockCard,g=h.calendarCard,b=null!==f.offsetX?u.x+f.offsetX:u.x+d.CARD_SPACING+x.width/2-f.offset,y=null!==f.offsetY?u.y+f.offsetY:u.y-p.offset+d.CARD_SPACING+g.height+d.CARD_SPACING;return m[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(w.default,{className:"h-8 w-8"}),m[0]=e):e=m[0],m[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.jsx)("div",{className:"text-secondary text-sm",children:"随机音乐"}),m[1]=t):t=m[1],m[2]===Symbol.for("react.memo_cache_sentinel")?(r=(0,l.jsxs)("div",{className:"flex-1",children:[t,(0,l.jsx)("div",{className:"mt-1 h-2 rounded-full bg-white/60",children:(0,l.jsx)("div",{className:"bg-linear h-full w-1/2 rounded-full"})})]}),m[2]=r):r=m[2],m[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,l.jsx)("button",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-white",children:(0,l.jsx)(C.default,{className:"text-brand ml-1 h-4 w-4"})}),m[3]=a):a=m[3],m[4]!==f.height||m[5]!==f.order||m[6]!==f.width||m[7]!==b||m[8]!==y?(c=(0,l.jsxs)(o.default,{order:f.order,width:f.width,height:f.height,x:b,y:y,className:"flex items-center gap-3",children:[e,r,a]}),m[4]=f.height,m[5]=f.order,m[6]=f.width,m[7]=b,m[8]=y,m[9]=c):c=m[9],c}var _=e.i(21420);function S(){return(S=Object.assign.bind()).apply(null,arguments)}let I=function(e){return h.createElement("svg",S({xmlns:"http://www.w3.org/2000/svg",width:220.508,height:200,className:"bilibili_svg__icon",viewBox:"0 0 1129 1024"},e),t||(t=h.createElement("path",{fill:"#20B0E3",d:"M234.909 9.656a80.47 80.47 0 0 1 68.398 0 167.4 167.4 0 0 1 41.843 30.578l160.937 140.82h115.07l160.936-140.82a169 169 0 0 1 41.843-30.578A80.468 80.468 0 0 1 930.96 76.445a80.47 80.47 0 0 1-17.703 53.914 450 450 0 0 1-35.406 32.187 233 233 0 0 1-22.531 18.508h100.585a170.6 170.6 0 0 1 118.289 53.109 171.4 171.4 0 0 1 53.914 118.288v462.693a326 326 0 0 1-4.024 70.007 178.64 178.64 0 0 1-80.468 112.656 173 173 0 0 1-92.539 25.75h-738.7a341.2 341.2 0 0 1-72.421-4.024A177.84 177.84 0 0 1 28.91 939.065a172.2 172.2 0 0 1-27.36-92.539V388.662a360.5 360.5 0 0 1 0-66.789A177.03 177.03 0 0 1 162.487 178.64h105.414c-16.899-12.07-31.383-26.555-46.672-39.43a80.47 80.47 0 0 1-25.75-65.984 80.47 80.47 0 0 1 39.43-63.57M216.4 321.873a80.47 80.47 0 0 0-63.57 57.937 108.6 108.6 0 0 0 0 30.578v380.615a80.47 80.47 0 0 0 55.523 80.469 106.2 106.2 0 0 0 34.601 5.632h654.208a80.47 80.47 0 0 0 76.444-47.476 112.66 112.66 0 0 0 8.047-53.109v-354.06a135.2 135.2 0 0 0 0-38.625 80.47 80.47 0 0 0-52.304-54.719 129.6 129.6 0 0 0-49.89-7.242H254.22a269 269 0 0 0-37.82 0m0 0"})),r||(r=h.createElement("path",{fill:"#20B0E3",d:"M348.369 447.404a80.47 80.47 0 0 1 55.523 18.507 80.47 80.47 0 0 1 28.164 59.547v80.468a80.47 80.47 0 0 1-16.094 51.5 80.468 80.468 0 0 1-131.968-9.656 104.6 104.6 0 0 1-10.46-54.719v-80.468a80.47 80.47 0 0 1 70.007-67.593zm416.02 0a80.47 80.47 0 0 1 86.102 75.64v80.468a94.15 94.15 0 0 1-12.07 53.11 80.468 80.468 0 0 1-132.773 0 95.76 95.76 0 0 1-12.875-57.133V519.02a80.47 80.47 0 0 1 70.007-70.812zm0 0"})))};var k=e.i(67698),A=e.i(7281),R=e.i(95403),B=e.i(99151);let L=100;function E(){let e=(0,n.useCenterStore)(),{cardStyles:t}=(0,i.useConfigStore)(),{maxSM:r,init:a}=(0,B.useSize)(),s=t.socialButtons,o=t.hiCard,c=s.order;r&&a&&(c=0,L=0);let[m,u]=(0,h.useState)(!1),[f,x]=(0,h.useState)(!1),[p,g]=(0,h.useState)(!1);(0,h.useEffect)(()=>{setTimeout(()=>u(!0),c*d.ANIMATION_DELAY*1e3),setTimeout(()=>x(!0),c*d.ANIMATION_DELAY*1e3+ +L),setTimeout(()=>g(!0),c*d.ANIMATION_DELAY*1e3+2*L)},[c]);let b=null!==s.offsetX?e.x+s.offsetX:e.x+o.width/2,y=null!==s.offsetY?e.y+s.offsetY:e.y+o.height/2+d.CARD_SPACING;return m?(0,l.jsx)(A.motion.div,{className:"absolute max-sm:static",animate:{left:b,top:y},initial:{left:b,top:y},children:(0,l.jsxs)("div",{className:"absolute top-0 right-0 flex items-center gap-3 max-sm:static",children:[p&&(0,l.jsxs)(A.motion.a,{href:"https://github.com/Liu7i-67",target:"_blank",initial:{opacity:0,scale:.6},animate:{opacity:1,scale:1},whileHover:{scale:1.05},whileTap:{scale:.95},className:"font-averia flex items-center gap-2 rounded-xl border bg-[#070707] px-3 py-2 text-xl text-white",style:{boxShadow:" inset 0 0 12px rgba(255, 255, 255, 0.4)"},children:[(0,l.jsx)(_.default,{}),"Github"]}),f&&(0,l.jsxs)(A.motion.a,{href:"https://space.bilibili.com/189975021",target:"_blank",initial:{opacity:0,scale:.6},animate:{opacity:1,scale:1},whileHover:{scale:1.05},whileTap:{scale:.95},className:"card relative flex items-center gap-2 rounded-xl px-3 py-2.5 font-medium whitespace-nowrap",children:[(0,l.jsx)(I,{className:"h-6 w-6"}),"哔哩哔哩"]}),(0,l.jsx)(A.motion.button,{onClick:()=>{navigator.clipboard.writeText("liu67iq@gmail.com").then(()=>{R.toast.success("邮箱已复制到剪贴板")})},initial:{opacity:0,scale:.6},animate:{opacity:1,scale:1},whileHover:{scale:1.05},whileTap:{scale:.95},className:"card btn relative rounded-xl p-1.5",children:(0,l.jsx)(k.default,{})})]})}):null}var Y=e.i(92609),O=e.i(86087);function U(){let e,t,r,a,c,m,u,f,x,p=(0,s.c)(22),g=(0,n.useCenterStore)(),{cardStyles:b}=(0,i.useConfigStore)(),[y,v]=(0,h.useState)(null),j=b.shareCard,w=b.hiCard,C=b.socialButtons;if(p[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{let e=Math.floor(Math.random()*Y.default.length);v(Y.default[e])},t=[],p[0]=e,p[1]=t):(e=p[0],t=p[1]),(0,h.useEffect)(e,t),!y)return null;let N=null!==j.offsetX?g.x+j.offsetX:g.x+w.width/2-C.width,_=null!==j.offsetY?g.y+j.offsetY:g.y+w.height/2+d.CARD_SPACING+C.height+d.CARD_SPACING;return p[2]===Symbol.for("react.memo_cache_sentinel")?(r=(0,l.jsx)("h2",{className:"text-secondary text-sm",children:"随机推荐"}),p[2]=r):r=p[2],p[3]!==y.logo||p[4]!==y.name?(a=(0,l.jsx)("div",{className:"relative mr-3 h-12 w-12 shrink-0 overflow-hidden rounded-xl",children:(0,l.jsx)("img",{src:y.logo,alt:y.name,className:"h-full w-full object-contain"})}),p[3]=y.logo,p[4]=y.name,p[5]=a):a=p[5],p[6]!==y.name?(c=(0,l.jsx)("h3",{className:"text-sm font-medium",children:y.name}),p[6]=y.name,p[7]=c):c=p[7],p[8]!==a||p[9]!==c?(m=(0,l.jsxs)("div",{className:"flex items-center",children:[a,c]}),p[8]=a,p[9]=c,p[10]=m):m=p[10],p[11]!==y.description?(u=(0,l.jsx)("p",{className:"text-secondary line-clamp-3 text-xs",children:y.description}),p[11]=y.description,p[12]=u):u=p[12],p[13]!==m||p[14]!==u?(f=(0,l.jsxs)(O.default,{href:"/share",className:"mt-2 block space-y-2",children:[m,u]}),p[13]=m,p[14]=u,p[15]=f):f=p[15],p[16]!==j.order||p[17]!==j.width||p[18]!==f||p[19]!==N||p[20]!==_?(x=(0,l.jsxs)(o.default,{order:j.order,width:j.width,x:N,y:_,children:[r,f]}),p[16]=j.order,p[17]=j.width,p[18]=f,p[19]=N,p[20]=_,p[21]=x):x=p[21],x}var M=e.i(90770);function D(){let e,t,r,a=(0,s.c)(10),c=(0,n.useCenterStore)(),{cardStyles:m}=(0,i.useConfigStore)(),{blog:u,loading:h}=(0,M.useLatestBlog)(),f=m.articleCard,x=m.hiCard,p=m.socialButtons,b=null!==f.offsetX?c.x+f.offsetX:c.x+x.width/2-p.width-d.CARD_SPACING-f.width,y=null!==f.offsetY?c.y+f.offsetY:c.y+x.height/2+d.CARD_SPACING;return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)("h2",{className:"text-secondary text-sm",children:"最新文章"}),a[0]=e):e=a[0],a[1]!==u||a[2]!==h?(t=h?(0,l.jsx)("div",{className:"flex h-[60px] items-center justify-center",children:(0,l.jsx)("span",{className:"text-secondary text-xs",children:"加载中..."})}):u?(0,l.jsxs)(O.default,{href:`/blog/${u.slug}`,className:"flex transition-opacity hover:opacity-80",children:[u.cover?(0,l.jsx)("img",{src:u.cover,alt:"cover",className:"mr-3 h-12 w-12 shrink-0 rounded-xl border object-cover"}):(0,l.jsx)("div",{className:"text-secondary mr-3 grid h-12 w-12 shrink-0 place-items-center rounded-xl bg-white/60",children:"+"}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("h3",{className:"line-clamp-1 text-sm font-medium",children:u.title||u.slug}),u.summary&&(0,l.jsx)("p",{className:"text-secondary mt-1 line-clamp-3 text-xs",children:u.summary}),(0,l.jsx)("p",{className:"text-secondary mt-3 text-xs",children:(0,g.default)(u.date).format("YYYY/M/D")})]})]}):(0,l.jsx)("div",{className:"flex h-[60px] items-center justify-center",children:(0,l.jsx)("span",{className:"text-secondary text-xs",children:"暂无文章"})}),a[1]=u,a[2]=h,a[3]=t):t=a[3],a[4]!==f.order||a[5]!==f.width||a[6]!==t||a[7]!==b||a[8]!==y?(r=(0,l.jsxs)(o.default,{order:f.order,width:f.width,x:b,y:y,className:"space-y-2 max-sm:static",children:[e,t]}),a[4]=f.order,a[5]=f.width,a[6]=t,a[7]=b,a[8]=y,a[9]=r):r=a[9],r}var T=e.i(36432);function G(){return(G=Object.assign.bind()).apply(null,arguments)}let H=function(e){return h.createElement("svg",G({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 32"},e),a||(a=h.createElement("path",{fill:"#fff",fillOpacity:.8,d:"M16 23.333a2 2 0 1 1 0 4.001 2 2 0 0 1 0-4m9.333 0a2 2 0 1 1 0 4.001 2 2 0 0 1 0-4m-18.666 0a2 2 0 1 1 0 4 2 2 0 0 1 0-4M16 14a2 2 0 1 1 0 4 2 2 0 0 1 0-4m9.333 0a2 2 0 1 1 0 4 2 2 0 0 1 0-4M6.667 14a2 2 0 1 1 0 4 2 2 0 0 1 0-4M16 4.667a2 2 0 1 1 0 4 2 2 0 0 1 0-4m9.333 0a2 2 0 1 1 0 4 2 2 0 0 1 0-4m-18.666 0a2 2 0 1 1 0 4 2 2 0 0 1 0-4"})))};var P=e.i(72412),F=e.i(71436),$=e.i(37572),X=e.i(86909),W=e.i(97005);async function z(e,t,r,a,l,s){let n=await (0,X.getAuthToken)();R.toast.info("正在获取分支信息...");let o=(await (0,$.getRef)(n,d.GITHUB_CONFIG.OWNER,d.GITHUB_CONFIG.REPO,`heads/${d.GITHUB_CONFIG.BRANCH}`)).sha,i=`更新站点配置`;R.toast.info("正在准备文件...");let c=[];if(r?.type==="file"){R.toast.info("正在上传 Favicon...");let e=await (0,W.fileToBase64NoPrefix)(r.file),t=await (0,$.createBlob)(n,d.GITHUB_CONFIG.OWNER,d.GITHUB_CONFIG.REPO,e,"base64");c.push({path:"public/favicon.png",mode:"100644",type:"blob",sha:t.sha})}if(a?.type==="file"){R.toast.info("正在上传 Avatar...");let e=await (0,W.fileToBase64NoPrefix)(a.file),t=await (0,$.createBlob)(n,d.GITHUB_CONFIG.OWNER,d.GITHUB_CONFIG.REPO,e,"base64");c.push({path:"public/images/avatar.png",mode:"100644",type:"blob",sha:t.sha})}if(l)for(let[t,r]of Object.entries(l)){if("file"!==r.type)continue;let a=e.artImages?.find(e=>e.id===t);if(!a)continue;let l=a.url.startsWith("/")?a.url:`/${a.url}`,s=`public${l}`;if(!s)continue;R.toast.info(`正在上传 Art 图片 ${t}...`);let o=await (0,W.fileToBase64NoPrefix)(r.file),i=await (0,$.createBlob)(n,d.GITHUB_CONFIG.OWNER,d.GITHUB_CONFIG.REPO,o,"base64");c.push({path:s,mode:"100644",type:"blob",sha:i.sha})}if(s&&s.length>0)for(let e of s){let t=e.url.startsWith("/")?e.url:`/${e.url}`,r=`public${t}`;c.push({path:r,mode:"100644",type:"blob",sha:null})}let m=JSON.stringify(e,null,"	"),u=await (0,$.createBlob)(n,d.GITHUB_CONFIG.OWNER,d.GITHUB_CONFIG.REPO,(0,$.toBase64Utf8)(m),"base64");c.push({path:"src/config/site-content.json",mode:"100644",type:"blob",sha:u.sha});let h=JSON.stringify(t,null,"	"),f=await (0,$.createBlob)(n,d.GITHUB_CONFIG.OWNER,d.GITHUB_CONFIG.REPO,(0,$.toBase64Utf8)(h),"base64");c.push({path:"src/config/card-styles.json",mode:"100644",type:"blob",sha:f.sha}),R.toast.info("正在创建文件树...");let x=await (0,$.createTree)(n,d.GITHUB_CONFIG.OWNER,d.GITHUB_CONFIG.REPO,c,o);R.toast.info("正在创建提交...");let p=await (0,$.createCommit)(n,d.GITHUB_CONFIG.OWNER,d.GITHUB_CONFIG.REPO,i,x.sha,[o]);R.toast.info("正在更新分支..."),await (0,$.updateRef)(n,d.GITHUB_CONFIG.OWNER,d.GITHUB_CONFIG.REPO,`heads/${d.GITHUB_CONFIG.BRANCH}`,p.sha),R.toast.success("保存成功！")}function Z(e){let t,r,a,n,o,i,c,d,m,u,f,x,p,g,b,y,v,j,w,C,N,_,S,I,k,B,L,E,Y,O,U,M,D,T,G,H,P,F,$=(0,s.c)(95),{formData:X,setFormData:z,faviconItem:Z,setFaviconItem:q,avatarItem:J,setAvatarItem:K,artImageUploads:V,setArtImageUploads:Q}=e,ee=(0,h.useRef)(null),et=(0,h.useRef)(null),er=(0,h.useRef)(null);$[0]!==q?(t=async e=>{let t=e.target.files?.[0];if(!t)return;if(!t.type.startsWith("image/"))return void R.toast.error("请选择图片文件");let r=await (0,W.hashFileSHA256)(t),a=URL.createObjectURL(t);q({type:"file",file:t,previewUrl:a,hash:r}),e.currentTarget&&(e.currentTarget.value="")},$[0]=q,$[1]=t):t=$[1];let ea=t;$[2]!==K?(r=async e=>{let t=e.target.files?.[0];if(!t)return;if(!t.type.startsWith("image/"))return void R.toast.error("请选择图片文件");let r=await (0,W.hashFileSHA256)(t),a=URL.createObjectURL(t);K({type:"file",file:t,previewUrl:a,hash:r}),e.currentTarget&&(e.currentTarget.value="")},$[2]=K,$[3]=r):r=$[3];let el=r;$[4]!==Z||$[5]!==q?(a=()=>{Z?.type==="file"&&URL.revokeObjectURL(Z.previewUrl),q(null)},$[4]=Z,$[5]=q,$[6]=a):a=$[6];let es=a;$[7]!==J||$[8]!==K?(n=()=>{J?.type==="file"&&URL.revokeObjectURL(J.previewUrl),K(null)},$[7]=J,$[8]=K,$[9]=n):n=$[9];let en=n;$[10]!==Q||$[11]!==z?(o=async e=>{let t=Array.from(e.target.files||[]);if(t.length){for(let e of t){if(!e.type.startsWith("image/")){R.toast.error("请选择图片文件");continue}let t=await (0,W.hashFileSHA256)(e),r=e.name.split(".").pop()||"png",a=`/images/art/${t}.${r}`,l=URL.createObjectURL(e);Q(r=>({...r,[t]:{type:"file",file:e,previewUrl:l,hash:t}})),z(e=>{let r=[...(e.artImages??[]).filter(e=>e.id!==t),{id:t,url:a}];return{...e,artImages:r,currentArtImageId:e.currentArtImageId||t}})}e.currentTarget&&(e.currentTarget.value="")}},$[10]=Q,$[11]=z,$[12]=o):o=$[12];let eo=o;$[13]!==z?(i=e=>{z(t=>({...t,currentArtImageId:e}))},$[13]=z,$[14]=i):i=$[14];let ei=i;$[15]!==V||$[16]!==Q||$[17]!==z?(c=e=>{let t=V[e];t?.type==="file"&&URL.revokeObjectURL(t.previewUrl),Q(t=>{let r={...t};return delete r[e],r}),z(t=>{let r=(t.artImages??[]).filter(t=>t.id!==e),a=t.currentArtImageId===e;return{...t,artImages:r,currentArtImageId:a?r[0]?.id||"":t.currentArtImageId}})},$[15]=V,$[16]=Q,$[17]=z,$[18]=c):c=$[18];let ec=c;$[19]===Symbol.for("react.memo_cache_sentinel")?(d=(0,l.jsx)("label",{className:"mb-2 block text-sm font-medium",children:"Favicon"}),$[19]=d):d=$[19],$[20]!==ea?(m=(0,l.jsx)("input",{ref:ee,type:"file",accept:"image/*",className:"hidden",onChange:ea}),$[20]=ea,$[21]=m):m=$[21],$[22]!==Z?(u=Z?.type==="file"?(0,l.jsx)("img",{src:Z.previewUrl,alt:"favicon preview",className:"h-full w-full object-cover"}):(0,l.jsx)("img",{src:"/favicon.png",alt:"current favicon",className:"h-full w-full object-cover"}),$[22]=Z,$[23]=u):u=$[23];let ed=Z?"更换":"上传";$[24]!==ed?(f=(0,l.jsx)("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center rounded-lg bg-black/40 opacity-0 transition-opacity group-hover:opacity-100",children:(0,l.jsx)("span",{className:"text-xs text-white",children:ed})}),$[24]=ed,$[25]=f):f=$[25],$[26]!==Z||$[27]!==es?(x=Z&&(0,l.jsx)("div",{className:"absolute top-1 right-1 hidden group-hover:block",children:(0,l.jsx)(A.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e=>{e.stopPropagation(),es()},className:"rounded-md bg-white/90 px-2 py-1 text-xs text-red-500 shadow hover:bg-white",children:"清除"})}),$[26]=Z,$[27]=es,$[28]=x):x=$[28],$[29]===Symbol.for("react.memo_cache_sentinel")?(p=(0,l.jsx)("div",{className:"absolute inset-0",onClick:()=>ee.current?.click()}),$[29]=p):p=$[29],$[30]!==u||$[31]!==f||$[32]!==x?(g=(0,l.jsxs)("div",{className:"group relative h-20 w-20 cursor-pointer overflow-hidden rounded-lg border bg-white/60",children:[u,f,x,p]}),$[30]=u,$[31]=f,$[32]=x,$[33]=g):g=$[33],$[34]!==g||$[35]!==m?(b=(0,l.jsxs)("div",{children:[d,m,g]}),$[34]=g,$[35]=m,$[36]=b):b=$[36],$[37]===Symbol.for("react.memo_cache_sentinel")?(y=(0,l.jsx)("label",{className:"mb-2 block text-sm font-medium",children:"Avatar"}),$[37]=y):y=$[37],$[38]!==el?(v=(0,l.jsx)("input",{ref:et,type:"file",accept:"image/*",className:"hidden",onChange:el}),$[38]=el,$[39]=v):v=$[39],$[40]!==J?(j=J?.type==="file"?(0,l.jsx)("img",{src:J.previewUrl,alt:"avatar preview",className:"h-full w-full object-cover"}):(0,l.jsx)("img",{src:"/images/avatar.png",alt:"current avatar",className:"h-full w-full object-cover"}),$[40]=J,$[41]=j):j=$[41];let em=J?"更换":"上传";return $[42]!==em?(w=(0,l.jsx)("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center rounded-full bg-black/40 opacity-0 transition-opacity group-hover:opacity-100",children:(0,l.jsx)("span",{className:"text-xs text-white",children:em})}),$[42]=em,$[43]=w):w=$[43],$[44]!==J||$[45]!==en?(C=J&&(0,l.jsx)("div",{className:"absolute top-1 right-1 hidden group-hover:block",children:(0,l.jsx)(A.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e=>{e.stopPropagation(),en()},className:"rounded-md bg-white/90 px-2 py-1 text-xs text-red-500 shadow hover:bg-white",children:"清除"})}),$[44]=J,$[45]=en,$[46]=C):C=$[46],$[47]===Symbol.for("react.memo_cache_sentinel")?(N=(0,l.jsx)("div",{className:"absolute inset-0",onClick:()=>et.current?.click()}),$[47]=N):N=$[47],$[48]!==j||$[49]!==w||$[50]!==C?(_=(0,l.jsxs)("div",{className:"group relative h-20 w-20 cursor-pointer overflow-hidden rounded-full border bg-white/60",children:[j,w,C,N]}),$[48]=j,$[49]=w,$[50]=C,$[51]=_):_=$[51],$[52]!==v||$[53]!==_?(S=(0,l.jsxs)("div",{children:[y,v,_]}),$[52]=v,$[53]=_,$[54]=S):S=$[54],$[55]!==b||$[56]!==S?(I=(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[b,S]}),$[55]=b,$[56]=S,$[57]=I):I=$[57],$[58]===Symbol.for("react.memo_cache_sentinel")?(k=(0,l.jsx)("label",{className:"mb-2 block text-sm font-medium",children:"站点标题"}),$[58]=k):k=$[58],$[59]!==X||$[60]!==z?(B=e=>z({...X,meta:{...X.meta,title:e.target.value}}),$[59]=X,$[60]=z,$[61]=B):B=$[61],$[62]!==X.meta.title||$[63]!==B?(L=(0,l.jsxs)("div",{children:[k,(0,l.jsx)("input",{type:"text",value:X.meta.title,onChange:B,className:"bg-secondary/10 w-full rounded-lg border px-4 py-2 text-sm"})]}),$[62]=X.meta.title,$[63]=B,$[64]=L):L=$[64],$[65]===Symbol.for("react.memo_cache_sentinel")?(E=(0,l.jsx)("label",{className:"mb-2 block text-sm font-medium",children:"站点描述"}),$[65]=E):E=$[65],$[66]!==X||$[67]!==z?(Y=e=>z({...X,meta:{...X.meta,description:e.target.value}}),$[66]=X,$[67]=z,$[68]=Y):Y=$[68],$[69]!==X.meta.description||$[70]!==Y?(O=(0,l.jsxs)("div",{children:[E,(0,l.jsx)("textarea",{value:X.meta.description,onChange:Y,rows:3,className:"bg-secondary/10 w-full rounded-lg border px-4 py-2 text-sm"})]}),$[69]=X.meta.description,$[70]=Y,$[71]=O):O=$[71],$[72]===Symbol.for("react.memo_cache_sentinel")?(U=(0,l.jsx)("label",{className:"mb-2 block text-sm font-medium",children:"首页图片"}),$[72]=U):U=$[72],$[73]!==eo?(M=(0,l.jsx)("input",{ref:er,type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:eo}),$[73]=eo,$[74]=M):M=$[74],$[75]!==X.artImages?.length?(D=(X.artImages?.length??0)===0&&(0,l.jsx)("p",{className:"mb-2 text-xs text-gray-500",children:"暂未配置 Art 图片，点击下方「+」添加。"}),$[75]=X.artImages?.length,$[76]=D):D=$[76],$[77]!==V||$[78]!==X.artImages||$[79]!==X.currentArtImageId||$[80]!==ec||$[81]!==ei?(T=X.artImages?.map(e=>{let t=X.currentArtImageId===e.id,r=V[e.id],a=r?.type==="file"?r.previewUrl:e.url;return(0,l.jsxs)("div",{className:"group relative",children:[(0,l.jsx)("button",{type:"button",onClick:()=>ei(e.id),className:`block w-full overflow-hidden rounded-xl border bg-white/60 transition-all ${t?"ring-brand shadow-md ring-2":"hover:border-brand/60"}`,children:(0,l.jsx)("img",{src:a,alt:"art preview",className:"h-24 w-full object-cover"})}),t&&(0,l.jsx)("span",{className:"bg-brand pointer-events-none absolute top-1 left-1 rounded-full px-2 py-0.5 text-[10px] text-white shadow",children:"当前使用"}),(0,l.jsx)("button",{type:"button",onClick:()=>ec(e.id),className:"text-secondary absolute top-1 right-1 hidden rounded-full bg-white/90 px-1.5 py-0.5 text-[10px] shadow group-hover:block",children:"删除"})]},e.id)}),$[77]=V,$[78]=X.artImages,$[79]=X.currentArtImageId,$[80]=ec,$[81]=ei,$[82]=T):T=$[82],$[83]===Symbol.for("react.memo_cache_sentinel")?(G=(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)("button",{type:"button",onClick:()=>er.current?.click(),className:"hover:border-brand/60 flex h-24 w-full items-center justify-center rounded-xl border border-dashed bg-white/40 text-2xl text-gray-400 hover:bg-white/80",children:"+"})}),$[83]=G):G=$[83],$[84]!==T?(H=(0,l.jsxs)("div",{className:"grid grid-cols-4 gap-3 max-sm:grid-cols-3",children:[T,G]}),$[84]=T,$[85]=H):H=$[85],$[86]!==M||$[87]!==D||$[88]!==H?(P=(0,l.jsxs)("div",{children:[U,M,D,H]}),$[86]=M,$[87]=D,$[88]=H,$[89]=P):P=$[89],$[90]!==I||$[91]!==L||$[92]!==O||$[93]!==P?(F=(0,l.jsxs)("div",{className:"space-y-6",children:[I,L,O,P]}),$[90]=I,$[91]=L,$[92]=O,$[93]=P,$[94]=F):F=$[94],F}var q=e.i(21503);function J(e,t,r){let a=r*(2-t)/2;return 0!=a&&(t=1==a?0:a<.5?t*r/(2*a):t*r/(2-2*a)),{h:e,s:t,l:a}}function K(e){var t,r,a;let l,s=function(e){let t=e.replace("#","");if(6===t.length){let e=parseInt(t.slice(0,2),16);return{r:e,g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:1}}if(8===t.length){let e=parseInt(t.slice(0,2),16),r=parseInt(t.slice(2,4),16);return{r:e,g:r,b:parseInt(t.slice(4,6),16),a:parseInt(t.slice(6,8),16)/255}}return{r:0,g:0,b:0,a:1}}(e),n=function(e,t,r){let a=Math.max(e/=255,t/=255,r/=255),l=Math.min(e,t,r),s=0,n=0,o=(a+l)/2;if(a!==l){let i=a-l;switch(n=o>.5?i/(2-a-l):i/(a+l),a){case e:s=((t-r)/i+6*(t<r))/6;break;case t:s=((r-e)/i+2)/6;break;case r:s=((e-t)/i+4)/6}}return{h:360*s,s:n,l:o}}(s.r,s.g,s.b),o=(t=n.h,r=n.s,{h:t,s:0===(l=(a=n.l)+r*Math.min(a,1-a))?0:2*(1-a/l),v:l,a:1});return{h:o.h,s:o.s,v:o.v,a:s.a}}function V(e,t,r){return Math.min(Math.max(e,t),r)}function Q(e,t=2){return Number(e.toFixed(t))}function ee({value:e,onChange:t,style:r,className:a}){let[s,n]=(0,h.useState)(!1),[o,i]=(0,h.useState)(0),[c,d]=(0,h.useState)(255),[m,u]=(0,h.useState)(255),[f,x]=(0,h.useState)(0),p=(0,h.useRef)(null),g=(0,h.useRef)(null),y=(0,h.useRef)(null),[v,j]=(0,h.useState)(!1),[w,C]=(0,h.useState)(!1),[N,_]=(0,h.useState)(!1),[S,I]=(0,h.useState)(!1),k=(0,h.useRef)(e);(0,h.useEffect)(()=>{if(e){let t=K(e);k.current=e,setTimeout(()=>{if(p.current&&g.current&&y.current){let e=p.current.getBoundingClientRect().width,r=g.current.getBoundingClientRect().width,a=g.current.getBoundingClientRect().height,l=y.current.getBoundingClientRect().width;i(t.h/360*e),u(t.s*r),x((1-t.v)*a),d(t.a*l),n(!0)}},0)}},[]);let A=(0,h.useMemo)(()=>{if(p.current){let{width:e}=p.current.getBoundingClientRect();return Q(o/e*360)}return 0},[o,p.current]),R=(0,h.useMemo)(()=>{if(y.current){let{width:e}=y.current.getBoundingClientRect();return V(Q(c/e,4),0,1)}return 1},[c,y.current]),B=(0,h.useMemo)(()=>{if(g.current){let{width:e}=g.current.getBoundingClientRect();return V(Q(m/e,4),0,1)}return 1},[m,g.current]),L=(0,h.useMemo)(()=>{if(g.current){let{height:e}=g.current.getBoundingClientRect();return 1-V(Q(f/e,4),0,1)}return 0},[f,g.current]),E=(0,h.useMemo)(()=>J(A,B,L),[A,B,L]),Y=(0,h.useMemo)(()=>(function(e,t,r,a=1){var l;let s=J(e,t,r),n=function(e,t,r){let a,l,s;if(e/=360,0===t)a=l=s=r;else{let n=(e,t,r)=>(r<0&&(r+=1),r>1&&(r-=1),r<1/6)?e+(t-e)*6*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e,o=r<.5?r*(1+t):r+t-r*t,i=2*r-o;a=n(i,o,e+1/3),l=n(i,o,e),s=n(i,o,e-1/3)}return{r:Math.round(255*a),g:Math.round(255*l),b:Math.round(255*s)}}(s.h,s.s,s.l),o=(l=n.r,"#"+[l,n.g,n.b].map(e=>Math.round(e).toString(16).padStart(2,"0")).join("")),i=V(a,0,1);if(i>=1)return o;let c=Math.round(255*i).toString(16).padStart(2,"0");return`${o}${c}`})(A,B,L,R),[A,B,L,R]);return(0,h.useEffect)(()=>{t&&Y&&Y!==k.current&&(k.current=Y,t(Y))},[Y,t]),(0,h.useEffect)(()=>{let e=e=>{if(v&&p.current){let{left:t,right:r,width:a}=p.current.getBoundingClientRect();e.pageX<t?i(0):e.pageX>r?i(a):i(e.pageX-t)}if(w&&y.current){let{left:t,right:r,width:a}=y.current.getBoundingClientRect();e.pageX<t?d(0):e.pageX>r?d(a):d(e.pageX-t)}if((N||S)&&g.current){let{left:t,top:r,right:a,bottom:l,width:s,height:n}=g.current.getBoundingClientRect();N&&(e.pageX<t?u(0):e.pageX>a?u(s):u(e.pageX-t)),S&&(e.pageY<r?x(0):e.pageY>l?x(n):x(e.pageY-r))}},t=()=>{j(!1),C(!1),_(!1),I(!1)};return(v||w||N||S)&&(document.addEventListener("mousemove",e),document.addEventListener("mouseup",t),document.addEventListener("mouseleave",t)),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t),document.removeEventListener("mouseleave",t)}},[v,w,N,S]),(0,l.jsxs)("div",{"data-color-picker-panel":!0,className:(0,b.cn)("w-56 rounded-lg border bg-white p-3 shadow-lg select-none",a,s?"opacity-100":"opacity-0"),style:r,children:[(0,l.jsx)("div",{ref:g,onMouseDown:e=>{if(0===e.button){let{left:t,top:r,width:a,height:l}=g.current.getBoundingClientRect();u(V(e.pageX-t,0,a)),x(V(e.pageY-r,0,l)),_(!0),I(!0)}},className:"relative h-32 w-full cursor-crosshair rounded-t-md",style:{backgroundColor:`hsl(${A}, 100%, 50%)`,backgroundImage:"linear-gradient(0deg, #000, transparent), linear-gradient(90deg, #fff, hsla(0, 0%, 100%, 0))"},children:(0,l.jsx)("div",{className:"absolute z-10 h-4 w-4 -translate-x-1/2 -translate-y-1/2 cursor-crosshair rounded-full border-2 border-white shadow-md",style:{backgroundColor:`hsl(${E.h} ${100*E.s}% ${100*E.l}%)`,left:m,top:f}})}),(0,l.jsx)("div",{ref:p,onMouseDown:e=>{if(0===e.button){let{left:t,width:r}=p.current.getBoundingClientRect();i(V(e.pageX-t,0,r)),j(!0)}},className:"relative flex h-5 cursor-pointer items-center",style:{background:"linear-gradient(to right, rgb(255, 0, 0), rgb(255, 255, 0), rgb(0, 255, 0), rgb(0, 255, 255), rgb(0, 0, 255), rgb(255, 0, 255), rgb(255, 0, 0))"},children:(0,l.jsx)("div",{className:"absolute h-4 w-4 -translate-x-1/2 cursor-pointer rounded-full border-2 border-white shadow-md",style:{backgroundColor:`hsl(${A} 100% 50%)`,left:o}})}),(0,l.jsx)("div",{style:{backgroundSize:"12px 12px",backgroundImage:"url(\"data:image/svg+xml,%3Csvg width='12' height='12' xmlns='http://www.w3.org/2000/svg'%3E%3Cdefs%3E%3Cpattern id='grid' width='12' height='12' patternUnits='userSpaceOnUse'%3E%3Cpath d='M 12 0 L 0 0 0 12' fill='none' stroke='%23e5e7eb' stroke-width='1'/%3E%3C/pattern%3E%3C/defs%3E%3Crect width='100%25' height='100%25' fill='url(%23grid)'/%3E%3C/svg%3E\")"},className:"rounded-b-md",children:(0,l.jsx)("div",{ref:y,onMouseDown:e=>{if(0===e.button){let{left:t,width:r}=y.current.getBoundingClientRect();d(V(e.pageX-t,0,r)),C(!0)}},className:"relative flex h-5 cursor-pointer items-center",style:{background:`linear-gradient(to right, hsl(${E.h} ${100*E.s}% ${100*E.l}% / 0%), hsl(${E.h} ${100*E.s}% ${100*E.l}% / 100%))`},children:(0,l.jsx)("div",{style:{left:c},className:"absolute h-4 w-4 -translate-x-1/2 cursor-pointer rounded-full border-2 border-white bg-white shadow-md",children:(0,l.jsx)("div",{className:"h-full w-full rounded-full",style:{backgroundColor:`hsl(${E.h} ${100*E.s}% ${100*E.l}% / ${100*R}%)`}})})})}),(0,l.jsx)("input",{type:"text",value:Y,onChange:e=>{let r=e.target.value;if(/^#[0-9A-Fa-f]{0,8}$/.test(r)&&((7===r.length||9===r.length)&&t&&t(r),7===r.length||9===r.length)){let e=K(r);if(p.current&&g.current&&y.current){let t=p.current.getBoundingClientRect().width,r=g.current.getBoundingClientRect().width,a=g.current.getBoundingClientRect().height,l=y.current.getBoundingClientRect().width;i(e.h/360*t),u(e.s*r),x((1-e.v)*a),d(e.a*l)}}},className:"w-full rounded-md border px-2 py-1 text-sm focus:ring-2 focus:ring-blue-500 focus:outline-none",placeholder:"#000000"})]})}function et(e){let t,r,a,n,o,i,c,d,m,u,f,x,p,g,y=(0,s.c)(29),{value:v,onChange:j,className:w}=e,C=void 0===v?"#000000":v,[N,_]=(0,h.useState)(!1),[S,I]=(0,h.useState)(!1),k=(0,h.useRef)(null);y[0]===Symbol.for("react.memo_cache_sentinel")?(t={top:0,left:0},y[0]=t):t=y[0];let[A,R]=(0,h.useState)(t);return y[1]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{I(!0)},a=[],y[1]=r,y[2]=a):(r=y[1],a=y[2]),(0,h.useEffect)(r,a),y[3]!==N?(n=()=>{if(N&&k.current){let e=k.current.getBoundingClientRect();R({top:e.top-240,left:e.left})}},o=[N],y[3]=N,y[4]=n,y[5]=o):(n=y[4],o=y[5]),(0,h.useEffect)(n,o),y[6]!==N?(i=()=>{if(!N)return;let e=e=>{let t=e.target;if(k.current&&!k.current.contains(t)){let e=document.querySelector("[data-color-picker-panel]");e&&!e.contains(t)&&_(!1)}};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},c=[N],y[6]=N,y[7]=i,y[8]=c):(i=y[7],c=y[8]),(0,h.useEffect)(i,c),y[9]!==N?(d=()=>_(!N),y[9]=N,y[10]=d):d=y[10],y[11]!==w?(m=(0,b.cn)("h-10 w-10 rounded-lg border-2 border-white/20 shadow-sm transition-all hover:scale-105",w),y[11]=w,y[12]=m):m=y[12],y[13]!==C?(u={backgroundColor:C},y[13]=C,y[14]=u):u=y[14],y[15]===Symbol.for("react.memo_cache_sentinel")?(f=(0,l.jsx)("span",{className:"sr-only",children:"Select color"}),y[15]=f):f=y[15],y[16]!==m||y[17]!==u||y[18]!==d?(x=(0,l.jsx)("button",{ref:k,type:"button",onClick:d,className:m,style:u,children:f}),y[16]=m,y[17]=u,y[18]=d,y[19]=x):x=y[19],y[20]!==S||y[21]!==j||y[22]!==N||y[23]!==A||y[24]!==C?(p=S&&N&&A.top>0&&(0,q.createPortal)((0,l.jsx)(ee,{value:C,onChange:j,style:{position:"fixed",top:`${A.top}px`,left:`${A.left}px`,zIndex:1e3}}),document.body),y[20]=S,y[21]=j,y[22]=N,y[23]=A,y[24]=C,y[25]=p):p=y[25],y[26]!==x||y[27]!==p?(g=(0,l.jsxs)(l.Fragment,{children:[x,p]}),y[26]=x,y[27]=p,y[28]=g):g=y[28],g}let er=(0,e.i(22436).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ea=e.i(17431).default.theme,el=[{name:"春暖",theme:{colorBrand:"#35bfab",colorBrandSecondary:"#1fc9e7",colorPrimary:"#334f52",colorSecondary:"#7b888e",colorBg:"#eeeeee",colorBorder:"#ffffff",colorCard:"#ffffff66",colorArticle:"#ffffffcc"},backgroundColors:["#EDDD62","#9EE7D1","#84D68A","#EDDD62","#88E6E5","#a7f3d0"]},{name:"秋实",theme:{colorPrimary:"#4E3F42",colorBrand:"#de4331",colorBrandSecondary:"#FCC841"},backgroundColors:["#FCC841","#DFEFFC","#DEDE92","#DE4331","#FE9750","#FCC841"]},{name:"夜晚",theme:{colorBrand:"#3a8fac",colorPrimary:"#e6e8e8",colorSecondary:"#acadae",colorBrandSecondary:"#51d0b9",colorBg:"#505050",colorBorder:"#8a8a8a5e",colorCard:"#34343466",colorArticle:"#333c"},backgroundColors:["#669590","#9ec3e7"]}];function es(e){let t,r,a,n,o,i,c,d,m,u,h,f,x,p,g,b,y,v,j,w,C,N,_,S,I,k,R,B,L,E,Y,O,U,M,D,T,G,H,P,F,$,X,W,z,Z,q,J,K,V,Q,ee,es,ei,ec,ed,em=(0,s.c)(124),{formData:eu,setFormData:eh}=e;em[0]!==eu.theme?(t=eu.theme??{},em[0]=eu.theme,em[1]=t):t=em[1];let ef=t;em[2]!==eh?(r=(e,t)=>{eh(r=>({...r,theme:{...r.theme,[e]:t}}))},em[2]=eh,em[3]=r):r=em[3];let ex=r;em[4]!==eh?(a=e=>{eh(t=>({...t,theme:{...t.theme,colorBrand:e}}))},em[4]=eh,em[5]=a):a=em[5];let ep=a;em[6]!==eu||em[7]!==eh?(n=(e,t)=>{let r=[...eu.backgroundColors];r[e]=t,eh({...eu,backgroundColors:r})},em[6]=eu,em[7]=eh,em[8]=n):n=em[8];let eg=n,eb=eo;em[9]!==eh?(o=()=>{let e=Array.from({length:Math.floor(5*Math.random())+4},()=>eb()),t=eb();eh(r=>({...r,backgroundColors:e,theme:{...r.theme,colorBrand:t}}))},em[9]=eh,em[10]=o):o=em[10];let ey=o;em[11]!==eu||em[12]!==eh?(i=()=>{eh({...eu,backgroundColors:[...eu.backgroundColors,"#EDDD62"]})},em[11]=eu,em[12]=eh,em[13]=i):i=em[13];let ev=i;em[14]!==eu||em[15]!==eh?(c=e=>{if(eu.backgroundColors.length>1){let t=eu.backgroundColors.filter((t,r)=>r!==e);eh({...eu,backgroundColors:t})}},em[14]=eu,em[15]=eh,em[16]=c):c=em[16];let ej=c;em[17]!==eh?(d=e=>{eh(t=>({...t,backgroundColors:[...e.backgroundColors],theme:{...t.theme,...e.theme}}))},em[17]=eh,em[18]=d):d=em[18];let ew=d;em[19]===Symbol.for("react.memo_cache_sentinel")?(m=(0,l.jsx)("label",{className:"mb-2 block text-sm font-medium",children:"基础颜色"}),em[19]=m):m=em[19];let eC=eu.theme?.colorBrand??"#35bfab";em[20]!==ep||em[21]!==eC?(u=(0,l.jsx)(et,{value:eC,onChange:ep}),em[20]=ep,em[21]=eC,em[22]=u):u=em[22],em[23]===Symbol.for("react.memo_cache_sentinel")?(h=(0,l.jsx)("span",{className:"text-xs",children:"主题色"}),em[23]=h):h=em[23],em[24]!==u?(f=(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[u,h]}),em[24]=u,em[25]=f):f=em[25];let eN=ef.colorBrandSecondary??ea.colorBrandSecondary;em[26]!==ex?(x=e=>ex("colorBrandSecondary",e),em[26]=ex,em[27]=x):x=em[27],em[28]!==eN||em[29]!==x?(p=(0,l.jsx)(et,{value:eN,onChange:x}),em[28]=eN,em[29]=x,em[30]=p):p=em[30],em[31]===Symbol.for("react.memo_cache_sentinel")?(g=(0,l.jsx)("span",{className:"text-xs",children:"次级主题色"}),em[31]=g):g=em[31],em[32]!==p?(b=(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[p,g]}),em[32]=p,em[33]=b):b=em[33];let e_=ef.colorPrimary??ea.colorPrimary;em[34]!==ex?(y=e=>ex("colorPrimary",e),em[34]=ex,em[35]=y):y=em[35],em[36]!==e_||em[37]!==y?(v=(0,l.jsx)(et,{value:e_,onChange:y}),em[36]=e_,em[37]=y,em[38]=v):v=em[38],em[39]===Symbol.for("react.memo_cache_sentinel")?(j=(0,l.jsx)("span",{className:"text-xs",children:"主色"}),em[39]=j):j=em[39],em[40]!==v?(w=(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[v,j]}),em[40]=v,em[41]=w):w=em[41];let eS=ef.colorSecondary??ea.colorSecondary;em[42]!==ex?(C=e=>ex("colorSecondary",e),em[42]=ex,em[43]=C):C=em[43],em[44]!==eS||em[45]!==C?(N=(0,l.jsx)(et,{value:eS,onChange:C}),em[44]=eS,em[45]=C,em[46]=N):N=em[46],em[47]===Symbol.for("react.memo_cache_sentinel")?(_=(0,l.jsx)("span",{className:"text-xs",children:"次色"}),em[47]=_):_=em[47],em[48]!==N?(S=(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[N,_]}),em[48]=N,em[49]=S):S=em[49];let eI=ef.colorBg??ea.colorBg;em[50]!==ex?(I=e=>ex("colorBg",e),em[50]=ex,em[51]=I):I=em[51],em[52]!==eI||em[53]!==I?(k=(0,l.jsx)(et,{value:eI,onChange:I}),em[52]=eI,em[53]=I,em[54]=k):k=em[54],em[55]===Symbol.for("react.memo_cache_sentinel")?(R=(0,l.jsx)("span",{className:"text-xs",children:"背景色"}),em[55]=R):R=em[55],em[56]!==k?(B=(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[k,R]}),em[56]=k,em[57]=B):B=em[57];let ek=ef.colorBorder??ea.colorBorder;em[58]!==ex?(L=e=>ex("colorBorder",e),em[58]=ex,em[59]=L):L=em[59],em[60]!==ek||em[61]!==L?(E=(0,l.jsx)(et,{value:ek,onChange:L}),em[60]=ek,em[61]=L,em[62]=E):E=em[62],em[63]===Symbol.for("react.memo_cache_sentinel")?(Y=(0,l.jsx)("span",{className:"text-xs",children:"边框色"}),em[63]=Y):Y=em[63],em[64]!==E?(O=(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[E,Y]}),em[64]=E,em[65]=O):O=em[65];let eA=ef.colorCard??ea.colorCard;em[66]!==ex?(U=e=>ex("colorCard",e),em[66]=ex,em[67]=U):U=em[67],em[68]!==eA||em[69]!==U?(M=(0,l.jsx)(et,{value:eA,onChange:U}),em[68]=eA,em[69]=U,em[70]=M):M=em[70],em[71]===Symbol.for("react.memo_cache_sentinel")?(D=(0,l.jsx)("span",{className:"text-xs",children:"卡片色"}),em[71]=D):D=em[71],em[72]!==M?(T=(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[M,D]}),em[72]=M,em[73]=T):T=em[73];let eR=ef.colorArticle??ea.colorArticle;if(em[74]!==ex?(G=e=>ex("colorArticle",e),em[74]=ex,em[75]=G):G=em[75],em[76]!==eR||em[77]!==G?(H=(0,l.jsx)(et,{value:eR,onChange:G}),em[76]=eR,em[77]=G,em[78]=H):H=em[78],em[79]===Symbol.for("react.memo_cache_sentinel")?(P=(0,l.jsx)("span",{className:"text-xs",children:"文章背景"}),em[79]=P):P=em[79],em[80]!==H?(F=(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[H,P]}),em[80]=H,em[81]=F):F=em[81],em[82]!==f||em[83]!==b||em[84]!==w||em[85]!==S||em[86]!==B||em[87]!==O||em[88]!==T||em[89]!==F?($=(0,l.jsxs)("div",{children:[m,(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[f,b,w,S,B,O,T,F]})]}),em[82]=f,em[83]=b,em[84]=w,em[85]=S,em[86]=B,em[87]=O,em[88]=T,em[89]=F,em[90]=$):$=em[90],em[91]===Symbol.for("react.memo_cache_sentinel")?(X=(0,l.jsx)("label",{className:"block text-sm font-medium",children:"背景颜色"}),em[91]=X):X=em[91],em[92]===Symbol.for("react.memo_cache_sentinel")?(W={scale:1.05},z={scale:.95},em[92]=W,em[93]=z):(W=em[92],z=em[93]),em[94]!==ey?(Z=(0,l.jsx)(A.motion.button,{whileHover:W,whileTap:z,onClick:ey,className:"rounded-lg border bg-white/60 px-3 py-1 text-xs whitespace-nowrap",children:"随机配色"}),em[94]=ey,em[95]=Z):Z=em[95],em[96]===Symbol.for("react.memo_cache_sentinel")?(q={scale:1.05},J={scale:.95},em[96]=q,em[97]=J):(q=em[96],J=em[97]),em[98]!==ev?(K=(0,l.jsx)(A.motion.button,{whileHover:q,whileTap:J,onClick:ev,className:"rounded-lg border bg-white/60 px-3 py-1 text-xs whitespace-nowrap",children:"+ 添加颜色"}),em[98]=ev,em[99]=K):K=em[99],em[100]!==Z||em[101]!==K?(V=(0,l.jsxs)("div",{className:"mb-2 flex items-center justify-between gap-3",children:[X,(0,l.jsxs)("div",{className:"flex gap-2",children:[Z,K]})]}),em[100]=Z,em[101]=K,em[102]=V):V=em[102],em[103]!==eu.backgroundColors||em[104]!==eg||em[105]!==ej){let e;em[107]!==eu.backgroundColors.length||em[108]!==eg||em[109]!==ej?(e=(e,t)=>(0,l.jsx)("div",{className:"flex items-center gap-2",children:(0,l.jsxs)("div",{className:"group relative",children:[(0,l.jsx)(et,{value:e,onChange:e=>eg(t,e)}),eu.backgroundColors.length>1&&(0,l.jsx)("button",{onClick:()=>ej(t),className:"text-secondary absolute -top-1 -right-2 rounded-lg border bg-white/60 text-xs whitespace-nowrap opacity-0 transition-opacity group-hover:opacity-100",children:(0,l.jsx)(er,{className:"size-3"})})]})},t),em[107]=eu.backgroundColors.length,em[108]=eg,em[109]=ej,em[110]=e):e=em[110],Q=eu.backgroundColors.map(e),em[103]=eu.backgroundColors,em[104]=eg,em[105]=ej,em[106]=Q}else Q=em[106];return em[111]!==Q?(ee=(0,l.jsx)("div",{className:"flex gap-3",children:Q}),em[111]=Q,em[112]=ee):ee=em[112],em[113]!==V||em[114]!==ee?(es=(0,l.jsxs)("div",{children:[V,ee]}),em[113]=V,em[114]=ee,em[115]=es):es=em[115],em[116]!==ew?(ei=el.map(e=>(0,l.jsxs)("button",{onClick:()=>ew(e),className:"flex items-center gap-3 rounded-lg border bg-white/60 p-3 transition-colors hover:bg-white/80",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("div",{className:"h-10 w-10 rounded-lg border-2 border-white/20 shadow-sm",style:{backgroundColor:e.theme.colorBrand??ea.colorBrand}}),e.backgroundColors.map(en)]}),(0,l.jsx)("span",{className:"text-sm font-medium whitespace-nowrap",children:e.name})]},e.name)),em[116]=ew,em[117]=ei):ei=em[117],em[118]!==ei?(ec=(0,l.jsx)("div",{className:"flex flex-col gap-3",children:ei}),em[118]=ei,em[119]=ec):ec=em[119],em[120]!==$||em[121]!==es||em[122]!==ec?(ed=(0,l.jsxs)("div",{className:"space-y-6",children:[$,es,ec]}),em[120]=$,em[121]=es,em[122]=ec,em[123]=ed):ed=em[123],ed}function en(e,t){return(0,l.jsx)("div",{className:"h-10 w-10 rounded-lg border-2 border-white/20 shadow-sm",style:{backgroundColor:e}},t)}function eo(){let e=ec;return`#${[e(),e(),e()].map(ei).join("").toUpperCase()}`}function ei(e){return e.toString(16).padStart(2,"0")}function ec(){return Math.floor(256*Math.random())}let ed={artCard:"首图",hiCard:"中心",clockCard:"时钟",calendarCard:"日历",musicCard:"音乐",socialButtons:"联系",shareCard:"分享",articleCard:"文章",writeButtons:"写作",navCard:"导航"};function em(e){let t,r,a,n,o=(0,s.c)(7),{cardStylesData:i,setCardStylesData:c}=e;return o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.jsx)("div",{className:"text-secondary text-sm",children:"（偏移代表相对平面中心的偏移，比如 (0,0) 代表卡牌左上角为屏幕中心）"}),o[0]=t):t=o[0],o[1]===Symbol.for("react.memo_cache_sentinel")?(r=(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"border-b text-xs text-gray-500",children:[(0,l.jsx)("th",{className:"px-3 py-2 text-left font-medium",children:"卡片"}),(0,l.jsx)("th",{className:"px-3 py-2 text-left font-medium",children:"宽度"}),(0,l.jsx)("th",{className:"px-3 py-2 text-left font-medium",children:"高度"}),(0,l.jsx)("th",{className:"px-3 py-2 text-left font-medium",children:"显示顺序"}),(0,l.jsx)("th",{className:"px-3 py-2 text-left font-medium",children:"横向偏移"}),(0,l.jsx)("th",{className:"px-3 py-2 text-left font-medium",children:"纵向偏移"})]})}),o[1]=r):r=o[1],o[2]!==i?(a=Object.entries(i),o[2]=i,o[3]=a):a=o[3],o[4]!==c||o[5]!==a?(n=(0,l.jsxs)("div",{className:"overflow-x-auto",children:[t,(0,l.jsxs)("table",{className:"mt-3 w-full border-collapse text-sm",children:[r,(0,l.jsx)("tbody",{children:a.map(e=>{let[t,r]=e;return(0,l.jsxs)("tr",{className:"border-b last:border-0",children:[(0,l.jsx)("td",{className:"px-3 py-2 align-middle whitespace-nowrap",children:ed[t]??t.replace(/([A-Z])/g," $1").trim()}),(0,l.jsx)("td",{className:"px-3 py-2",children:void 0!==r.width?(0,l.jsx)("input",{type:"number",value:r.width,onChange:e=>c(r=>({...r,[t]:{...r[t],width:parseInt(e.target.value)||0}})),className:"no-spinner w-full rounded-lg border bg-secondary/10 px-3 py-1.5 text-xs"}):(0,l.jsx)("span",{className:"text-xs text-gray-400",children:"-"})}),(0,l.jsx)("td",{className:"px-3 py-2",children:void 0!==r.height?(0,l.jsx)("input",{type:"number",value:r.height,onChange:e=>c(r=>({...r,[t]:{...r[t],height:parseInt(e.target.value)||0}})),className:"no-spinner w-full rounded-lg border bg-secondary/10 px-3 py-1.5 text-xs"}):(0,l.jsx)("span",{className:"text-xs text-gray-400",children:"-"})}),(0,l.jsx)("td",{className:"px-3 py-2",children:(0,l.jsx)("input",{type:"number",value:r.order,onChange:e=>c(r=>({...r,[t]:{...r[t],order:parseInt(e.target.value)||0}})),className:"w-full rounded-lg border bg-secondary/10 px-3 py-1.5 text-xs"})}),(0,l.jsx)("td",{className:"px-3 py-2",children:(0,l.jsx)("input",{type:"number",value:r.offsetX??"",placeholder:"null",onChange:e=>{let r=""===e.target.value?null:parseInt(e.target.value)||0;c(e=>({...e,[t]:{...e[t],offsetX:r}}))},className:"no-spinner w-full rounded-lg border bg-secondary/10 px-3 py-1.5 text-xs"})}),(0,l.jsx)("td",{className:"px-3 py-2",children:(0,l.jsx)("input",{type:"number",value:r.offsetY??"",placeholder:"null",onChange:e=>{let r=""===e.target.value?null:parseInt(e.target.value)||0;c(e=>({...e,[t]:{...e[t],offsetY:r}}))},className:"no-spinner w-full rounded-lg border bg-secondary/10 px-3 py-1.5 text-xs"})})]},t)})})]})]}),o[4]=c,o[5]=a,o[6]=n):n=o[6],n}function eu({open:e,onClose:t}){let{isAuth:r,setPrivateKey:a}=(0,F.useAuthStore)(),{siteContent:s,setSiteContent:n,cardStyles:o,setCardStyles:c,regenerateBubbles:d}=(0,i.useConfigStore)(),[m,u]=(0,h.useState)(s),[f,x]=(0,h.useState)(o),[p,g]=(0,h.useState)(s),[b,y]=(0,h.useState)(o),[v,j]=(0,h.useState)(!1),[w,C]=(0,h.useState)("site"),N=(0,h.useRef)(null),[_,S]=(0,h.useState)(null),[I,k]=(0,h.useState)(null),[B,L]=(0,h.useState)({});(0,h.useEffect)(()=>{if(e){let e={...s},t={...o};u(e),x(t),g(e),y(t),S(null),k(null),L({}),C("site")}},[e,s,o]),(0,h.useEffect)(()=>()=>{_?.type==="file"&&URL.revokeObjectURL(_.previewUrl),I?.type==="file"&&URL.revokeObjectURL(I.previewUrl),Object.values(B).forEach(e=>{"file"===e.type&&URL.revokeObjectURL(e.previewUrl)})},[_,I,B]);let E=async e=>{try{let t=await e.text();a(t),await Y()}catch(e){console.error("Failed to read private key:",e),R.toast.error("读取密钥文件失败")}},Y=async()=>{j(!0);try{let e=p.artImages??[],r=m.artImages??[],a=e.filter(e=>!r.some(t=>t.id===e.id));await z(m,f,_,I,B,a),n(m),c(f),U(m.theme),S(null),k(null),L({}),t()}catch(e){console.error("Failed to save:",e),R.toast.error(`保存失败: ${e?.message||"未知错误"}`)}finally{j(!1)}},O=()=>{if(_?.type==="file"&&URL.revokeObjectURL(_.previewUrl),I?.type==="file"&&URL.revokeObjectURL(I.previewUrl),Object.values(B).forEach(e=>{"file"===e.type&&URL.revokeObjectURL(e.previewUrl)}),n(p),c(b),d(),"undefined"!=typeof document){document.title=p.meta.title;let e=document.querySelector('meta[name="description"]');e&&e.setAttribute("content",p.meta.description)}U(p.theme),S(null),k(null),L({}),t()},U=e=>{if("undefined"==typeof document||!e)return;let{colorBrand:t,colorBrandSecondary:r,colorPrimary:a,colorSecondary:l,colorBg:s,colorBorder:n,colorCard:o,colorArticle:i}=e,c=document.documentElement;t&&c.style.setProperty("--color-brand",t),r&&c.style.setProperty("--color-brand-secondary",r),a&&c.style.setProperty("--color-primary",a),l&&c.style.setProperty("--color-secondary",l),s&&c.style.setProperty("--color-bg",s),n&&c.style.setProperty("--color-border",n),o&&c.style.setProperty("--color-card",o),i&&c.style.setProperty("--color-article",i)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("input",{ref:N,type:"file",accept:".pem",className:"hidden",onChange:async e=>{let t=e.target.files?.[0];t&&await E(t),e.currentTarget&&(e.currentTarget.value="")}}),(0,l.jsxs)(P.DialogModal,{open:e,onClose:O,className:"card scrollbar-none max-h-[90vh] min-h-[600px] w-[640px] overflow-y-auto",children:[(0,l.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,l.jsx)("div",{className:"flex gap-1",children:[{id:"site",label:"网站设置"},{id:"color",label:"色彩配置"},{id:"layout",label:"首页布局"}].map(e=>(0,l.jsxs)("button",{onClick:()=>C(e.id),className:`relative px-4 py-2 text-sm font-medium transition-colors ${w===e.id?"text-brand":"text-secondary hover:text-primary"}`,children:[e.label,w===e.id&&(0,l.jsx)("div",{className:"bg-brand absolute right-0 bottom-0 left-0 h-0.5"})]},e.id))}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)(A.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{if(console.log("formData",m),n(m),c(f),d(),"undefined"!=typeof document){document.title=m.meta.title;let e=document.querySelector('meta[name="description"]');e&&e.setAttribute("content",m.meta.description)}U(m.theme),t()},className:"rounded-xl border bg-white/60 px-6 py-2 text-sm",children:"预览"}),(0,l.jsx)(A.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:O,disabled:v,className:"rounded-xl border bg-white/60 px-6 py-2 text-sm",children:"取消"}),(0,l.jsx)(A.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{r?Y():N.current?.click()},disabled:v,className:"brand-btn px-6",children:v?"保存中...":r?"保存":"导入密钥"})]})]}),(0,l.jsxs)("div",{className:"min-h-[200px]",children:["site"===w&&(0,l.jsx)(Z,{formData:m,setFormData:u,faviconItem:_,setFaviconItem:S,avatarItem:I,setAvatarItem:k,artImageUploads:B,setArtImageUploads:L}),"color"===w&&(0,l.jsx)(es,{formData:m,setFormData:u}),"layout"===w&&(0,l.jsx)(em,{cardStylesData:f,setCardStylesData:x})]})]})]})}function eh(){let e,t,r,a,o,c,u,f,x,p,g,b,y,v,j,w,C,N,_,S,I,k,R=(0,s.c)(32),L=(0,n.useCenterStore)(),{cardStyles:E}=(0,i.useConfigStore)(),{maxSM:Y}=(0,B.useSize)(),O=(0,m.useRouter)(),[U,M]=(0,h.useState)(!1),D=E.writeButtons,G=E.hiCard,P=E.clockCard,[F,$]=(0,h.useState)(!1);if(R[0]!==D.order?(e=()=>{setTimeout(()=>$(!0),D.order*d.ANIMATION_DELAY*1e3)},t=[D.order],R[0]=D.order,R[1]=e,R[2]=t):(e=R[1],t=R[2]),(0,h.useEffect)(e,t),Y||!F)return null;let X=null!==D.offsetX?L.x+D.offsetX:L.x+d.CARD_SPACING+G.width/2,W=null!==D.offsetY?L.y+D.offsetY:L.y-P.offset-D.height-d.CARD_SPACING/2-P.height;return R[3]!==X||R[4]!==W?(r={left:X,top:W},a={left:X,top:W},R[3]=X,R[4]=W,R[5]=r,R[6]=a):(r=R[5],a=R[6]),R[7]!==O?(o=()=>O.push("/write"),R[7]=O,R[8]=o):o=R[8],R[9]===Symbol.for("react.memo_cache_sentinel")?(c={opacity:0,scale:.6},u={opacity:1,scale:1},f={scale:1.05},x={scale:.95},p={boxShadow:"inset 0 0 12px rgba(255, 255, 255, 0.4)"},R[9]=c,R[10]=u,R[11]=f,R[12]=x,R[13]=p):(c=R[9],u=R[10],f=R[11],x=R[12],p=R[13]),R[14]===Symbol.for("react.memo_cache_sentinel")?(g=(0,l.jsx)(T.default,{}),b=(0,l.jsx)("span",{children:"写文章"}),R[14]=g,R[15]=b):(g=R[14],b=R[15]),R[16]!==o?(y=(0,l.jsxs)(A.motion.button,{onClick:o,initial:c,animate:u,whileHover:f,whileTap:x,style:p,className:"brand-btn whitespace-nowrap",children:[g,b]}),R[16]=o,R[17]=y):y=R[17],R[18]===Symbol.for("react.memo_cache_sentinel")?(v={opacity:0,scale:.6},j={opacity:1,scale:1},w={scale:1.05},C={scale:.95},N=()=>M(!0),R[18]=v,R[19]=j,R[20]=w,R[21]=C,R[22]=N):(v=R[18],j=R[19],w=R[20],C=R[21],N=R[22]),R[23]===Symbol.for("react.memo_cache_sentinel")?(_=(0,l.jsx)(A.motion.button,{initial:v,animate:j,whileHover:w,whileTap:C,onClick:N,className:"p-2",children:(0,l.jsx)(H,{className:"h-6 w-6"})}),R[23]=_):_=R[23],R[24]===Symbol.for("react.memo_cache_sentinel")?(S=()=>M(!1),R[24]=S):S=R[24],R[25]!==U?(I=(0,l.jsx)(eu,{open:U,onClose:S}),R[25]=U,R[26]=I):I=R[26],R[27]!==y||R[28]!==r||R[29]!==I||R[30]!==a?(k=(0,l.jsxs)(A.motion.div,{initial:r,animate:a,className:"absolute flex items-center gap-4",children:[y,_,I]}),R[27]=y,R[28]=r,R[29]=I,R[30]=a,R[31]=k):k=R[31],k}var ef=e.i(99533);function ex(){let e,t,r,a,o=(0,s.c)(10),c=(0,n.useCenterStore)(),{cardStyles:m}=(0,i.useConfigStore)(),u=m.hiCard,h=m.socialButtons,f=m.musicCard,x=m.shareCard,p=c.x+u.width/2-h.width+x.width+d.CARD_SPACING,g=c.y+u.height/2+d.CARD_SPACING+h.height+d.CARD_SPACING+f.height+d.CARD_SPACING;o[0]!==p||o[1]!==g?(e={left:p,top:g},t={left:p,top:g},o[0]=p,o[1]=g,o[2]=e,o[3]=t):(e=o[2],t=o[3]);let b=m.shareCard.order*d.ANIMATION_DELAY*1e3;return o[4]!==b?(r=(0,l.jsx)(ef.default,{delay:b}),o[4]=b,o[5]=r):r=o[5],o[6]!==e||o[7]!==t||o[8]!==r?(a=(0,l.jsx)(A.motion.div,{className:"absolute max-sm:static",initial:e,animate:t,children:r}),o[6]=e,o[7]=t,o[8]=r,o[9]=a):a=o[9],a}function ep(){let e,t,r,a,n,o,i,d,m,h,x,p=(0,s.c)(21),{maxSM:g}=(0,B.useSize)();return p[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(u,{}),t=(0,l.jsx)(c,{}),p[0]=e,p[1]=t):(e=p[0],t=p[1]),p[2]!==g?(r=!g&&(0,l.jsx)(f,{}),p[2]=g,p[3]=r):r=p[3],p[4]!==g?(a=!g&&(0,l.jsx)(y,{}),p[4]=g,p[5]=a):a=p[5],p[6]!==g?(n=!g&&(0,l.jsx)(N,{}),p[6]=g,p[7]=n):n=p[7],p[8]===Symbol.for("react.memo_cache_sentinel")?(o=(0,l.jsx)(E,{}),p[8]=o):o=p[8],p[9]!==g?(i=!g&&(0,l.jsx)(U,{}),p[9]=g,p[10]=i):i=p[10],p[11]===Symbol.for("react.memo_cache_sentinel")?(d=(0,l.jsx)(D,{}),p[11]=d):d=p[11],p[12]!==g?(m=!g&&(0,l.jsx)(eh,{}),p[12]=g,p[13]=m):m=p[13],p[14]===Symbol.for("react.memo_cache_sentinel")?(h=(0,l.jsx)(ex,{}),p[14]=h):h=p[14],p[15]!==r||p[16]!==a||p[17]!==n||p[18]!==i||p[19]!==m?(x=(0,l.jsxs)("div",{className:"max-sm:flex max-sm:flex-col max-sm:items-center max-sm:gap-6 max-sm:pt-28 max-sm:pb-20",children:[e,t,r,a,n,o,i,d,m,h]}),p[15]=r,p[16]=a,p[17]=n,p[18]=i,p[19]=m,p[20]=x):x=p[20],x}e.s(["default",()=>ep],10849)}]);