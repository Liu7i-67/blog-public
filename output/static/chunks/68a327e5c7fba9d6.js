(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,66752,e=>{e.v([{name:"Pixel Motion",year:2025,description:"网页端像素绘画工具，支持组件化画布，多画布同时绘画，色彩变量",image:"https://pixel-motion.yysuni.com/favicon.svg",url:"https://pixel-motion.yysuni.com/",tags:["像素画","React","Figma","阮周刊"]},{name:"Path Motion",year:2025,description:"在线 svg path 工具，针对 path 绘制、压缩、运动等功能",image:"https://path-motion.yysuni.com/favicon.svg",url:"https://path-motion.yysuni.com/canvas",tags:["SVG","Path","Motion","阮周刊"],github:"https://github.com/YYsuni/path-motion"},{name:"JSON Viewer",year:2023,description:"React 的 JSON 查看/编辑组件，组件的实现方式依赖于 html 原生逻辑，比较轻量化。第二个用心的组件，学习了前辈的包装方式，介绍方式，网站样式。用户也慢慢多了起来。",image:"https://jv.yysuni.com/favicon.svg",url:"https://jv.yysuni.com/",tags:["React","JSON","Viewer","阮周刊"],github:"https://github.com/YYsuni/react18-json-view",npm:"https://www.npmjs.com/package/react18-json-view"},{name:"第一版 Blog 网站",year:2023,description:"最开始是觉得掘金这种网站写文章挺好的。后面还是想写一个自己网站，体现自己的风格。MDX 还可以自己写组件到 blog，直接交互，多好。。。没想到为以后埋下了坑。",image:"https://blog-archive.yysuni.com/favicons/android-chrome-512x512.png",url:"https://blog-archive.yysuni.com/",tags:["Next.js","MDX"]},{name:"Blockies",year:2023,description:" Blockies React组件，SVG 实现，用于生成区块链地址的图标。这是我的第一个有人用的组件，虽然人不多",image:"/images/blockies.svg",url:"https://blockies-react-svg.vercel.app/",tags:["React","SVG","Blockies"],github:"https://github.com/YYsuni/blockies-react-svg",npm:"https://www.npmjs.com/package/blockies-react-svg"},{name:"Vue3 组件库",year:2021,description:"比较让人怀念的一个组件库了，那个时候每个前端程序员都想做一套自己的组件库，我也是。写出来的时候特别让自己开心，觉得好看，舒服。那时也第一次学会免费的 github/gitee pages 部署页面，但也倒腾半天，现在用 vercel 重新上线放着吧。",image:"/images/vue-kit.webp",url:"http://archive-suni.vercel.app/#/",tags:["Vue","Library"],github:"https://github.com/YYsuni/archive-suni"}])},63936,e=>{"use strict";var t=e.i(58190),a=e.i(35311),r=e.i(7281),s=e.i(95403),l=e.i(52434),n=e.i(86087),i=e.i(75157),o=e.i(99151),c=e.i(52186),u=e.i(72412);function d(e){let r,n,i,o,d,m,p,x,g,h,b,y,f,v,j,N,w,C=(0,l.c)(36),{currentImage:S,onClose:k,onSubmit:R}=e,[U,_]=(0,a.useState)(S||""),[O,G]=(0,a.useState)(null),I=(0,a.useRef)(null);C[0]===Symbol.for("react.memo_cache_sentinel")?(r=e=>{let t=e.target.files?.[0];if(!t)return;if(!t.type.startsWith("image/"))return void s.toast.error("请选择图片文件");let a=URL.createObjectURL(t);G({file:t,previewUrl:a}),_("")},C[0]=r):r=C[0];let T=r;C[1]!==S||C[2]!==k||C[3]!==R||C[4]!==O||C[5]!==U?(n=e=>{if(e.preventDefault(),O)R({type:"file",file:O.file,previewUrl:O.previewUrl});else{if(!U.trim())return void s.toast.error("请上传图片或输入 URL");R({type:"url",url:U.trim()})}G(null),_(S||""),k()},C[1]=S,C[2]=k,C[3]=R,C[4]=O,C[5]=U,C[6]=n):n=C[6];let B=n;C[7]!==S||C[8]!==k||C[9]!==O?(i=()=>{O&&URL.revokeObjectURL(O.previewUrl),G(null),_(S||""),k()},C[7]=S,C[8]=k,C[9]=O,C[10]=i):i=C[10];let F=i;return C[11]===Symbol.for("react.memo_cache_sentinel")?(o=(0,t.jsx)("h2",{className:"mb-4 text-xl font-bold",children:"选择图片"}),C[11]=o):o=C[11],C[12]===Symbol.for("react.memo_cache_sentinel")?(d=(0,t.jsx)("label",{className:"text-secondary mb-2 block text-sm font-medium",children:"上传图片"}),m=(0,t.jsx)("input",{ref:I,type:"file",accept:"image/*",className:"hidden",onChange:T}),p=()=>I.current?.click(),C[12]=d,C[13]=m,C[14]=p):(d=C[12],m=C[13],p=C[14]),C[15]!==O?(x=(0,t.jsxs)("div",{children:[d,m,(0,t.jsx)("div",{onClick:p,className:"mx-auto flex h-32 w-32 cursor-pointer items-center justify-center rounded-xl border border-gray-300 bg-secondary/10 transition-colors hover:bg-gray-200",children:O?(0,t.jsx)("img",{src:O.previewUrl,alt:"preview",className:"h-full w-full rounded-xl object-cover"}):(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(c.Plus,{className:"text-secondary mx-auto mb-1 h-8 w-8"}),(0,t.jsx)("p",{className:"text-secondary text-xs",children:"点击上传图片"})]})})]}),C[15]=O,C[16]=x):x=C[16],C[17]===Symbol.for("react.memo_cache_sentinel")?(g=(0,t.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,t.jsx)("div",{className:"w-full border-t border-gray-300"})}),C[17]=g):g=C[17],C[18]===Symbol.for("react.memo_cache_sentinel")?(h=(0,t.jsxs)("div",{className:"relative",children:[g,(0,t.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,t.jsx)("span",{className:"text-secondary rounded-lg bg-white px-4 py-1",children:"或"})})]}),b=(0,t.jsx)("label",{className:"text-secondary mb-2 block text-sm font-medium",children:"图片 URL"}),C[18]=h,C[19]=b):(h=C[18],b=C[19]),C[20]!==O?(y=e=>{_(e.target.value),O&&(URL.revokeObjectURL(O.previewUrl),G(null))},C[20]=O,C[21]=y):y=C[21],C[22]!==y||C[23]!==U?(f=(0,t.jsxs)("div",{children:[b,(0,t.jsx)("input",{type:"url",value:U,onChange:y,placeholder:"https://example.com/image.png",className:"focus:ring-brand w-full rounded-lg border border-gray-300 bg-gray-200 px-4 py-2 focus:ring-2 focus:outline-none"})]}),C[22]=y,C[23]=U,C[24]=f):f=C[24],C[25]===Symbol.for("react.memo_cache_sentinel")?(v=(0,t.jsx)("button",{type:"submit",className:"brand-btn flex-1 justify-center rounded-lg px-6 py-2.5",children:"确认"}),C[25]=v):v=C[25],C[26]!==F?(j=(0,t.jsxs)("div",{className:"flex gap-3 pt-2",children:[v,(0,t.jsx)("button",{type:"button",onClick:F,className:"flex-1 rounded-lg border border-gray-300 bg-white px-6 py-2.5 transition-colors hover:bg-gray-50",children:"取消"})]}),C[26]=F,C[27]=j):j=C[27],C[28]!==B||C[29]!==f||C[30]!==j||C[31]!==x?(N=(0,t.jsxs)("form",{onSubmit:B,className:"space-y-4",children:[x,h,f,j]}),C[28]=B,C[29]=f,C[30]=j,C[31]=x,C[32]=N):N=C[32],C[33]!==F||C[34]!==N?(w=(0,t.jsxs)(u.DialogModal,{open:!0,onClose:F,className:"card w-md",children:[o,N]}),C[33]=F,C[34]=N,C[35]=w):w=C[35],w}function m(e){let s,c,u,m,h,b,y,f,v,j,N,w,C,S,k,R,U,_,O,G,I,T,B,F,H,E,P,M=(0,l.c)(90),{project:L,isEditMode:W,onUpdate:Y,onDelete:V}=e,D=void 0!==W&&W,[$,A]=(0,a.useState)(!1),{maxSM:z}=(0,o.useSize)(),[J,K]=(0,a.useState)(L),[X,q]=(0,a.useState)(!1),[Q,Z]=(0,a.useState)(null);M[0]!==Q||M[1]!==J||M[2]!==Y||M[3]!==L?(s=(e,t)=>{let a={...J,[e]:t};K(a),Y?.(a,L,Q||void 0)},M[0]=Q,M[1]=J,M[2]=Y,M[3]=L,M[4]=s):s=M[4];let ee=s;M[5]!==J||M[6]!==Y||M[7]!==L?(c=e=>{Z(e);let t="url"===e.type?e.url:e.previewUrl,a={...J,image:t};K(a),Y?.(a,L,e)},M[5]=J,M[6]=Y,M[7]=L,M[8]=c):c=M[8];let et=c;M[9]!==ee?(u=e=>{ee("tags",e.split(",").map(g).filter(x))},M[9]=ee,M[10]=u):u=M[10];let ea=u;M[11]!==L?(m=()=>{K(L),A(!1),Z(null)},M[11]=L,M[12]=m):m=M[12];let er=m,es=D&&$;M[13]===Symbol.for("react.memo_cache_sentinel")?(h={opacity:0,scale:.9},M[13]=h):h=M[13],M[14]!==z?(b=z?{animate:{opacity:1,scale:1}}:{whileInView:{opacity:1,scale:1}},M[14]=z,M[15]=b):b=M[15],M[16]!==er||M[17]!==D||M[18]!==$||M[19]!==V?(y=D&&(0,t.jsx)("div",{className:"absolute top-3 right-3 z-10 flex gap-2",children:$?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:er,className:"rounded-lg px-2 py-1.5 text-xs text-gray-400 transition-colors hover:text-gray-600",children:"取消"}),(0,t.jsx)("button",{onClick:()=>A(!1),className:"rounded-lg px-2 py-1.5 text-xs text-blue-400 transition-colors hover:text-blue-600",children:"完成"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>A(!0),className:"rounded-lg px-2 py-1.5 text-xs text-blue-400 transition-colors hover:text-blue-600",children:"编辑"}),(0,t.jsx)("button",{onClick:V,className:"rounded-lg px-2 py-1.5 text-xs text-red-400 transition-colors hover:text-red-600",children:"删除"})]})}),M[16]=er,M[17]=D,M[18]=$,M[19]=V,M[20]=y):y=M[20];let el=J.image,en=J.name,ei=es&&"cursor-pointer";M[21]!==ei?(f=(0,i.cn)("h-16 w-16 shrink-0 rounded-xl object-cover",ei),M[21]=ei,M[22]=f):f=M[22],M[23]!==es?(v=()=>es&&q(!0),M[23]=es,M[24]=v):v=M[24],M[25]!==J.image||M[26]!==J.name||M[27]!==f||M[28]!==v?(j=(0,t.jsx)("img",{src:el,alt:en,className:f,onClick:v}),M[25]=J.image,M[26]=J.name,M[27]=f,M[28]=v,M[29]=j):j=M[29],M[30]!==es?(N=es&&(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center rounded-xl bg-black/40 opacity-0 transition-opacity group-hover:opacity-100",children:(0,t.jsx)("span",{className:"text-xs text-white",children:"更换"})}),M[30]=es,M[31]=N):N=M[31],M[32]!==j||M[33]!==N?(w=(0,t.jsxs)("div",{className:"group relative",children:[j,N]}),M[32]=j,M[33]=N,M[34]=w):w=M[34],M[35]!==ee?(C=e=>ee("name",e.currentTarget.textContent||""),M[35]=ee,M[36]=C):C=M[36];let eo=es&&"cursor-text focus:outline-none";M[37]!==eo?(S=(0,i.cn)("text-lg font-semibold",eo),M[37]=eo,M[38]=S):S=M[38],M[39]!==es||M[40]!==J.name||M[41]!==C||M[42]!==S?(k=(0,t.jsx)("h3",{contentEditable:es,suppressContentEditableWarning:!0,onBlur:C,className:S,children:J.name}),M[39]=es,M[40]=J.name,M[41]=C,M[42]=S,M[43]=k):k=M[43],M[44]!==es||M[45]!==ee||M[46]!==J.year?(R=es?(0,t.jsx)("input",{type:"number",value:J.year,onChange:e=>ee("year",parseInt(e.target.value)||0),className:"text-secondary w-18 rounded border border-gray-300 px-2 py-1 text-sm focus:outline-none"}):(0,t.jsx)("span",{className:"text-secondary text-sm",children:J.year}),M[44]=es,M[45]=ee,M[46]=J.year,M[47]=R):R=M[47],M[48]!==k||M[49]!==R?(U=(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[k,R]}),M[48]=k,M[49]=R,M[50]=U):U=M[50],M[51]!==es||M[52]!==ea||M[53]!==J.tags?(_=es?(0,t.jsx)("input",{type:"text",value:J.tags.join(", "),onChange:e=>ea(e.target.value),placeholder:"标签，用逗号分隔",className:"w-full rounded-lg border border-gray-300 bg-gray-50 px-2 py-1 text-xs focus:outline-none"}):J.tags.map(p),M[51]=es,M[52]=ea,M[53]=J.tags,M[54]=_):_=M[54],M[55]!==_?(O=(0,t.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:_}),M[55]=_,M[56]=O):O=M[56],M[57]!==U||M[58]!==O?(G=(0,t.jsxs)("div",{className:"flex-1",children:[U,O]}),M[57]=U,M[58]=O,M[59]=G):G=M[59],M[60]!==w||M[61]!==G?(I=(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[w,G]}),M[60]=w,M[61]=G,M[62]=I):I=M[62],M[63]!==ee?(T=e=>ee("description",e.currentTarget.textContent||""),M[63]=ee,M[64]=T):T=M[64];let ec=es&&"cursor-text focus:outline-none";return M[65]!==ec?(B=(0,i.cn)("text-secondary text-sm leading-relaxed",ec),M[65]=ec,M[66]=B):B=M[66],M[67]!==es||M[68]!==J.description||M[69]!==T||M[70]!==B?(F=(0,t.jsx)("p",{contentEditable:es,suppressContentEditableWarning:!0,onBlur:T,className:B,children:J.description}),M[67]=es,M[68]=J.description,M[69]=T,M[70]=B,M[71]=F):F=M[71],M[72]!==es||M[73]!==ee||M[74]!==J.github||M[75]!==J.npm||M[76]!==J.url?(H=(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:es?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("input",{type:"url",value:J.url,onChange:e=>ee("url",e.target.value),placeholder:"网站 URL",className:"flex-1 rounded-lg border border-gray-300 bg-gray-50 px-3 py-1.5 text-sm focus:outline-none"}),(0,t.jsx)("input",{type:"url",value:J.github||"",onChange:e=>ee("github",e.target.value||void 0),placeholder:"GitHub URL（可选）",className:"flex-1 rounded-lg border border-gray-300 bg-gray-50 px-3 py-1.5 text-sm focus:outline-none"}),(0,t.jsx)("input",{type:"url",value:J.npm||"",onChange:e=>ee("npm",e.target.value||void 0),placeholder:"NPM URL（可选）",className:"flex-1 rounded-lg border border-gray-300 bg-gray-50 px-3 py-1.5 text-sm focus:outline-none"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.default,{href:J.url,target:"_blank",rel:"noopener noreferrer",className:"rounded-lg border bg-white/50 px-3 py-1.5 text-sm font-medium transition-colors hover:bg-white/80",children:"Website"}),J.github&&(0,t.jsx)(n.default,{href:J.github,target:"_blank",rel:"noopener noreferrer",className:"rounded-lg border bg-white/50 px-3 py-1.5 text-sm font-medium transition-colors hover:bg-white/80",children:"GitHub"}),J.npm&&(0,t.jsx)(n.default,{href:J.npm,target:"_blank",rel:"noopener noreferrer",className:"rounded-lg border bg-white/50 px-3 py-1.5 text-sm font-medium transition-colors hover:bg-white/80",children:"NPM"})]})}),M[72]=es,M[73]=ee,M[74]=J.github,M[75]=J.npm,M[76]=J.url,M[77]=H):H=M[77],M[78]!==es||M[79]!==et||M[80]!==J.image||M[81]!==X?(E=es&&X&&(0,t.jsx)(d,{currentImage:J.image,onClose:()=>q(!1),onSubmit:et}),M[78]=es,M[79]=et,M[80]=J.image,M[81]=X,M[82]=E):E=M[82],M[83]!==I||M[84]!==F||M[85]!==H||M[86]!==E||M[87]!==b||M[88]!==y?(P=(0,t.jsxs)(r.motion.div,{initial:h,...b,className:"card relative flex flex-col gap-4",children:[y,I,F,H,E]}),M[83]=I,M[84]=F,M[85]=H,M[86]=E,M[87]=b,M[88]=y,M[89]=P):P=M[89],P}function p(e){return(0,t.jsx)("span",{className:"text-secondary rounded-lg bg-white/50 px-2 py-1 text-xs",children:e},e)}function x(e){return e}function g(e){return e.trim()}function h(e){let r,n,i,o,m,p,x,g,h,v,j,N,w,C,S,k,R,U,_,O,G,I,T,B,F,H,E,P,M,L,W,Y,V,D,$,A,z=(0,l.c)(94),{project:J,onClose:K,onSave:X}=e;z[0]===Symbol.for("react.memo_cache_sentinel")?(r=new Date().getFullYear(),z[0]=r):r=z[0],z[1]===Symbol.for("react.memo_cache_sentinel")?(n={name:"",year:r,image:"",url:"",description:"",tags:[],github:void 0,npm:void 0},z[1]=n):n=z[1];let[q,Q]=(0,a.useState)(n),[Z,ee]=(0,a.useState)(!1),[et,ea]=(0,a.useState)("");z[2]!==J?(i=()=>{J?(Q(J),ea(J.tags.join(", "))):(Q({name:"",year:new Date().getFullYear(),image:"",url:"",description:"",tags:[],github:void 0,npm:void 0}),ea(""))},o=[J],z[2]=J,z[3]=i,z[4]=o):(i=z[3],o=z[4]),(0,a.useEffect)(i,o),z[5]!==q?(m=e=>{let t="url"===e.type?e.url:e.previewUrl;Q({...q,image:t})},z[5]=q,z[6]=m):m=z[6];let er=m;z[7]!==q?(p=e=>{ea(e);let t=e.split(",").map(f).filter(y);Q({...q,tags:t})},z[7]=q,z[8]=p):p=z[8];let es=p;z[9]!==q||z[10]!==K||z[11]!==X||z[12]!==J?(x=()=>{q.name.trim()&&q.image.trim()&&q.url.trim()&&q.description.trim()?0===q.tags.length?s.toast.error("请至少添加一个标签"):(X(q),K(),s.toast.success(J?"更新成功":"添加成功")):s.toast.error("请填写所有必填项")},z[9]=q,z[10]=K,z[11]=X,z[12]=J,z[13]=x):x=z[13];let el=x;z[14]===Symbol.for("react.memo_cache_sentinel")?(g=()=>ee(!0),z[14]=g):g=z[14],z[15]!==q.image||z[16]!==q.name?(h=(0,t.jsx)("div",{className:"group relative cursor-pointer",onClick:g,children:q.image?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("img",{src:q.image,alt:q.name,className:"h-16 w-16 rounded-xl object-cover"}),(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center rounded-xl bg-black/40 opacity-0 transition-opacity group-hover:opacity-100",children:(0,t.jsx)("span",{className:"text-xs text-white",children:"更换"})})]}):(0,t.jsx)("div",{className:"flex h-16 w-16 items-center justify-center rounded-xl bg-gray-200",children:(0,t.jsx)(c.Plus,{className:"h-6 w-6 text-gray-500"})})}),z[15]=q.image,z[16]=q.name,z[17]=h):h=z[17],z[18]!==q?(v=e=>Q({...q,name:e.target.value}),z[18]=q,z[19]=v):v=z[19],z[20]!==q.name||z[21]!==v?(j=(0,t.jsx)("input",{type:"text",value:q.name,onChange:v,placeholder:"项目名称",className:"w-full text-lg font-bold focus:outline-none"}),z[20]=q.name,z[21]=v,z[22]=j):j=z[22],z[23]!==q?(N=e=>Q({...q,year:parseInt(e.target.value)||0}),z[23]=q,z[24]=N):N=z[24],z[25]!==q.year||z[26]!==N?(w=(0,t.jsx)("input",{type:"number",value:q.year,onChange:N,placeholder:"年份",className:"text-secondary w-20 rounded border border-gray-300 px-2 py-1 text-xs focus:outline-none"}),z[25]=q.year,z[26]=N,z[27]=w):w=z[27],z[28]!==q?(C=e=>Q({...q,url:e.target.value}),z[28]=q,z[29]=C):C=z[29],z[30]!==q.url||z[31]!==C?(S=(0,t.jsx)("input",{type:"url",value:q.url,onChange:C,placeholder:"https://example.com",className:"text-secondary flex-1 truncate text-xs focus:outline-none"}),z[30]=q.url,z[31]=C,z[32]=S):S=z[32],z[33]!==w||z[34]!==S?(k=(0,t.jsxs)("div",{className:"mt-1 flex items-center gap-2",children:[w,S]}),z[33]=w,z[34]=S,z[35]=k):k=z[35],z[36]!==j||z[37]!==k?(R=(0,t.jsxs)("div",{className:"flex-1",children:[j,k]}),z[36]=j,z[37]=k,z[38]=R):R=z[38],z[39]!==R||z[40]!==h?(U=(0,t.jsxs)("div",{className:"mb-4 flex items-center gap-4",children:[h,R]}),z[39]=R,z[40]=h,z[41]=U):U=z[41],z[42]!==es?(_=e=>es(e.target.value),z[42]=es,z[43]=_):_=z[43],z[44]!==_||z[45]!==et?(O=(0,t.jsx)("input",{type:"text",value:et,onChange:_,placeholder:"标签，用逗号分隔（如：React, Vue）",className:"w-full rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-sm focus:outline-none"}),z[44]=_,z[45]=et,z[46]=O):O=z[46],z[47]!==q.tags?(G=q.tags.map(b),z[47]=q.tags,z[48]=G):G=z[48],z[49]!==G?(I=(0,t.jsx)("div",{className:"mt-2 flex flex-wrap gap-1.5",children:G}),z[49]=G,z[50]=I):I=z[50],z[51]!==O||z[52]!==I?(T=(0,t.jsxs)("div",{className:"mt-3",children:[O,I]}),z[51]=O,z[52]=I,z[53]=T):T=z[53],z[54]!==q?(B=e=>Q({...q,description:e.target.value}),z[54]=q,z[55]=B):B=z[55],z[56]!==q.description||z[57]!==B?(F=(0,t.jsx)("textarea",{value:q.description,onChange:B,placeholder:"项目介绍...",className:"mt-3 w-full resize-none text-sm leading-relaxed focus:outline-none",rows:4}),z[56]=q.description,z[57]=B,z[58]=F):F=z[58];let en=q.github||"";z[59]!==q?(H=e=>Q({...q,github:e.target.value||void 0}),z[59]=q,z[60]=H):H=z[60],z[61]!==en||z[62]!==H?(E=(0,t.jsx)("input",{type:"url",value:en,onChange:H,placeholder:"GitHub URL（可选）",className:"w-full rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-sm focus:outline-none"}),z[61]=en,z[62]=H,z[63]=E):E=z[63];let ei=q.npm||"";z[64]!==q?(P=e=>Q({...q,npm:e.target.value||void 0}),z[64]=q,z[65]=P):P=z[65],z[66]!==ei||z[67]!==P?(M=(0,t.jsx)("input",{type:"url",value:ei,onChange:P,placeholder:"NPM URL（可选）",className:"w-full rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-sm focus:outline-none"}),z[66]=ei,z[67]=P,z[68]=M):M=z[68],z[69]!==E||z[70]!==M?(L=(0,t.jsxs)("div",{className:"mt-3 space-y-2",children:[E,M]}),z[69]=E,z[70]=M,z[71]=L):L=z[71],z[72]!==U||z[73]!==T||z[74]!==F||z[75]!==L?(W=(0,t.jsxs)("div",{children:[U,T,F,L]}),z[72]=U,z[73]=T,z[74]=F,z[75]=L,z[76]=W):W=z[76],z[77]!==K?(Y=(0,t.jsx)("button",{onClick:K,className:"flex-1 rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm transition-colors hover:bg-gray-50",children:"取消"}),z[77]=K,z[78]=Y):Y=z[78];let eo=J?"保存":"添加";return z[79]!==el||z[80]!==eo?(V=(0,t.jsx)("button",{onClick:el,className:"brand-btn flex-1 justify-center px-4",children:eo}),z[79]=el,z[80]=eo,z[81]=V):V=z[81],z[82]!==Y||z[83]!==V?(D=(0,t.jsxs)("div",{className:"mt-6 flex gap-3",children:[Y,V]}),z[82]=Y,z[83]=V,z[84]=D):D=z[84],z[85]!==q.image||z[86]!==er||z[87]!==Z?($=Z&&(0,t.jsx)(d,{currentImage:q.image,onClose:()=>ee(!1),onSubmit:er}),z[85]=q.image,z[86]=er,z[87]=Z,z[88]=$):$=z[88],z[89]!==K||z[90]!==W||z[91]!==D||z[92]!==$?(A=(0,t.jsxs)(u.DialogModal,{open:!0,onClose:K,className:"card static w-md max-sm:w-full",children:[W,D,$]}),z[89]=K,z[90]=W,z[91]=D,z[92]=$,z[93]=A):A=z[93],A}function b(e){return(0,t.jsx)("span",{className:"rounded-full bg-secondary/10 px-2.5 py-0.5 text-xs text-gray-600",children:e},e)}function y(e){return e}function f(e){return e.trim()}var v=e.i(37572),j=e.i(97005),N=e.i(86909),w=e.i(63580);async function C(e){let{projects:t,imageItems:a}=e,r=await (0,N.getAuthToken)();s.toast.info("正在获取分支信息...");let l=(await (0,v.getRef)(r,w.GITHUB_CONFIG.OWNER,w.GITHUB_CONFIG.REPO,`heads/${w.GITHUB_CONFIG.BRANCH}`)).sha,n=`更新项目列表`;s.toast.info("正在准备文件...");let o=[],c=new Set,u=[...t];if(a&&a.size>0){for(let[e,t]of(s.toast.info("正在上传图片..."),a.entries()))if("file"===t.type){let a=t.hash||await (0,j.hashFileSHA256)(t.file),s=(0,i.getFileExt)(t.file.name),l=`${a}${s}`,n=`/images/project/${l}`;if(!c.has(a)){let e=`public/images/project/${l}`,s=await (0,j.fileToBase64NoPrefix)(t.file),n=await (0,v.createBlob)(r,w.GITHUB_CONFIG.OWNER,w.GITHUB_CONFIG.REPO,s,"base64");o.push({path:e,mode:"100644",type:"blob",sha:n.sha}),c.add(a)}u=u.map(t=>t.url===e?{...t,image:n}:t)}}let d=JSON.stringify(u,null,"	"),m=await (0,v.createBlob)(r,w.GITHUB_CONFIG.OWNER,w.GITHUB_CONFIG.REPO,(0,v.toBase64Utf8)(d),"base64");o.push({path:"src/app/projects/list.json",mode:"100644",type:"blob",sha:m.sha}),s.toast.info("正在创建文件树...");let p=await (0,v.createTree)(r,w.GITHUB_CONFIG.OWNER,w.GITHUB_CONFIG.REPO,o,l);s.toast.info("正在创建提交...");let x=await (0,v.createCommit)(r,w.GITHUB_CONFIG.OWNER,w.GITHUB_CONFIG.REPO,n,p.sha,[l]);s.toast.info("正在更新分支..."),await (0,v.updateRef)(r,w.GITHUB_CONFIG.OWNER,w.GITHUB_CONFIG.REPO,`heads/${w.GITHUB_CONFIG.BRANCH}`,x.sha),s.toast.success("发布成功！")}var S=e.i(71436),k=e.i(66752);function R(){let[e,l]=(0,a.useState)(k.default),[n,i]=(0,a.useState)(k.default),[o,c]=(0,a.useState)(!1),[u,d]=(0,a.useState)(!1),[p,x]=(0,a.useState)(null),[g,b]=(0,a.useState)(!1),[y,f]=(0,a.useState)(new Map),v=(0,a.useRef)(null),{isAuth:j,setPrivateKey:N}=(0,S.useAuthStore)(),w=(e,t,a)=>{l(a=>a.map(a=>a.url===t.url?e:a)),a&&f(t=>{let r=new Map(t);return r.set(e.url,a),r})},R=async e=>{try{let t=await e.text();N(t),await U()}catch(e){console.error("Failed to read private key:",e),s.toast.error("读取密钥文件失败")}},U=async()=>{d(!0);try{await C({projects:e,imageItems:y}),i(e),f(new Map),c(!1),s.toast.success("保存成功！")}catch(e){console.error("Failed to save:",e),s.toast.error(`保存失败: ${e?.message||"未知错误"}`)}finally{d(!1)}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("input",{ref:v,type:"file",accept:".pem",className:"hidden",onChange:async e=>{let t=e.target.files?.[0];t&&await R(t),e.currentTarget&&(e.currentTarget.value="")}}),(0,t.jsx)("div",{className:"flex flex-col items-center justify-center px-6 pt-32 pb-12",children:(0,t.jsx)("div",{className:"grid w-full max-w-[1200px] grid-cols-2 gap-6 max-md:grid-cols-1",children:e.map((a,r)=>(0,t.jsx)(m,{project:a,isEditMode:o,onUpdate:w,onDelete:()=>{confirm(`确定要删除 ${a.name} 吗？`)&&l(e.filter(e=>e.url!==a.url))}},a.url))})}),(0,t.jsx)(r.motion.div,{initial:{opacity:0,scale:.6},animate:{opacity:1,scale:1},className:"absolute top-4 right-6 flex gap-3 max-sm:hidden",children:o?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{l(n),f(new Map),c(!1)},disabled:u,className:"rounded-xl border bg-white/60 px-6 py-2 text-sm",children:"取消"}),(0,t.jsx)(r.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{x(null),b(!0)},className:"rounded-xl border bg-white/60 px-6 py-2 text-sm",children:"添加"}),(0,t.jsx)(r.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{j?U():v.current?.click()},disabled:u,className:"brand-btn px-6",children:u?"保存中...":j?"保存":"导入密钥"})]}):(0,t.jsx)(r.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>c(!0),className:"rounded-xl border bg-white/60 px-6 py-2 text-sm backdrop-blur-sm transition-colors hover:bg-white/80",children:"编辑"})}),g&&(0,t.jsx)(h,{project:p,onClose:()=>b(!1),onSave:t=>{p?l(e.map(e=>e.url===p.url?t:e)):l([...e,t])}})]})}e.s(["default",()=>R],63936)}]);