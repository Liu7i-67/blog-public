module.exports=[43559,a=>{"use strict";async function b(a){if(!a)throw Error("Slug is required");let b={},c=await fetch(`/blogs/${encodeURIComponent(a)}/config.json`);if(c.ok)try{b=await c.json()}catch{b={}}let d=await fetch(`/blogs/${encodeURIComponent(a)}/index.md`);if(!d.ok)throw Error("Blog not found");return{slug:a,config:b,markdown:await d.text(),cover:b.cover}}a.s(["loadBlog",()=>b])},56804,a=>{"use strict";let b,c;var d=a.i(90053),e=a.i(17396),f=a.i(94693),g=a.i(80998),h=a.i(66273),i=a.i(4542),j=a.i(92787);function k(a,b){let c,d=()=>{let{currentTime:d}=b,e=(null===d?0:d.value)/100;c!==e&&a(e),c=e};return j.frame.preUpdate(d,!0),()=>(0,j.cancelFrame)(d)}var l=a.i(13830),m=a.i(65488),n=a.i(62824);let o=new WeakMap,p=(a,b,c)=>(d,e)=>e&&e[0]?e[0][a+"Size"]:(0,m.isSVGElement)(d)&&"getBBox"in d?d.getBBox()[b]:d[c],q=p("inline","width","offsetWidth"),r=p("block","height","offsetHeight");function s({target:a,borderBoxSize:b}){o.get(a)?.forEach(c=>{c(a,{get width(){return q(a,b)},get height(){return r(a,b)}})})}function t(a){a.forEach(s)}let u=new Set;var v=a.i(8564),w=a.i(32412);let x=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),y={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function z(a,b,c,d){let e=c[b],{length:f,position:g}=y[b],h=e.current,i=c.time;e.current=a[`scroll${g}`],e.scrollLength=a[`scroll${f}`]-a[`client${f}`],e.offset.length=0,e.offset[0]=0,e.offset[1]=e.scrollLength,e.progress=(0,v.progress)(0,e.scrollLength,e.current);let j=d-i;e.velocity=j>50?0:(0,w.velocityPerSecond)(e.current-h,j)}var A=a.i(14746),B=a.i(57051),C=a.i(84515),D=a.i(47423);let E={start:0,center:.5,end:1};function F(a,b,c=0){let d=0;if(a in E&&(a=E[a]),"string"==typeof a){let b=parseFloat(a);a.endsWith("px")?d=b:a.endsWith("%")?a=b/100:a.endsWith("vw")?d=b/100*document.documentElement.clientWidth:a.endsWith("vh")?d=b/100*document.documentElement.clientHeight:a=b}return"number"==typeof a&&(d=b*a),c+d}let G=[0,0],H=[[0,0],[1,1]],I={x:0,y:0},J=new WeakMap,K=new WeakMap,L=new WeakMap,M=a=>a===document.scrollingElement?window:a;function N(a,{container:d=document.scrollingElement,...e}={}){if(!d)return i.noop;let f=L.get(d);f||(f=new Set,L.set(d,f));let g=function(a,b,c,d={}){return{measure:b=>{!function(a,b=a,c){if(c.x.targetOffset=0,c.y.targetOffset=0,b!==a){let d=b;for(;d&&d!==a;)c.x.targetOffset+=d.offsetLeft,c.y.targetOffset+=d.offsetTop,d=d.offsetParent}c.x.targetLength=b===a?b.scrollWidth:b.clientWidth,c.y.targetLength=b===a?b.scrollHeight:b.clientHeight,c.x.containerLength=a.clientWidth,c.y.containerLength=a.clientHeight}(a,d.target,c),z(a,"x",c,b),z(a,"y",c,b),c.time=b,(d.offset||d.target)&&function(a,b,c){let{offset:d=H}=c,{target:e=a,axis:f="y"}=c,g="y"===f?"height":"width",h=e!==a?function(a,b){let c={x:0,y:0},d=a;for(;d&&d!==b;)if((0,D.isHTMLElement)(d))c.x+=d.offsetLeft,c.y+=d.offsetTop,d=d.offsetParent;else if("svg"===d.tagName){let a=d.getBoundingClientRect(),b=(d=d.parentElement).getBoundingClientRect();c.x+=a.left-b.left,c.y+=a.top-b.top}else if(d instanceof SVGGraphicsElement){let{x:a,y:b}=d.getBBox();c.x+=a,c.y+=b;let e=null,f=d.parentNode;for(;!e;)"svg"===f.tagName&&(e=f),f=d.parentNode;d=e}else break;return c}(e,a):I,i=e===a?{width:a.scrollWidth,height:a.scrollHeight}:"getBBox"in e&&"svg"!==e.tagName?e.getBBox():{width:e.clientWidth,height:e.clientHeight},j={width:a.clientWidth,height:a.clientHeight};b[f].offset.length=0;let k=!b[f].interpolate,l=d.length;for(let a=0;a<l;a++){let c=function(a,b,c,d){let e=Array.isArray(a)?a:G,f=0;return"number"==typeof a?e=[a,a]:"string"==typeof a&&(e=(a=a.trim()).includes(" ")?a.split(" "):[a,E[a]?a:"0"]),(f=F(e[0],c,d))-F(e[1],b)}(d[a],j[g],i[g],h[f]);k||c===b[f].interpolatorOffsets[a]||(k=!0),b[f].offset[a]=c}k&&(b[f].interpolate=(0,A.interpolate)(b[f].offset,(0,B.defaultOffset)(d),{clamp:!1}),b[f].interpolatorOffsets=[...b[f].offset]),b[f].progress=(0,C.clamp)(0,1,b[f].interpolate(b[f].current))}(a,c,d)},notify:()=>b(c)}}(d,a,{time:0,x:x(),y:x()},e);if(f.add(g),!J.has(d)){let a,e=()=>{for(let a of f)a.measure(j.frameData.timestamp);j.frame.preUpdate(g)},g=()=>{for(let a of f)a.notify()},h=()=>j.frame.read(e);J.set(d,h);let i=M(d);window.addEventListener("resize",h,{passive:!0}),d!==document.documentElement&&K.set(d,"function"==typeof d?(u.add(d),c||(c=()=>{let a={get width(){return window.innerWidth},get height(){return window.innerHeight}};u.forEach(b=>b(a))},window.addEventListener("resize",c)),()=>{u.delete(d),u.size||"function"!=typeof c||(window.removeEventListener("resize",c),c=void 0)}):(b||"undefined"!=typeof ResizeObserver&&(b=new ResizeObserver(t)),(a=(0,n.resolveElements)(d)).forEach(a=>{let c=o.get(a);c||(c=new Set,o.set(a,c)),c.add(h),b?.observe(a)}),()=>{a.forEach(a=>{let c=o.get(a);c?.delete(h),c?.size||b?.unobserve(a)})})),i.addEventListener("scroll",h,{passive:!0}),h()}let h=J.get(d);return j.frame.read(h,!1,!0),()=>{(0,j.cancelFrame)(h);let a=L.get(d);if(!a||(a.delete(g),a.size))return;let b=J.get(d);J.delete(d),b&&(M(d).removeEventListener("scroll",b),K.get(d)?.(),window.removeEventListener("resize",b))}}let O=new Map;function P({source:a,container:b,...c}){var d;let e,f,{axis:g}=c;a&&(b=a);let h=O.get(b)??new Map;O.set(b,h);let i=c.target??"self",j=h.get(i)??{},k=g+(c.offset??[]).join(",");return j[k]||(j[k]=!c.target&&(0,l.supportsScrollTimeline)()?new ScrollTimeline({source:b,axis:g}):(d={container:b,...c},e={value:0},f=N(a=>{e.value=100*a[d.axis].progress},d),{currentTime:e,cancel:f})),j[k]}var Q=a.i(24429),R=a.i(49037);let S=()=>({scrollX:(0,g.motionValue)(0),scrollY:(0,g.motionValue)(0),scrollXProgress:(0,g.motionValue)(0),scrollYProgress:(0,g.motionValue)(0)}),T=a=>!!a&&!a.current;var U=a.i(4295),V=a.i(78959);function W(a){return"number"==typeof a?a:parseFloat(a)}var X=a.i(39224);function Y(a){let b=(0,Q.useConstant)(()=>(0,g.motionValue)(a)),{isStatic:c}=(0,e.useContext)(X.MotionConfigContext);if(c){let[,c]=(0,e.useState)(a);(0,e.useEffect)(()=>b.on("change",c),[])}return b}function Z(a,b){let c=Y(b()),d=()=>c.set(b());return d(),(0,R.useIsomorphicLayoutEffect)(()=>{let b=()=>j.frame.preRender(d,!1,!0),c=a.map(a=>a.on("change",b));return()=>{c.forEach(a=>a()),(0,j.cancelFrame)(d)}}),c}function $(a,b,c,d){if("function"==typeof a){let b;return g.collectMotionValues.current=[],a(),b=Z(g.collectMotionValues.current,a),g.collectMotionValues.current=void 0,b}let e="function"==typeof b?b:function(...a){let b=!Array.isArray(a[0]),c=b?0:-1,d=a[0+c],e=a[1+c],f=a[2+c],g=a[3+c],h=(0,A.interpolate)(e,f,g);return b?h(d):h}(b,c,d);return Array.isArray(a)?_(a,e):_([a],([a])=>e(a))}function _(a,b){let c=(0,Q.useConstant)(()=>[]);return Z(a,()=>{c.length=0;let d=a.length;for(let b=0;b<d;b++)c[b]=a[b].get();return b(c)})}var aa=a.i(76139),ab=a.i(99235),ac=a.i(39337);function ad({toc:a,delay:b=0}){let[c,g]=(0,e.useState)(new Set),h=(0,e.useMemo)(()=>Array.from(c).sort((b,c)=>a.findIndex(a=>a.id===b)-a.findIndex(a=>a.id===c))[0],[c,a]);return(0,e.useEffect)(()=>{if(0===a.length)return;let b=new Map;return a.forEach(a=>{let c=document.getElementById(a.id);if(!c)return;let d=new IntersectionObserver(a=>{a.forEach(a=>{g(b=>{let c=new Set(b);return a.isIntersecting?c.add(a.target.id):c.delete(a.target.id),c})})},{rootMargin:"-100px 0px -100px 0px",threshold:0});d.observe(c),b.set(a.id,d)}),()=>{b.forEach(a=>a.disconnect())}},[a]),(0,d.jsxs)(f.motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:b},className:"bg-card w-full rounded-xl border p-3 text-sm",children:[(0,d.jsx)("h2",{className:"text-secondary mb-2 font-medium",children:"目录"}),(0,d.jsxs)("div",{className:"relative max-h-[300px] space-y-2 overflow-auto",children:[0===a.length&&(0,d.jsx)("div",{className:"text-secondary",children:"暂无"}),a.map(a=>(0,d.jsx)("a",{href:`#${a.id}`,className:(0,ac.default)("hover:text-brand relative block pl-3 transition-colors",a.id===h&&"text-brand"),style:{paddingLeft:(a.level-1)*8},children:a.text},a.id+a.level))]})]})}var ae=a.i(58083);function af({cover:a,summary:b,toc:c,slug:g}){let[l,m]=(0,e.useState)(0),{scrollY:n}=function({container:a,target:b,...c}={}){let d=(0,Q.useConstant)(S),f=(0,e.useRef)(null),g=(0,e.useRef)(!1),j=(0,e.useCallback)(()=>(f.current=function(a,{axis:b="y",container:c=document.scrollingElement,...d}={}){var e,f;let g;if(!c)return i.noop;let h={axis:b,container:c,...d};return"function"==typeof a?(e=a,f=h,2===e.length?N(a=>{e(a[f.axis].progress,a)},f):k(e,P(f))):(g=P(h),a.attachTimeline({timeline:h.target?void 0:g,observe:a=>(a.pause(),k(b=>{a.time=a.iterationDuration*b},g))}))}((a,{x:b,y:c})=>{d.scrollX.set(b.current),d.scrollXProgress.set(b.progress),d.scrollY.set(c.current),d.scrollYProgress.set(c.progress)},{...c,container:a?.current||void 0,target:b?.current||void 0}),()=>{f.current?.()}),[a,b,JSON.stringify(c.offset)]);return(0,R.useIsomorphicLayoutEffect)(()=>{if(g.current=!1,!(T(a)||T(b)))return j();g.current=!0},[j]),(0,e.useEffect)(()=>g.current?((0,h.invariant)(!T(a),"Container ref is defined but not hydrated","use-scroll-ref"),(0,h.invariant)(!T(b),"Target ref is defined but not hydrated","use-scroll-ref"),j()):void 0,[j]),d}();(0,e.useEffect)(()=>{},[]);let o=function(a,b={}){let{isStatic:c}=(0,e.useContext)(X.MotionConfigContext),d=()=>(0,V.isMotionValue)(a)?a.get():a;if(c)return $(d);let f=Y(d());return(0,e.useInsertionEffect)(()=>(function(a,b,c){let d,e=a.get(),f=null,g=e,h="string"==typeof e?e.replace(/[\d.-]/g,""):void 0,i=()=>{f&&(f.stop(),f=null)},k=()=>{i(),f=new U.JSAnimation({keyframes:[W(a.get()),W(g)],velocity:a.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...c,onUpdate:d})};if(a.attach((a,b)=>{g=a,d=a=>{var c,d;return b((c=a,(d=h)?c+d:c))},j.frame.postRender(k)},i),(0,V.isMotionValue)(b)){let c=b.on("change",b=>{var c,d;return a.set((c=b,(d=h)?c+d:c))}),d=a.on("destroy",c);return()=>{c(),d()}}return i})(f,a,b),[f,JSON.stringify(b)]),f}($(n,a=>Math.min(Math.max(0,a-72),l)),{stiffness:100,damping:15,mass:.6,restDelta:.5});return(0,d.jsxs)(f.motion.div,{className:"relative flex w-[200px] shrink-0 flex-col items-start gap-4 self-start max-sm:hidden",style:{y:o},children:[a&&(0,d.jsx)(f.motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:aa.INIT_DELAY+ +aa.ANIMATION_DELAY},className:"bg-card w-full rounded-xl p-3",children:(0,d.jsx)("img",{src:a,alt:"cover",className:"h-auto w-full rounded-xl border object-cover"})}),b&&(0,d.jsxs)(f.motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:aa.INIT_DELAY+2*aa.ANIMATION_DELAY},className:"bg-card w-full rounded-xl border p-3 text-sm",children:[(0,d.jsx)("h2",{className:"text-secondary mb-2 font-medium",children:"摘要"}),(0,d.jsx)("div",{className:"text-secondary cursor-text",children:b})]}),(0,d.jsx)(ad,{toc:c,delay:aa.INIT_DELAY+3*aa.ANIMATION_DELAY}),(0,d.jsx)(ab.default,{slug:g,delay:(aa.INIT_DELAY+4*aa.ANIMATION_DELAY)*1e3}),(0,d.jsx)(ae.ScrollTopButton,{delay:aa.INIT_DELAY+5*aa.ANIMATION_DELAY})]})}a.s(["BlogSidebar",()=>af],56804)},39554,a=>a.a(async(b,c)=>{try{var d=a.i(90053),e=a.i(94693),f=a.i(76139),g=a.i(4616),h=a.i(57066),i=a.i(56804),j=b([g]);function k({markdown:a,title:b,tags:c,date:j,summary:k,cover:l,slug:m}){let{maxSM:n}=(0,h.useSize)(),{content:o,toc:p,loading:q}=(0,g.useMarkdownRender)(a);return q?(0,d.jsx)("div",{className:"text-secondary flex h-full items-center justify-center text-sm",children:"渲染中..."}):(0,d.jsxs)("div",{className:"mx-auto flex max-w-[1140px] justify-center gap-6 px-6 pt-28 pb-12 max-sm:px-0",children:[(0,d.jsx)(e.motion.article,{initial:{opacity:0},animate:{opacity:1},transition:{delay:f.INIT_DELAY},className:"card bg-article static flex-1 overflow-auto rounded-xl p-8",children:(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-center text-2xl font-semibold",children:b}),(0,d.jsx)("div",{className:"text-secondary mt-4 flex flex-wrap items-center justify-center gap-3 px-8 text-center text-sm",children:c.map(a=>(0,d.jsxs)("span",{children:["#",a]},a))}),(0,d.jsx)("div",{className:"text-secondary mt-3 text-center text-sm",children:j}),(0,d.jsx)("div",{className:"prose mt-6 max-w-none cursor-text",children:o})]})}),!n&&(0,d.jsx)(i.BlogSidebar,{cover:l,summary:k,toc:p,slug:m})]})}[g]=j.then?(await j)():j,a.s(["BlogPreview",()=>k]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=src_313366da._.js.map