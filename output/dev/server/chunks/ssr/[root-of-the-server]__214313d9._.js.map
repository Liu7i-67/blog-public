{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["file:///E:/qbb/github/blog-public/src/lib/markdown-renderer.ts"],"sourcesContent":["import { marked } from 'marked'\r\nimport type { Tokens } from 'marked'\r\nimport { codeToHtml } from 'shiki'\r\n\r\nexport type TocItem = { id: string; text: string; level: number }\r\n\r\nexport interface MarkdownRenderResult {\r\n\thtml: string\r\n\ttoc: TocItem[]\r\n}\r\n\r\nexport function slugify(text: string): string {\r\n\treturn text\r\n\t\t.toLowerCase()\r\n\t\t.replace(/[^a-z0-9\\u4e00-\\u9fa5\\s-]/g, '')\r\n\t\t.trim()\r\n\t\t.replace(/\\s+/g, '-')\r\n}\r\n\r\nexport async function renderMarkdown(markdown: string): Promise<MarkdownRenderResult> {\r\n\t// Parse TOC from markdown\r\n\tconst toc: TocItem[] = []\r\n\tfor (const line of markdown.split('\\n')) {\r\n\t\tconst m = /^(#{1,3})\\s+(.+)$/.exec(line.trim())\r\n\t\tif (m) {\r\n\t\t\tconst level = m[1].length\r\n\t\t\tconst text = m[2].trim()\r\n\t\t\tconst id = slugify(text)\r\n\t\t\ttoc.push({ id, text, level })\r\n\t\t}\r\n\t}\r\n\r\n\t// Pre-process code blocks with Shiki\r\n\tconst codeBlockMap = new Map<string, { html: string; original: string }>()\r\n\tconst tokens = marked.lexer(markdown)\r\n\r\n\tfor (const token of tokens) {\r\n\t\tif (token.type === 'code') {\r\n\t\t\tconst codeToken = token as Tokens.Code\r\n\t\t\tconst originalCode = codeToken.text\r\n\t\t\ttry {\r\n\t\t\t\tconst html = await codeToHtml(originalCode, {\r\n\t\t\t\t\tlang: codeToken.lang || 'text',\r\n\t\t\t\t\ttheme: 'one-light'\r\n\t\t\t\t})\r\n\t\t\t\tconst key = `__SHIKI_CODE_${codeBlockMap.size}__`\r\n\t\t\t\tcodeBlockMap.set(key, { html, original: originalCode })\r\n\t\t\t\tcodeToken.text = key\r\n\t\t\t} catch {\r\n\t\t\t\t// Keep original if highlighting fails\r\n\t\t\t\tconst key = `__SHIKI_CODE_${codeBlockMap.size}__`\r\n\t\t\t\tcodeBlockMap.set(key, { html: '', original: originalCode })\r\n\t\t\t\tcodeToken.text = key\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// Render HTML with heading ids\r\n\tconst renderer = new marked.Renderer()\r\n\r\n\trenderer.heading = (token: Tokens.Heading) => {\r\n\t\tconst id = slugify(token.text || '')\r\n\t\treturn `<h${token.depth} id=\"${id}\">${token.text}</h${token.depth}>`\r\n\t}\r\n\r\n\trenderer.code = (token: Tokens.Code) => {\r\n\t\t// Check if this code block was pre-processed\r\n\t\tconst codeData = codeBlockMap.get(token.text)\r\n\t\tif (codeData) {\r\n\t\t\t// Add data-code attribute with original code for copy functionality\r\n\t\t\t// Escape HTML entities for attribute value\r\n\t\t\tconst escapedCode = codeData.original\r\n\t\t\t\t.replace(/&/g, '&amp;')\r\n\t\t\t\t.replace(/\"/g, '&quot;')\r\n\t\t\t\t.replace(/'/g, '&#39;')\r\n\t\t\t\t.replace(/</g, '&lt;')\r\n\t\t\t\t.replace(/>/g, '&gt;')\r\n\t\t\tif (codeData.html) {\r\n\t\t\t\t// Shiki highlighted code\r\n\t\t\t\treturn `<pre data-code=\"${escapedCode}\">${codeData.html}</pre>`\r\n\t\t\t}\r\n\t\t\t// Fallback for failed highlighting\r\n\t\t\treturn `<pre data-code=\"${escapedCode}\"><code>${codeData.original}</code></pre>`\r\n\t\t}\r\n\t\t// Fallback to default (inline code, not code block)\r\n\t\treturn `<code>${token.text}</code>`\r\n\t}\r\n\r\n\trenderer.listitem = (token: Tokens.ListItem) => {\r\n\t\t// Render inline markdown inside list items (e.g. links, emphasis)\r\n\t\tconst inner = token.tokens ? (marked.parser(token.tokens) as string) : token.text\r\n\r\n\t\tif (token.task) {\r\n\t\t\tconst checkbox = token.checked ? '<input type=\"checkbox\" checked disabled />' : '<input type=\"checkbox\" disabled />'\r\n\t\t\treturn `<li class=\"task-list-item\">${checkbox} ${inner}</li>\\n`\r\n\t\t}\r\n\r\n\t\treturn `<li>${inner}</li>\\n`\r\n\t}\r\n\r\n\tmarked.use({\r\n\t\trenderer\r\n\t})\r\n\tconst html = (marked.parser(tokens) as string) || ''\r\n\r\n\treturn { html, toc }\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 124, "column": 0}, "map": {"version":3,"sources":["file:///E:/qbb/github/blog-public/src/components/dialog-modal.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect, useState, type ReactNode } from 'react'\r\nimport { createPortal } from 'react-dom'\r\nimport { AnimatePresence, motion } from 'motion/react'\r\nimport { cn } from '@/lib/utils'\r\n\r\ninterface DialogModalProps {\r\n\topen: boolean\r\n\tonClose: () => void\r\n\tchildren: ReactNode\r\n\tclassName?: string\r\n\toverlayClassName?: string\r\n\tdisableCloseOnOverlay?: boolean\r\n\tlockScroll?: boolean\r\n\tcloseOnEsc?: boolean\r\n}\r\n\r\nexport function DialogModal({ open, onClose, children, className, disableCloseOnOverlay = false, lockScroll = true, closeOnEsc = true }: DialogModalProps) {\r\n\tconst [mounted, setMounted] = useState(false)\r\n\r\n\tuseEffect(() => {\r\n\t\tsetMounted(true)\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!lockScroll || !open) return\r\n\t\tconst previous = document.body.style.overflow\r\n\t\tdocument.body.style.overflow = 'hidden'\r\n\t\treturn () => {\r\n\t\t\tdocument.body.style.overflow = previous\r\n\t\t}\r\n\t}, [lockScroll, open])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!closeOnEsc || !open) return\r\n\t\tconst handler = (event: KeyboardEvent) => {\r\n\t\t\tif (event.key === 'Escape') {\r\n\t\t\t\tonClose()\r\n\t\t\t}\r\n\t\t}\r\n\t\twindow.addEventListener('keydown', handler)\r\n\t\treturn () => {\r\n\t\t\twindow.removeEventListener('keydown', handler)\r\n\t\t}\r\n\t}, [closeOnEsc, onClose, open])\r\n\r\n\tif (!mounted) return null\r\n\r\n\treturn createPortal(\r\n\t\t<AnimatePresence>\r\n\t\t\t{open && (\r\n\t\t\t\t<motion.div\r\n\t\t\t\t\tinitial={{ opacity: 0 }}\r\n\t\t\t\t\tanimate={{ opacity: 1 }}\r\n\t\t\t\t\texit={{ opacity: 0 }}\r\n\t\t\t\t\tclassName={'fixed inset-0 z-50 flex items-center justify-center bg-card p-4 backdrop-blur-xl'}\r\n\t\t\t\t\tonClick={disableCloseOnOverlay ? undefined : onClose}>\r\n\t\t\t\t\t<motion.div\r\n\t\t\t\t\t\tinitial={{ opacity: 0, scale: 0.8, y: 20 }}\r\n\t\t\t\t\t\tanimate={{ opacity: 1, scale: 1, y: 0 }}\r\n\t\t\t\t\t\texit={{ opacity: 0, scale: 0.8, y: 20 }}\r\n\t\t\t\t\t\tclassName={cn('static', className)}\r\n\t\t\t\t\t\tonClick={e => e.stopPropagation()}>\r\n\t\t\t\t\t\t{children}\r\n\t\t\t\t\t</motion.div>\r\n\t\t\t\t</motion.div>\r\n\t\t\t)}\r\n\t\t</AnimatePresence>,\r\n\t\tdocument.body\r\n\t)\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AACA;AALA;;;;;;AAkBO,SAAS,YAAY,EAAE,IAAI,EAAE,OAAO,EAAE,QAAQ,EAAE,SAAS,EAAE,wBAAwB,KAAK,EAAE,aAAa,IAAI,EAAE,aAAa,IAAI,EAAoB;IACxJ,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,gUAAQ,EAAC;IAEvC,IAAA,iUAAS,EAAC;QACT,WAAW;IACZ,GAAG,EAAE;IAEL,IAAA,iUAAS,EAAC;QACT,IAAI,CAAC,cAAc,CAAC,MAAM;QAC1B,MAAM,WAAW,SAAS,IAAI,CAAC,KAAK,CAAC,QAAQ;QAC7C,SAAS,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG;QAC/B,OAAO;YACN,SAAS,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG;QAChC;IACD,GAAG;QAAC;QAAY;KAAK;IAErB,IAAA,iUAAS,EAAC;QACT,IAAI,CAAC,cAAc,CAAC,MAAM;QAC1B,MAAM,UAAU,CAAC;YAChB,IAAI,MAAM,GAAG,KAAK,UAAU;gBAC3B;YACD;QACD;QACA,OAAO,gBAAgB,CAAC,WAAW;QACnC,OAAO;YACN,OAAO,mBAAmB,CAAC,WAAW;QACvC;IACD,GAAG;QAAC;QAAY;QAAS;KAAK;IAE9B,IAAI,CAAC,SAAS,OAAO;IAErB,qBAAO,IAAA,2UAAY,gBAClB,6VAAC,kTAAe;kBACd,sBACA,6VAAC,0SAAM,CAAC,GAAG;YACV,SAAS;gBAAE,SAAS;YAAE;YACtB,SAAS;gBAAE,SAAS;YAAE;YACtB,MAAM;gBAAE,SAAS;YAAE;YACnB,WAAW;YACX,SAAS,wBAAwB,YAAY;sBAC7C,cAAA,6VAAC,0SAAM,CAAC,GAAG;gBACV,SAAS;oBAAE,SAAS;oBAAG,OAAO;oBAAK,GAAG;gBAAG;gBACzC,SAAS;oBAAE,SAAS;oBAAG,OAAO;oBAAG,GAAG;gBAAE;gBACtC,MAAM;oBAAE,SAAS;oBAAG,OAAO;oBAAK,GAAG;gBAAG;gBACtC,WAAW,IAAA,yHAAE,EAAC,UAAU;gBACxB,SAAS,CAAA,IAAK,EAAE,eAAe;0BAC9B;;;;;;;;;;;;;;;cAKL,SAAS,IAAI;AAEf","debugId":null}},
    {"offset": {"line": 225, "column": 0}, "map": {"version":3,"sources":["file:///E:/qbb/github/blog-public/src/components/markdown-image.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { DialogModal } from '@/components/dialog-modal'\r\n\r\ntype MarkdownImageProps = {\r\n\tsrc: string\r\n\talt?: string\r\n\ttitle?: string\r\n}\r\n\r\nexport function MarkdownImage({ src, alt = '', title = '' }: MarkdownImageProps) {\r\n\tconst [display, setDisplay] = useState(false)\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<img src={src} alt={alt} title={title} loading='lazy' onClick={() => setDisplay(true)} className='cursor-pointer transition-opacity hover:opacity-80' />\r\n\t\t\t<DialogModal open={display} onClose={() => setDisplay(false)} className='max-w-none bg-transparent p-0'>\r\n\t\t\t\t<img src={src} alt={alt} className='max-h-[90vh] max-w-full rounded-2xl object-contain' />\r\n\t\t\t</DialogModal>\r\n\t\t</>\r\n\t)\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAWO,SAAS,cAAc,EAAE,GAAG,EAAE,MAAM,EAAE,EAAE,QAAQ,EAAE,EAAsB;IAC9E,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,gUAAQ,EAAC;IAEvC,qBACC;;0BACC,6VAAC;gBAAI,KAAK;gBAAK,KAAK;gBAAK,OAAO;gBAAO,SAAQ;gBAAO,SAAS,IAAM,WAAW;gBAAO,WAAU;;;;;;0BACjG,6VAAC,oJAAW;gBAAC,MAAM;gBAAS,SAAS,IAAM,WAAW;gBAAQ,WAAU;0BACvE,cAAA,6VAAC;oBAAI,KAAK;oBAAK,KAAK;oBAAK,WAAU;;;;;;;;;;;;;AAIvC","debugId":null}},
    {"offset": {"line": 277, "column": 0}, "map": {"version":3,"sources":["file:///E:/qbb/github/blog-public/src/components/code-block.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { Copy, Check } from 'lucide-react'\r\n\r\ntype CodeBlockProps = {\r\n\tchildren: React.ReactNode\r\n\tcode: string\r\n}\r\n\r\nexport function CodeBlock({ children, code }: CodeBlockProps) {\r\n\tconst [copied, setCopied] = useState(false)\r\n\r\n\tconst handleCopy = async () => {\r\n\t\ttry {\r\n\t\t\tawait navigator.clipboard.writeText(code)\r\n\t\t\tsetCopied(true)\r\n\t\t\tsetTimeout(() => setCopied(false), 2000)\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Failed to copy code:', error)\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='code-block-wrapper'>\r\n\t\t\t<button\r\n\t\t\t\ttype='button'\r\n\t\t\t\tonClick={handleCopy}\r\n\t\t\t\tclassName='code-block-copy-btn'\r\n\t\t\t\taria-label='Copy code'\r\n\t\t\t>\r\n\t\t\t\t{copied ? <Check size={16} /> : <Copy size={16} />}\r\n\t\t\t</button>\r\n\t\t\t{children}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAHA;;;;AAUO,SAAS,UAAU,EAAE,QAAQ,EAAE,IAAI,EAAkB;IAC3D,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,gUAAQ,EAAC;IAErC,MAAM,aAAa;QAClB,IAAI;YACH,MAAM,UAAU,SAAS,CAAC,SAAS,CAAC;YACpC,UAAU;YACV,WAAW,IAAM,UAAU,QAAQ;QACpC,EAAE,OAAO,OAAO;YACf,QAAQ,KAAK,CAAC,wBAAwB;QACvC;IACD;IAEA,qBACC,6VAAC;QAAI,WAAU;;0BACd,6VAAC;gBACA,MAAK;gBACL,SAAS;gBACT,WAAU;gBACV,cAAW;0BAEV,uBAAS,6VAAC,iSAAK;oBAAC,MAAM;;;;;yCAAS,6VAAC,8RAAI;oBAAC,MAAM;;;;;;;;;;;YAE5C;;;;;;;AAGJ","debugId":null}},
    {"offset": {"line": 340, "column": 0}, "map": {"version":3,"sources":["file:///E:/qbb/github/blog-public/src/hooks/use-markdown-render.tsx"],"sourcesContent":["import { useEffect, useState, type ReactElement } from 'react'\r\nimport parse, { type HTMLReactParserOptions, Element, type DOMNode } from 'html-react-parser'\r\nimport { renderMarkdown, type TocItem } from '@/lib/markdown-renderer'\r\nimport { MarkdownImage } from '@/components/markdown-image'\r\nimport { CodeBlock } from '@/components/code-block'\r\n\r\ntype MarkdownRenderResult = {\r\n\tcontent: ReactElement | null\r\n\ttoc: TocItem[]\r\n\tloading: boolean\r\n}\r\n\r\nexport function useMarkdownRender(markdown: string): MarkdownRenderResult {\r\n\tconst [content, setContent] = useState<ReactElement | null>(null)\r\n\tconst [toc, setToc] = useState<TocItem[]>([])\r\n\tconst [loading, setLoading] = useState<boolean>(true)\r\n\r\n\tuseEffect(() => {\r\n\t\tlet cancelled = false\r\n\r\n\t\tasync function render() {\r\n\t\t\tsetLoading(true)\r\n\t\t\ttry {\r\n\t\t\t\tconst { html, toc } = await renderMarkdown(markdown)\r\n\t\t\t\tif (!cancelled) {\r\n\t\t\t\t\t// Extract pre elements and replace with placeholders before parsing\r\n\t\t\t\t\tconst codeBlocks: Array<{ placeholder: string; code: string; preHtml: string }> = []\r\n\t\t\t\t\tlet processedHtml = html.replace(/<pre\\s+data-code=\"([^\"]*)\"([^>]*)>([\\s\\S]*?)<\\/pre>/g, (match, codeAttr, attrs, content) => {\r\n\t\t\t\t\t\tconst placeholder = `__CODE_BLOCK_${codeBlocks.length}__`\r\n\t\t\t\t\t\t// Decode HTML entities in code attribute\r\n\t\t\t\t\t\tconst code = codeAttr\r\n\t\t\t\t\t\t\t.replace(/&quot;/g, '\"')\r\n\t\t\t\t\t\t\t.replace(/&#39;/g, \"'\")\r\n\t\t\t\t\t\t\t.replace(/&lt;/g, '<')\r\n\t\t\t\t\t\t\t.replace(/&gt;/g, '>')\r\n\t\t\t\t\t\t\t.replace(/&amp;/g, '&')\r\n\t\t\t\t\t\tcodeBlocks.push({\r\n\t\t\t\t\t\t\tplaceholder,\r\n\t\t\t\t\t\t\tcode,\r\n\t\t\t\t\t\t\tpreHtml: `${content}`\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\treturn placeholder\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t\t// Parse HTML and replace img elements and code block placeholders\r\n\t\t\t\t\tconst options: HTMLReactParserOptions = {\r\n\t\t\t\t\t\treplace(domNode: DOMNode) {\r\n\t\t\t\t\t\t\tif (domNode instanceof Element && domNode.name === 'img') {\r\n\t\t\t\t\t\t\t\tconst { src, alt, title } = domNode.attribs\r\n\t\t\t\t\t\t\t\treturn <MarkdownImage src={src} alt={alt} title={title} />\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// Handle code block placeholders in text nodes\r\n\t\t\t\t\t\t\tif (domNode.type === 'text' && domNode.data) {\r\n\t\t\t\t\t\t\t\tconst text = domNode.data\r\n\t\t\t\t\t\t\t\tfor (const block of codeBlocks) {\r\n\t\t\t\t\t\t\t\t\tif (text.includes(block.placeholder)) {\r\n\t\t\t\t\t\t\t\t\t\tconst parts = text.split(block.placeholder)\r\n\t\t\t\t\t\t\t\t\t\tconst preElement = parse(block.preHtml) as ReactElement\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{parts[0] && <>{parts[0]}</>}\r\n\t\t\t\t\t\t\t\t\t\t\t\t<CodeBlock code={block.code}>{preElement}</CodeBlock>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{parts[1] && <>{parts[1]}</>}\r\n\t\t\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst reactContent = parse(processedHtml, options) as ReactElement\r\n\t\t\t\t\tsetContent(reactContent)\r\n\t\t\t\t\tsetToc(toc)\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error('Markdown render error:', error)\r\n\t\t\t\tif (!cancelled) {\r\n\t\t\t\t\tsetContent(null)\r\n\t\t\t\t\tsetToc([])\r\n\t\t\t\t}\r\n\t\t\t} finally {\r\n\t\t\t\tif (!cancelled) {\r\n\t\t\t\t\tsetLoading(false)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\trender()\r\n\r\n\t\treturn () => {\r\n\t\t\tcancelled = true\r\n\t\t}\r\n\t}, [markdown])\r\n\r\n\treturn { content, toc, loading }\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;AACA;AACA;AACA;;;;;;;;;;;AAQO,SAAS,kBAAkB,QAAgB;IACjD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,gUAAQ,EAAsB;IAC5D,MAAM,CAAC,KAAK,OAAO,GAAG,IAAA,gUAAQ,EAAY,EAAE;IAC5C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,gUAAQ,EAAU;IAEhD,IAAA,iUAAS,EAAC;QACT,IAAI,YAAY;QAEhB,eAAe;YACd,WAAW;YACX,IAAI;gBACH,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,MAAM,IAAA,oJAAc,EAAC;gBAC3C,IAAI,CAAC,WAAW;oBACf,oEAAoE;oBACpE,MAAM,aAA4E,EAAE;oBACpF,IAAI,gBAAgB,KAAK,OAAO,CAAC,wDAAwD,CAAC,OAAO,UAAU,OAAO;wBACjH,MAAM,cAAc,CAAC,aAAa,EAAE,WAAW,MAAM,CAAC,EAAE,CAAC;wBACzD,yCAAyC;wBACzC,MAAM,OAAO,SACX,OAAO,CAAC,WAAW,KACnB,OAAO,CAAC,UAAU,KAClB,OAAO,CAAC,SAAS,KACjB,OAAO,CAAC,SAAS,KACjB,OAAO,CAAC,UAAU;wBACpB,WAAW,IAAI,CAAC;4BACf;4BACA;4BACA,SAAS,GAAG,SAAS;wBACtB;wBACA,OAAO;oBACR;oBAEA,kEAAkE;oBAClE,MAAM,UAAkC;wBACvC,SAAQ,OAAgB;4BACvB,IAAI,mBAAmB,+RAAO,IAAI,QAAQ,IAAI,KAAK,OAAO;gCACzD,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE,KAAK,EAAE,GAAG,QAAQ,OAAO;gCAC3C,qBAAO,6VAAC,wJAAa;oCAAC,KAAK;oCAAK,KAAK;oCAAK,OAAO;;;;;;4BAClD;4BACA,+CAA+C;4BAC/C,IAAI,QAAQ,IAAI,KAAK,UAAU,QAAQ,IAAI,EAAE;gCAC5C,MAAM,OAAO,QAAQ,IAAI;gCACzB,KAAK,MAAM,SAAS,WAAY;oCAC/B,IAAI,KAAK,QAAQ,CAAC,MAAM,WAAW,GAAG;wCACrC,MAAM,QAAQ,KAAK,KAAK,CAAC,MAAM,WAAW;wCAC1C,MAAM,aAAa,IAAA,gTAAK,EAAC,MAAM,OAAO;wCACtC,qBACC;;gDACE,KAAK,CAAC,EAAE,kBAAI;8DAAG,KAAK,CAAC,EAAE;;8DACxB,6VAAC,gJAAS;oDAAC,MAAM,MAAM,IAAI;8DAAG;;;;;;gDAC7B,KAAK,CAAC,EAAE,kBAAI;8DAAG,KAAK,CAAC,EAAE;;;;oCAG3B;gCACD;4BACD;wBACD;oBACD;oBACA,MAAM,eAAe,IAAA,gTAAK,EAAC,eAAe;oBAC1C,WAAW;oBACX,OAAO;gBACR;YACD,EAAE,OAAO,OAAO;gBACf,QAAQ,KAAK,CAAC,0BAA0B;gBACxC,IAAI,CAAC,WAAW;oBACf,WAAW;oBACX,OAAO,EAAE;gBACV;YACD,SAAU;gBACT,IAAI,CAAC,WAAW;oBACf,WAAW;gBACZ;YACD;QACD;QAEA;QAEA,OAAO;YACN,YAAY;QACb;IACD,GAAG;QAAC;KAAS;IAEb,OAAO;QAAE;QAAS;QAAK;IAAQ;AAChC","debugId":null}},
    {"offset": {"line": 464, "column": 0}, "map": {"version":3,"sources":["file:///E:/qbb/github/blog-public/src/components/like-button.tsx"],"sourcesContent":["import { useCallback, useEffect, useState } from 'react'\r\nimport useSWR from 'swr'\r\nimport { motion, AnimatePresence } from 'motion/react'\r\nimport { Heart } from 'lucide-react'\r\nimport clsx from 'clsx'\r\nimport { cn } from '@/lib/utils'\r\nimport { toast } from 'sonner'\r\n\r\ntype LikeButtonProps = {\r\n\tslug?: string\r\n\tclassName?: string\r\n\tdelay?: number\r\n}\r\n\r\nconst ENDPOINT = 'https://blog-liker.yysuni1001.workers.dev/api/like'\r\n\r\nexport default function LikeButton({ slug = 'yysuni', delay, className }: LikeButtonProps) {\r\n\tconst [liked, setLiked] = useState(false)\r\n\tconst [show, setShow] = useState(false)\r\n\tconst [justLiked, setJustLiked] = useState(false)\r\n\tconst [particles, setParticles] = useState<Array<{ id: number; x: number; y: number }>>([])\r\n\r\n\tuseEffect(() => {\r\n\t\tsetTimeout(() => {\r\n\t\t\tsetShow(true)\r\n\t\t}, delay || 1000)\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (justLiked) {\r\n\t\t\tconst timer = setTimeout(() => setJustLiked(false), 600)\r\n\t\t\treturn () => clearTimeout(timer)\r\n\t\t}\r\n\t}, [justLiked])\r\n\r\n\tconst fetcher = useCallback(async (url: string): Promise<number | null> => {\r\n\t\tconst res = await fetch(url, { method: 'GET', cache: 'no-store' })\r\n\t\tif (!res.ok) return null\r\n\t\tconst data = await res.json().catch(() => ({}))\r\n\t\treturn typeof data?.count === 'number' ? data.count : null\r\n\t}, [])\r\n\r\n\tconst { data: fetchedCount, mutate } = useSWR(slug ? `${ENDPOINT}?slug=${encodeURIComponent(slug)}` : null, fetcher, {\r\n\t\trevalidateOnFocus: false,\r\n\t\tdedupingInterval: 1000 * 10\r\n\t})\r\n\r\n\tconst handleLike = useCallback(async () => {\r\n\t\tif (!slug) return\r\n\t\tsetLiked(true)\r\n\t\tsetJustLiked(true)\r\n\r\n\t\t// Create particle effects\r\n\t\tconst newParticles = Array.from({ length: 6 }, (_, i) => ({\r\n\t\t\tid: Date.now() + i,\r\n\t\t\tx: Math.random() * 60 - 30,\r\n\t\t\ty: Math.random() * 60 - 30\r\n\t\t}))\r\n\t\tsetParticles(newParticles)\r\n\r\n\t\t// Clear particles after animation\r\n\t\tsetTimeout(() => setParticles([]), 1000)\r\n\r\n\t\ttry {\r\n\t\t\tconst url = `${ENDPOINT}?slug=${encodeURIComponent(slug)}`\r\n\t\t\tconst res = await fetch(url, { method: 'POST' })\r\n\t\t\tconst data = await res.json().catch(() => ({}))\r\n\t\t\tif (data.reason == 'rate_limited') toast('Ë∞¢Ë∞¢Âï¶üòòÔºå‰ªäÂ§©Â∑≤Áªè‰∏çËÉΩÂÜçÁÇπËµûÂï¶üíï')\r\n\t\t\tconst value = typeof data?.count === 'number' ? data.count : (fetchedCount ?? 0) + 1\r\n\t\t\tawait mutate(value, { revalidate: false })\r\n\t\t} catch {\r\n\t\t\t// ignore\r\n\t\t}\r\n\t}, [slug, fetchedCount, mutate])\r\n\r\n\tconst count = typeof fetchedCount === 'number' ? fetchedCount : null\r\n\r\n\tif (show)\r\n\t\treturn (\r\n\t\t\t<motion.button\r\n\t\t\t\tinitial={{ opacity: 0, scale: 0.6 }}\r\n\t\t\t\tanimate={{ opacity: 1, scale: 1 }}\r\n\t\t\t\twhileHover={{ scale: 1.05 }}\r\n\t\t\t\twhileTap={{ scale: 0.95 }}\r\n\t\t\t\taria-label='Like this post'\r\n\t\t\t\tonClick={handleLike}\r\n\t\t\t\tclassName={clsx('card heartbeat-container relative overflow-visible rounded-full p-3', className)}>\r\n\t\t\t\t<AnimatePresence>\r\n\t\t\t\t\t{particles.map(particle => (\r\n\t\t\t\t\t\t<motion.div\r\n\t\t\t\t\t\t\tkey={particle.id}\r\n\t\t\t\t\t\t\tclassName='pointer-events-none absolute inset-0 flex items-center justify-center'\r\n\t\t\t\t\t\t\tinitial={{ opacity: 1, scale: 0, x: 0, y: 0 }}\r\n\t\t\t\t\t\t\tanimate={{\r\n\t\t\t\t\t\t\t\topacity: [1, 1, 0],\r\n\t\t\t\t\t\t\t\tscale: [0, 1.2, 0.8],\r\n\t\t\t\t\t\t\t\tx: particle.x,\r\n\t\t\t\t\t\t\t\ty: particle.y\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\texit={{ opacity: 0 }}\r\n\t\t\t\t\t\t\ttransition={{ duration: 0.8, ease: 'easeOut' }}>\r\n\t\t\t\t\t\t\t<Heart className='fill-rose-400 text-rose-400' size={12} />\r\n\t\t\t\t\t\t</motion.div>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</AnimatePresence>\r\n\r\n\t\t\t\t{typeof count === 'number' && (\r\n\t\t\t\t\t<motion.span\r\n\t\t\t\t\t\tinitial={{ scale: 0.4 }}\r\n\t\t\t\t\t\tanimate={{ scale: 1 }}\r\n\t\t\t\t\t\tclassName={cn(\r\n\t\t\t\t\t\t\t'absolute -top-2 left-9 min-w-6 rounded-full px-1.5 py-1 text-center text-xs text-white tabular-nums',\r\n\t\t\t\t\t\t\tliked ? 'bg-rose-400' : 'bg-gray-300'\r\n\t\t\t\t\t\t)}>\r\n\t\t\t\t\t\t{count}\r\n\t\t\t\t\t</motion.span>\r\n\t\t\t\t)}\r\n\t\t\t\t<motion.div animate={justLiked ? { scale: [1, 1.4, 1], rotate: [0, -10, 10, 0] } : {}} transition={{ duration: 0.6, ease: 'easeOut' }}>\r\n\t\t\t\t\t<Heart className={clsx('heartbeat', liked ? 'fill-rose-400 text-rose-400' : 'fill-rose-200 text-rose-200')} size={28} />\r\n\t\t\t\t</motion.div>\r\n\t\t\t</motion.button>\r\n\t\t)\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 675, "column": 0}, "map": {"version":3,"sources":["file:///E:/qbb/github/blog-public/src/components/blog-toc.tsx"],"sourcesContent":["'use client'\r\n\r\nimport clsx from 'clsx'\r\nimport { motion } from 'motion/react'\r\nimport { useEffect, useMemo, useState } from 'react'\r\n\r\ntype TocItem = {\r\n\tid: string\r\n\ttext: string\r\n\tlevel: number\r\n}\r\n\r\ntype BlogTocProps = {\r\n\ttoc: TocItem[]\r\n\tdelay?: number\r\n}\r\n\r\nexport function BlogToc({ toc, delay = 0 }: BlogTocProps) {\r\n\tconst [activeIds, setActiveIds] = useState<Set<string>>(new Set())\r\n\tconst minActiveId = useMemo(() => {\r\n\t\treturn Array.from(activeIds).sort((a, b) => toc.findIndex(item => item.id === a) - toc.findIndex(item => item.id === b))[0]\r\n\t}, [activeIds, toc])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (toc.length === 0) return\r\n\r\n\t\tconst observers = new Map<string, IntersectionObserver>()\r\n\r\n\t\t// Create observers for each heading\r\n\t\ttoc.forEach(item => {\r\n\t\t\tconst element = document.getElementById(item.id)\r\n\t\t\tif (!element) return\r\n\r\n\t\t\tconst observer = new IntersectionObserver(\r\n\t\t\t\tentries => {\r\n\t\t\t\t\tentries.forEach(entry => {\r\n\t\t\t\t\t\tsetActiveIds(prev => {\r\n\t\t\t\t\t\t\tconst newSet = new Set(prev)\r\n\t\t\t\t\t\t\tif (entry.isIntersecting) newSet.add(entry.target.id)\r\n\t\t\t\t\t\t\telse newSet.delete(entry.target.id)\r\n\r\n\t\t\t\t\t\t\treturn newSet\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trootMargin: '-100px 0px -100px 0px',\r\n\t\t\t\t\tthreshold: 0\r\n\t\t\t\t}\r\n\t\t\t)\r\n\r\n\t\t\tobserver.observe(element)\r\n\t\t\tobservers.set(item.id, observer)\r\n\t\t})\r\n\r\n\t\treturn () => {\r\n\t\t\tobservers.forEach(observer => observer.disconnect())\r\n\t\t}\r\n\t}, [toc])\r\n\r\n\treturn (\r\n\t\t<motion.div\r\n\t\t\tinitial={{ opacity: 0, scale: 0.8 }}\r\n\t\t\tanimate={{ opacity: 1, scale: 1 }}\r\n\t\t\ttransition={{ delay }}\r\n\t\t\tclassName='bg-card w-full rounded-xl border p-3 text-sm'>\r\n\t\t\t<h2 className='text-secondary mb-2 font-medium'>ÁõÆÂΩï</h2>\r\n\t\t\t<div className='relative max-h-[300px] space-y-2 overflow-auto'>\r\n\t\t\t\t{toc.length === 0 && <div className='text-secondary'>ÊöÇÊó†</div>}\r\n\t\t\t\t{toc.map(item => (\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\tkey={item.id + item.level}\r\n\t\t\t\t\t\thref={`#${item.id}`}\r\n\t\t\t\t\t\tclassName={clsx('hover:text-brand relative block pl-3 transition-colors', item.id === minActiveId && 'text-brand')}\r\n\t\t\t\t\t\tstyle={{ paddingLeft: (item.level - 1) * 8 }}>\r\n\t\t\t\t\t\t{item.text}\r\n\t\t\t\t\t</a>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t</motion.div>\r\n\t)\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAiBO,SAAS,QAAQ,EAAE,GAAG,EAAE,QAAQ,CAAC,EAAgB;IACvD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,gUAAQ,EAAc,IAAI;IAC5D,MAAM,cAAc,IAAA,+TAAO,EAAC;QAC3B,OAAO,MAAM,IAAI,CAAC,WAAW,IAAI,CAAC,CAAC,GAAG,IAAM,IAAI,SAAS,CAAC,CAAA,OAAQ,KAAK,EAAE,KAAK,KAAK,IAAI,SAAS,CAAC,CAAA,OAAQ,KAAK,EAAE,KAAK,GAAG,CAAC,EAAE;IAC5H,GAAG;QAAC;QAAW;KAAI;IAEnB,IAAA,iUAAS,EAAC;QACT,IAAI,IAAI,MAAM,KAAK,GAAG;QAEtB,MAAM,YAAY,IAAI;QAEtB,oCAAoC;QACpC,IAAI,OAAO,CAAC,CAAA;YACX,MAAM,UAAU,SAAS,cAAc,CAAC,KAAK,EAAE;YAC/C,IAAI,CAAC,SAAS;YAEd,MAAM,WAAW,IAAI,qBACpB,CAAA;gBACC,QAAQ,OAAO,CAAC,CAAA;oBACf,aAAa,CAAA;wBACZ,MAAM,SAAS,IAAI,IAAI;wBACvB,IAAI,MAAM,cAAc,EAAE,OAAO,GAAG,CAAC,MAAM,MAAM,CAAC,EAAE;6BAC/C,OAAO,MAAM,CAAC,MAAM,MAAM,CAAC,EAAE;wBAElC,OAAO;oBACR;gBACD;YACD,GACA;gBACC,YAAY;gBACZ,WAAW;YACZ;YAGD,SAAS,OAAO,CAAC;YACjB,UAAU,GAAG,CAAC,KAAK,EAAE,EAAE;QACxB;QAEA,OAAO;YACN,UAAU,OAAO,CAAC,CAAA,WAAY,SAAS,UAAU;QAClD;IACD,GAAG;QAAC;KAAI;IAER,qBACC,6VAAC,0SAAM,CAAC,GAAG;QACV,SAAS;YAAE,SAAS;YAAG,OAAO;QAAI;QAClC,SAAS;YAAE,SAAS;YAAG,OAAO;QAAE;QAChC,YAAY;YAAE;QAAM;QACpB,WAAU;;0BACV,6VAAC;gBAAG,WAAU;0BAAkC;;;;;;0BAChD,6VAAC;gBAAI,WAAU;;oBACb,IAAI,MAAM,KAAK,mBAAK,6VAAC;wBAAI,WAAU;kCAAiB;;;;;;oBACpD,IAAI,GAAG,CAAC,CAAA,qBACR,6VAAC;4BAEA,MAAM,CAAC,CAAC,EAAE,KAAK,EAAE,EAAE;4BACnB,WAAW,IAAA,iMAAI,EAAC,0DAA0D,KAAK,EAAE,KAAK,eAAe;4BACrG,OAAO;gCAAE,aAAa,CAAC,KAAK,KAAK,GAAG,CAAC,IAAI;4BAAE;sCAC1C,KAAK,IAAI;2BAJL,KAAK,EAAE,GAAG,KAAK,KAAK;;;;;;;;;;;;;;;;;AAU/B","debugId":null}},
    {"offset": {"line": 787, "column": 0}, "map": {"version":3,"sources":["file:///E:/qbb/github/blog-public/src/components/blog-sidebar.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport { motion, useScroll, useSpring, useTransform } from 'motion/react'\r\nimport { ANIMATION_DELAY, INIT_DELAY } from '@/consts'\r\nimport LikeButton from '@/components/like-button'\r\nimport { BlogToc } from '@/components/blog-toc'\r\nimport { ScrollTopButton } from '@/components/scroll-top-button'\r\n\r\ntype TocItem = {\r\n\tid: string\r\n\ttext: string\r\n\tlevel: number\r\n}\r\n\r\ntype BlogSidebarProps = {\r\n\tcover?: string\r\n\tsummary?: string\r\n\ttoc: TocItem[]\r\n\tslug?: string\r\n}\r\nconst offset = 72\r\n\r\nexport function BlogSidebar({ cover, summary, toc, slug }: BlogSidebarProps) {\r\n\tconst [maxOffset, setMaxOffset] = useState(0)\r\n\tconst { scrollY } = useScroll()\r\n\r\n\tuseEffect(() => {\r\n\t\tif (typeof window === 'undefined') {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tconst updateMaxOffset = () => {\r\n\t\t\tconst maxScrollable = document.documentElement.scrollHeight - window.innerHeight\r\n\r\n\t\t\tconst nextMaxOffset = Math.max(0, maxScrollable - offset)\r\n\r\n\t\t\tsetMaxOffset(nextMaxOffset)\r\n\t\t}\r\n\r\n\t\tconst timer = setTimeout(() => {\r\n\t\t\tupdateMaxOffset()\r\n\t\t}, 5000)\r\n\r\n\t\tupdateMaxOffset()\r\n\t\twindow.addEventListener('resize', updateMaxOffset)\r\n\r\n\t\treturn () => {\r\n\t\t\twindow.removeEventListener('resize', updateMaxOffset)\r\n\t\t\tclearTimeout(timer)\r\n\t\t}\r\n\t}, [])\r\n\r\n\tconst adjustedScrollY = useTransform(scrollY, value => {\r\n\t\tconst adjusted = Math.max(0, value - offset)\r\n\t\treturn Math.min(adjusted, maxOffset)\r\n\t})\r\n\tconst sidebarY = useSpring(adjustedScrollY, {\r\n\t\tstiffness: 100,\r\n\t\tdamping: 15,\r\n\t\tmass: 0.6,\r\n\t\trestDelta: 0.5\r\n\t})\r\n\r\n\treturn (\r\n\t\t<motion.div className='relative flex w-[200px] shrink-0 flex-col items-start gap-4 self-start max-sm:hidden' style={{ y: sidebarY }}>\r\n\t\t\t{cover && (\r\n\t\t\t\t<motion.div\r\n\t\t\t\t\tinitial={{ opacity: 0, scale: 0.8 }}\r\n\t\t\t\t\tanimate={{ opacity: 1, scale: 1 }}\r\n\t\t\t\t\ttransition={{ delay: INIT_DELAY + ANIMATION_DELAY * 1 }}\r\n\t\t\t\t\tclassName='bg-card w-full rounded-xl p-3'>\r\n\t\t\t\t\t<img src={cover} alt='cover' className='h-auto w-full rounded-xl border object-cover' />\r\n\t\t\t\t</motion.div>\r\n\t\t\t)}\r\n\r\n\t\t\t{summary && (\r\n\t\t\t\t<motion.div\r\n\t\t\t\t\tinitial={{ opacity: 0, scale: 0.8 }}\r\n\t\t\t\t\tanimate={{ opacity: 1, scale: 1 }}\r\n\t\t\t\t\ttransition={{ delay: INIT_DELAY + ANIMATION_DELAY * 2 }}\r\n\t\t\t\t\tclassName='bg-card w-full rounded-xl border p-3 text-sm'>\r\n\t\t\t\t\t<h2 className='text-secondary mb-2 font-medium'>ÊëòË¶Å</h2>\r\n\t\t\t\t\t<div className='text-secondary cursor-text'>{summary}</div>\r\n\t\t\t\t</motion.div>\r\n\t\t\t)}\r\n\r\n\t\t\t<BlogToc toc={toc} delay={INIT_DELAY + ANIMATION_DELAY * 3} />\r\n\r\n\t\t\t<LikeButton slug={slug} delay={(INIT_DELAY + ANIMATION_DELAY * 4) * 1000} />\r\n\r\n\t\t\t<ScrollTopButton delay={INIT_DELAY + ANIMATION_DELAY * 5} />\r\n\t\t</motion.div>\r\n\t)\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAPA;;;;;;;;AAqBA,MAAM,SAAS;AAER,SAAS,YAAY,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG,EAAE,IAAI,EAAoB;IAC1E,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,gUAAQ,EAAC;IAC3C,MAAM,EAAE,OAAO,EAAE,GAAG,IAAA,4RAAS;IAE7B,IAAA,iUAAS,EAAC;QACT,wCAAmC;YAClC;QACD;;;QAEA,MAAM;QAQN,MAAM;IAWP,GAAG,EAAE;IAEL,MAAM,kBAAkB,IAAA,kSAAY,EAAC,SAAS,CAAA;QAC7C,MAAM,WAAW,KAAK,GAAG,CAAC,GAAG,QAAQ;QACrC,OAAO,KAAK,GAAG,CAAC,UAAU;IAC3B;IACA,MAAM,WAAW,IAAA,4RAAS,EAAC,iBAAiB;QAC3C,WAAW;QACX,SAAS;QACT,MAAM;QACN,WAAW;IACZ;IAEA,qBACC,6VAAC,0SAAM,CAAC,GAAG;QAAC,WAAU;QAAuF,OAAO;YAAE,GAAG;QAAS;;YAChI,uBACA,6VAAC,0SAAM,CAAC,GAAG;gBACV,SAAS;oBAAE,SAAS;oBAAG,OAAO;gBAAI;gBAClC,SAAS;oBAAE,SAAS;oBAAG,OAAO;gBAAE;gBAChC,YAAY;oBAAE,OAAO,2HAAU,GAAG,gIAAe,GAAG;gBAAE;gBACtD,WAAU;0BACV,cAAA,6VAAC;oBAAI,KAAK;oBAAO,KAAI;oBAAQ,WAAU;;;;;;;;;;;YAIxC,yBACA,6VAAC,0SAAM,CAAC,GAAG;gBACV,SAAS;oBAAE,SAAS;oBAAG,OAAO;gBAAI;gBAClC,SAAS;oBAAE,SAAS;oBAAG,OAAO;gBAAE;gBAChC,YAAY;oBAAE,OAAO,2HAAU,GAAG,gIAAe,GAAG;gBAAE;gBACtD,WAAU;;kCACV,6VAAC;wBAAG,WAAU;kCAAkC;;;;;;kCAChD,6VAAC;wBAAI,WAAU;kCAA8B;;;;;;;;;;;;0BAI/C,6VAAC,4IAAO;gBAAC,KAAK;gBAAK,OAAO,2HAAU,GAAG,gIAAe,GAAG;;;;;;0BAEzD,6VAAC,+IAAU;gBAAC,MAAM;gBAAM,OAAO,CAAC,2HAAU,GAAG,gIAAe,GAAG,CAAC,IAAI;;;;;;0BAEpE,6VAAC,gKAAe;gBAAC,OAAO,2HAAU,GAAG,gIAAe,GAAG;;;;;;;;;;;;AAG1D","debugId":null}},
    {"offset": {"line": 937, "column": 0}, "map": {"version":3,"sources":["file:///E:/qbb/github/blog-public/src/components/blog-preview.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { motion } from 'motion/react'\r\nimport { INIT_DELAY } from '@/consts'\r\nimport { useMarkdownRender } from '@/hooks/use-markdown-render'\r\nimport { useSize } from '@/hooks/use-size'\r\nimport { BlogSidebar } from '@/components/blog-sidebar'\r\n\r\ntype BlogPreviewProps = {\r\n\tmarkdown: string\r\n\ttitle: string\r\n\ttags: string[]\r\n\tdate: string\r\n\tsummary?: string\r\n\tcover?: string\r\n\tslug?: string\r\n}\r\n\r\nexport function BlogPreview({ markdown, title, tags, date, summary, cover, slug }: BlogPreviewProps) {\r\n\tconst { maxSM: isMobile } = useSize()\r\n\tconst { content, toc, loading } = useMarkdownRender(markdown)\r\n\r\n\tif (loading) {\r\n\t\treturn <div className='text-secondary flex h-full items-center justify-center text-sm'>Ê∏≤Êüì‰∏≠...</div>\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='mx-auto flex max-w-[1140px] justify-center gap-6 px-6 pt-28 pb-12 max-sm:px-0'>\r\n\t\t\t<motion.article\r\n\t\t\t\tinitial={{ opacity: 0 }}\r\n\t\t\t\tanimate={{ opacity: 1 }}\r\n\t\t\t\ttransition={{ delay: INIT_DELAY }}\r\n\t\t\t\tclassName='card bg-article static flex-1 overflow-auto rounded-xl p-8'>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div className='text-center text-2xl font-semibold'>{title}</div>\r\n\r\n\t\t\t\t\t<div className='text-secondary mt-4 flex flex-wrap items-center justify-center gap-3 px-8 text-center text-sm'>\r\n\t\t\t\t\t\t{tags.map(t => (\r\n\t\t\t\t\t\t\t<span key={t}>#{t}</span>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className='text-secondary mt-3 text-center text-sm'>{date}</div>\r\n\t\t\t\t\t<div className='prose mt-6 max-w-none cursor-text'>{content}</div>\r\n\t\t\t\t</div>\r\n\t\t\t</motion.article>\r\n\r\n\t\t\t{!isMobile && <BlogSidebar cover={cover} summary={summary} toc={toc} slug={slug} />}\r\n\t\t</div>\r\n\t)\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;;;;;AANA;;;;;;;AAkBO,SAAS,YAAY,EAAE,QAAQ,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE,IAAI,EAAoB;IAClG,MAAM,EAAE,OAAO,QAAQ,EAAE,GAAG,IAAA,sIAAO;IACnC,MAAM,EAAE,OAAO,EAAE,GAAG,EAAE,OAAO,EAAE,GAAG,IAAA,+JAAiB,EAAC;IAEpD,IAAI,SAAS;QACZ,qBAAO,6VAAC;YAAI,WAAU;sBAAiE;;;;;;IACxF;IAEA,qBACC,6VAAC;QAAI,WAAU;;0BACd,6VAAC,0SAAM,CAAC,OAAO;gBACd,SAAS;oBAAE,SAAS;gBAAE;gBACtB,SAAS;oBAAE,SAAS;gBAAE;gBACtB,YAAY;oBAAE,OAAO,2HAAU;gBAAC;gBAChC,WAAU;0BACV,cAAA,6VAAC;;sCACA,6VAAC;4BAAI,WAAU;sCAAsC;;;;;;sCAErD,6VAAC;4BAAI,WAAU;sCACb,KAAK,GAAG,CAAC,CAAA,kBACT,6VAAC;;wCAAa;wCAAE;;mCAAL;;;;;;;;;;sCAIb,6VAAC;4BAAI,WAAU;sCAA2C;;;;;;sCAC1D,6VAAC;4BAAI,WAAU;sCAAqC;;;;;;;;;;;;;;;;;YAIrD,CAAC,0BAAY,6VAAC,oJAAW;gBAAC,OAAO;gBAAO,SAAS;gBAAS,KAAK;gBAAK,MAAM;;;;;;;;;;;;AAG9E","debugId":null}},
    {"offset": {"line": 1061, "column": 0}, "map": {"version":3,"sources":["file:///E:/qbb/github/blog-public/src/lib/load-blog.ts"],"sourcesContent":["export type BlogConfig = {\r\n\ttitle?: string\r\n\ttags?: string[]\r\n\tdate?: string\r\n\tsummary?: string\r\n\tcover?: string\r\n}\r\n\r\nexport type LoadedBlog = {\r\n\tslug: string\r\n\tconfig: BlogConfig\r\n\tmarkdown: string\r\n\tcover?: string\r\n}\r\n\r\n/**\r\n * Load blog data from public/blogs/{slug}\r\n * Used by both view page and edit page\r\n */\r\nexport async function loadBlog(slug: string): Promise<LoadedBlog> {\r\n\tif (!slug) {\r\n\t\tthrow new Error('Slug is required')\r\n\t}\r\n\r\n\t// Load config.json\r\n\tlet config: BlogConfig = {}\r\n\tconst configRes = await fetch(`/blogs/${encodeURIComponent(slug)}/config.json`)\r\n\tif (configRes.ok) {\r\n\t\ttry {\r\n\t\t\tconfig = await configRes.json()\r\n\t\t} catch {\r\n\t\t\tconfig = {}\r\n\t\t}\r\n\t}\r\n\r\n\t// Load index.md\r\n\tconst mdRes = await fetch(`/blogs/${encodeURIComponent(slug)}/index.md`)\r\n\tif (!mdRes.ok) {\r\n\t\tthrow new Error('Blog not found')\r\n\t}\r\n\tconst markdown = await mdRes.text()\r\n\r\n\treturn {\r\n\t\tslug,\r\n\t\tconfig,\r\n\t\tmarkdown,\r\n\t\tcover: config.cover\r\n\t}\r\n}\r\n"],"names":[],"mappings":";;;;AAmBO,eAAe,SAAS,IAAY;IAC1C,IAAI,CAAC,MAAM;QACV,MAAM,IAAI,MAAM;IACjB;IAEA,mBAAmB;IACnB,IAAI,SAAqB,CAAC;IAC1B,MAAM,YAAY,MAAM,MAAM,CAAC,OAAO,EAAE,mBAAmB,MAAM,YAAY,CAAC;IAC9E,IAAI,UAAU,EAAE,EAAE;QACjB,IAAI;YACH,SAAS,MAAM,UAAU,IAAI;QAC9B,EAAE,OAAM;YACP,SAAS,CAAC;QACX;IACD;IAEA,gBAAgB;IAChB,MAAM,QAAQ,MAAM,MAAM,CAAC,OAAO,EAAE,mBAAmB,MAAM,SAAS,CAAC;IACvE,IAAI,CAAC,MAAM,EAAE,EAAE;QACd,MAAM,IAAI,MAAM;IACjB;IACA,MAAM,WAAW,MAAM,MAAM,IAAI;IAEjC,OAAO;QACN;QACA;QACA;QACA,OAAO,OAAO,KAAK;IACpB;AACD","debugId":null}},
    {"offset": {"line": 1096, "column": 0}, "map": {"version":3,"sources":["file:///E:/qbb/github/blog-public/src/hooks/use-read-articles.ts"],"sourcesContent":["import { create } from 'zustand'\r\nimport { persist } from 'zustand/middleware'\r\n\r\n// Use object hash for faster lookup - O(1) time complexity\r\ntype ReadArticlesHash = Record<string, boolean>\r\n\r\ninterface ReadArticlesStore {\r\n\treadArticles: ReadArticlesHash\r\n\tmarkAsRead: (slug: string) => void\r\n\tisRead: (slug: string) => boolean\r\n\tclearAll: () => void\r\n}\r\n\r\nexport const useReadArticles = create<ReadArticlesStore>()(\r\n\tpersist(\r\n\t\t(set, get) => ({\r\n\t\t\treadArticles: {},\r\n\t\t\tmarkAsRead: (slug: string) => {\r\n\t\t\t\tset(state => ({\r\n\t\t\t\t\treadArticles: {\r\n\t\t\t\t\t\t...state.readArticles,\r\n\t\t\t\t\t\t[slug]: true\r\n\t\t\t\t\t}\r\n\t\t\t\t}))\r\n\t\t\t},\r\n\t\t\tisRead: (slug: string) => {\r\n\t\t\t\treturn get().readArticles[slug] === true\r\n\t\t\t},\r\n\t\t\tclearAll: () => {\r\n\t\t\t\tset({ readArticles: {} })\r\n\t\t\t}\r\n\t\t}),\r\n\t\t{\r\n\t\t\tname: 'blog-read-articles'\r\n\t\t}\r\n\t)\r\n)\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAYO,MAAM,kBAAkB,IAAA,8PAAM,IACpC,IAAA,oQAAO,EACN,CAAC,KAAK,MAAQ,CAAC;QACd,cAAc,CAAC;QACf,YAAY,CAAC;YACZ,IAAI,CAAA,QAAS,CAAC;oBACb,cAAc;wBACb,GAAG,MAAM,YAAY;wBACrB,CAAC,KAAK,EAAE;oBACT;gBACD,CAAC;QACF;QACA,QAAQ,CAAC;YACR,OAAO,MAAM,YAAY,CAAC,KAAK,KAAK;QACrC;QACA,UAAU;YACT,IAAI;gBAAE,cAAc,CAAC;YAAE;QACxB;IACD,CAAC,GACD;IACC,MAAM;AACP","debugId":null}},
    {"offset": {"line": 1132, "column": 0}, "map": {"version":3,"sources":["file:///E:/qbb/github/blog-public/src/components/liquid-grass/displacement-1.png.mjs%20%28structured%20image%20object%20with%20data%20url%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 210, height: 150, blurWidth: 8, blurHeight: 6, blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAYAAAD+Bd/7AAAAV0lEQVR42hXKMRHDMAwAQIMwEW2loQsSMRGSnGh0K5FgaN7Db7+e7/r/GJoiCTbruQWGpkiCfZ/QAkNTJMHuE0pgaIok2HXCJTA0RRLs64SPwNAUSbB5AZljYAGuuBcwAAAAAElFTkSuQmCC\"};\n"],"names":[],"mappings":";;;;AAAA;;uCACe;IAAE,KAAA,8KAAG;IAAE,OAAO;IAAK,QAAQ;IAAK,WAAW;IAAG,YAAY;IAAG,aAAa;AAAwN","debugId":null}},
    {"offset": {"line": 1153, "column": 0}, "map": {"version":3,"sources":["file:///E:/qbb/github/blog-public/src/components/liquid-grass/displacement-2.png.mjs%20%28structured%20image%20object%20with%20data%20url%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 420, height: 300, blurWidth: 8, blurHeight: 6, blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAYAAAD+Bd/7AAAAYElEQVR42n2OsQrAIBBD878V6eBSOUGo3ORU2++9RqRDQRwCIS+QQBVWH9jZYPkaSvSBWSTDXWGlEOS/hJkjQ5vAT770giwK0icCJyYlYebIoJEnN570BPtQog/M4gF7AWZBX9i0zuLQAAAAAElFTkSuQmCC\"};\n"],"names":[],"mappings":";;;;AAAA;;uCACe;IAAE,KAAA,8KAAG;IAAE,OAAO;IAAK,QAAQ;IAAK,WAAW;IAAG,YAAY;IAAG,aAAa;AAAoO","debugId":null}},
    {"offset": {"line": 1174, "column": 0}, "map": {"version":3,"sources":["file:///E:/qbb/github/blog-public/src/components/liquid-grass/border.png.mjs%20%28structured%20image%20object%20with%20data%20url%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 420, height: 300, blurWidth: 8, blurHeight: 6, blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAYAAAD+Bd/7AAAAUUlEQVR42nVOQQrAMAjTtqviQPT/n53p2M0FIiJJDI0xWFVXcX80M81Mx07MTB1gdPeb5py9oiAi6x0/OGbEIK4TnPcoEhGOYpW2wbpdKA7jAxPBAr9F8GTFAAAAAElFTkSuQmCC\"};\n"],"names":[],"mappings":";;;;AAAA;;uCACe;IAAE,KAAA,mKAAG;IAAE,OAAO;IAAK,QAAQ;IAAK,WAAW;IAAG,YAAY;IAAG,aAAa;AAAgN","debugId":null}},
    {"offset": {"line": 1192, "column": 0}, "map": {"version":3,"sources":["file:///E:/qbb/github/blog-public/src/components/liquid-grass/index.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { createPortal } from 'react-dom'\r\nimport { motion } from 'motion/react'\r\nimport displacement1 from './displacement-1.png'\r\nimport displacement2 from './displacement-2.png'\r\nimport borderImg from './border.png'\r\nimport { useEffect, useRef, useState } from 'react'\r\n\r\nconst width = 210\r\nconst height = 150\r\n\r\nexport default function LiquidGrass() {\r\n\tconst bodyRef = useRef(document.body)\r\n\tconst [show, setShow] = useState(false)\r\n\r\n\tuseEffect(() => {\r\n\t\tsetTimeout(() => {\r\n\t\t\tsetShow(true)\r\n\t\t}, 1000)\r\n\t}, [])\r\n\r\n\tif (!show) return null\r\n\r\n\treturn createPortal(\r\n\t\t<motion.div\r\n\t\t\tinitial={{ opacity: 0 }}\r\n\t\t\tanimate={{ opacity: 1 }}\r\n\t\t\tdrag\r\n\t\t\tdragConstraints={bodyRef}\r\n\t\t\tstyle={{ width, height }}\r\n\t\t\tclassName='fixed top-16 right-1/2 z-90 select-none'\r\n\t\t\twhileTap={{\r\n\t\t\t\tscale: 1.1\r\n\t\t\t}}>\r\n\t\t\t<svg colorInterpolationFilters='sRGB' style={{ display: 'none' }}>\r\n\t\t\t\t<defs>\r\n\t\t\t\t\t<filter id='magnifying-glass-filter'>\r\n\t\t\t\t\t\t<feImage href={displacement1.src} x='0' y='0' width={width} height={height} result='magnifying_displacement_map' />\r\n\t\t\t\t\t\t<feDisplacementMap\r\n\t\t\t\t\t\t\tin='SourceGraphic'\r\n\t\t\t\t\t\t\tin2='magnifying_displacement_map'\r\n\t\t\t\t\t\t\tscale='24'\r\n\t\t\t\t\t\t\txChannelSelector='R'\r\n\t\t\t\t\t\t\tyChannelSelector='G'\r\n\t\t\t\t\t\t\tresult='magnified_source'\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<feGaussianBlur in='magnified_source' stdDeviation='0' result='blurred_source' />\r\n\t\t\t\t\t\t<feImage href={displacement2.src} x='0' y='0' width={width} height={height} result='displacement_map' />\r\n\t\t\t\t\t\t<feDisplacementMap in='blurred_source' in2='displacement_map' scale='80' xChannelSelector='R' yChannelSelector='G' result='displaced' />\r\n\t\t\t\t\t\t<feColorMatrix in='displaced' type='saturate' result='displaced_saturated' values='9'></feColorMatrix>\r\n\t\t\t\t\t\t<feImage href={borderImg.src} x='0' y='0' width={width} height={height} result='specular_layer'></feImage>\r\n\t\t\t\t\t\t<feComposite in='displaced_saturated' in2='specular_layer' operator='in' result='specular_saturated'></feComposite>\r\n\t\t\t\t\t\t<feComponentTransfer in='specular_layer' result='specular_faded'>\r\n\t\t\t\t\t\t\t<feFuncA type='linear' slope='0.5'></feFuncA>\r\n\t\t\t\t\t\t</feComponentTransfer>\r\n\t\t\t\t\t\t<feBlend in='specular_saturated' in2='displaced' mode='normal' result='withSaturation'></feBlend>\r\n\t\t\t\t\t\t<feBlend in='specular_faded' in2='withSaturation' mode='normal'></feBlend>\r\n\t\t\t\t\t</filter>\r\n\t\t\t\t</defs>\r\n\t\t\t</svg>\r\n\r\n\t\t\t<div\r\n\t\t\t\tclassName='absolute inset-0 rounded-full'\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tbackdropFilter: 'url(#magnifying-glass-filter)',\r\n\t\t\t\t\tboxShadow: 'rgba(0, 0, 0, 0.05) 0px 4px 9px, rgba(0, 0, 0, 0.05) 0px 2px 24px inset, rgba(255, 255, 255, 0.2) 0px -2px 24px inset'\r\n\t\t\t\t}}></div>\r\n\t\t</motion.div>,\r\n\t\tdocument.body\r\n\t)\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAPA;;;;;;;;AASA,MAAM,QAAQ;AACd,MAAM,SAAS;AAEA,SAAS;IACvB,MAAM,UAAU,IAAA,8TAAM,EAAC,SAAS,IAAI;IACpC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,gUAAQ,EAAC;IAEjC,IAAA,iUAAS,EAAC;QACT,WAAW;YACV,QAAQ;QACT,GAAG;IACJ,GAAG,EAAE;IAEL,IAAI,CAAC,MAAM,OAAO;IAElB,qBAAO,IAAA,2UAAY,gBAClB,6VAAC,0SAAM,CAAC,GAAG;QACV,SAAS;YAAE,SAAS;QAAE;QACtB,SAAS;YAAE,SAAS;QAAE;QACtB,IAAI;QACJ,iBAAiB;QACjB,OAAO;YAAE;YAAO;QAAO;QACvB,WAAU;QACV,UAAU;YACT,OAAO;QACR;;0BACA,6VAAC;gBAAI,2BAA0B;gBAAO,OAAO;oBAAE,SAAS;gBAAO;0BAC9D,cAAA,6VAAC;8BACA,cAAA,6VAAC;wBAAO,IAAG;;0CACV,6VAAC;gCAAQ,MAAM,+XAAa,CAAC,GAAG;gCAAE,GAAE;gCAAI,GAAE;gCAAI,OAAO;gCAAO,QAAQ;gCAAQ,QAAO;;;;;;0CACnF,6VAAC;gCACA,IAAG;gCACH,KAAI;gCACJ,OAAM;gCACN,kBAAiB;gCACjB,kBAAiB;gCACjB,QAAO;;;;;;0CAER,6VAAC;gCAAe,IAAG;gCAAmB,cAAa;gCAAI,QAAO;;;;;;0CAC9D,6VAAC;gCAAQ,MAAM,+XAAa,CAAC,GAAG;gCAAE,GAAE;gCAAI,GAAE;gCAAI,OAAO;gCAAO,QAAQ;gCAAQ,QAAO;;;;;;0CACnF,6VAAC;gCAAkB,IAAG;gCAAiB,KAAI;gCAAmB,OAAM;gCAAK,kBAAiB;gCAAI,kBAAiB;gCAAI,QAAO;;;;;;0CAC1H,6VAAC;gCAAc,IAAG;gCAAY,MAAK;gCAAW,QAAO;gCAAsB,QAAO;;;;;;0CAClF,6VAAC;gCAAQ,MAAM,yWAAS,CAAC,GAAG;gCAAE,GAAE;gCAAI,GAAE;gCAAI,OAAO;gCAAO,QAAQ;gCAAQ,QAAO;;;;;;0CAC/E,6VAAC;gCAAY,IAAG;gCAAsB,KAAI;gCAAiB,UAAS;gCAAK,QAAO;;;;;;0CAChF,6VAAC;gCAAoB,IAAG;gCAAiB,QAAO;0CAC/C,cAAA,6VAAC;oCAAQ,MAAK;oCAAS,OAAM;;;;;;;;;;;0CAE9B,6VAAC;gCAAQ,IAAG;gCAAqB,KAAI;gCAAY,MAAK;gCAAS,QAAO;;;;;;0CACtE,6VAAC;gCAAQ,IAAG;gCAAiB,KAAI;gCAAiB,MAAK;;;;;;;;;;;;;;;;;;;;;;0BAK1D,6VAAC;gBACA,WAAU;gBACV,OAAO;oBACN,gBAAgB;oBAChB,WAAW;gBACZ;;;;;;;;;;;cAEF,SAAS,IAAI;AAEf","debugId":null}},
    {"offset": {"line": 1413, "column": 0}, "map": {"version":3,"sources":["file:///E:/qbb/github/blog-public/src/app/blog/%5Bid%5D/page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect, useMemo, useState } from 'react'\r\nimport { useParams, useRouter } from 'next/navigation'\r\nimport dayjs from 'dayjs'\r\nimport { motion } from 'motion/react'\r\nimport { BlogPreview } from '@/components/blog-preview'\r\nimport { loadBlog, type BlogConfig } from '@/lib/load-blog'\r\nimport { useReadArticles } from '@/hooks/use-read-articles'\r\nimport LiquidGrass from '@/components/liquid-grass'\r\n\r\nexport default function Page() {\r\n\tconst params = useParams() as { id?: string | string[] }\r\n\tconst slug = Array.isArray(params?.id) ? params.id[0] : params?.id || ''\r\n\tconst router = useRouter()\r\n\tconst { markAsRead } = useReadArticles()\r\n\r\n\tconst [blog, setBlog] = useState<{ config: BlogConfig; markdown: string; cover?: string } | null>(null)\r\n\tconst [error, setError] = useState<string | null>(null)\r\n\tconst [loading, setLoading] = useState<boolean>(true)\r\n\r\n\tuseEffect(() => {\r\n\t\tlet cancelled = false\r\n\t\tasync function run() {\r\n\t\t\tif (!slug) return\r\n\t\t\ttry {\r\n\t\t\t\tsetLoading(true)\r\n\t\t\t\tconst blogData = await loadBlog(slug)\r\n\r\n\t\t\t\tif (!cancelled) {\r\n\t\t\t\t\tsetBlog(blogData)\r\n\t\t\t\t\tsetError(null)\r\n\t\t\t\t\tmarkAsRead(slug)\r\n\t\t\t\t}\r\n\t\t\t} catch (e: any) {\r\n\t\t\t\tif (!cancelled) setError(e?.message || 'Âä†ËΩΩÂ§±Ë¥•')\r\n\t\t\t} finally {\r\n\t\t\t\tif (!cancelled) setLoading(false)\r\n\t\t\t}\r\n\t\t}\r\n\t\trun()\r\n\t\treturn () => {\r\n\t\t\tcancelled = true\r\n\t\t}\r\n\t}, [slug, markAsRead])\r\n\r\n\tconst title = useMemo(() => (blog?.config.title ? blog.config.title : slug), [blog?.config.title, slug])\r\n\tconst date = useMemo(() => dayjs(blog?.config.date).format('YYYYÂπ¥ MÊúà DÊó•'), [blog?.config.date])\r\n\tconst tags = blog?.config.tags || []\r\n\r\n\tconst handleEdit = () => {\r\n\t\trouter.push(`/write/${slug}`)\r\n\t}\r\n\r\n\tif (!slug) {\r\n\t\treturn <div className='text-secondary flex h-full items-center justify-center text-sm'>Êó†ÊïàÁöÑÈìæÊé•</div>\r\n\t}\r\n\r\n\tif (loading) {\r\n\t\treturn <div className='text-secondary flex h-full items-center justify-center text-sm'>Âä†ËΩΩ‰∏≠...</div>\r\n\t}\r\n\r\n\tif (error) {\r\n\t\treturn <div className='flex h-full items-center justify-center text-sm text-red-500'>{error}</div>\r\n\t}\r\n\r\n\tif (!blog) {\r\n\t\treturn <div className='text-secondary flex h-full items-center justify-center text-sm'>ÊñáÁ´†‰∏çÂ≠òÂú®</div>\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<BlogPreview\r\n\t\t\t\tmarkdown={blog.markdown}\r\n\t\t\t\ttitle={title}\r\n\t\t\t\ttags={tags}\r\n\t\t\t\tdate={date}\r\n\t\t\t\tsummary={blog.config.summary}\r\n\t\t\t\tcover={blog.cover ? `${origin}${blog.cover}` : undefined}\r\n\t\t\t\tslug={slug}\r\n\t\t\t/>\r\n\r\n\t\t\t<motion.button\r\n\t\t\t\tinitial={{ opacity: 0, scale: 0.6 }}\r\n\t\t\t\tanimate={{ opacity: 1, scale: 1 }}\r\n\t\t\t\twhileHover={{ scale: 1.05 }}\r\n\t\t\t\twhileTap={{ scale: 0.95 }}\r\n\t\t\t\tonClick={handleEdit}\r\n\t\t\t\tclassName='absolute top-4 right-6 rounded-xl border bg-white/60 px-6 py-2 text-sm backdrop-blur-sm transition-colors hover:bg-white/80 max-sm:hidden'>\r\n\t\t\t\tÁºñËæë\r\n\t\t\t</motion.button>\r\n\r\n\t\t\t{slug === 'liquid-grass' && <LiquidGrass />}\r\n\t\t</>\r\n\t)\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AATA;;;;;;;;;;AAWe,SAAS;IACvB,MAAM,SAAS,IAAA,8PAAS;IACxB,MAAM,OAAO,MAAM,OAAO,CAAC,QAAQ,MAAM,OAAO,EAAE,CAAC,EAAE,GAAG,QAAQ,MAAM;IACtE,MAAM,SAAS,IAAA,8PAAS;IACxB,MAAM,EAAE,UAAU,EAAE,GAAG,IAAA,0JAAe;IAEtC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,gUAAQ,EAAkE;IAClG,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,gUAAQ,EAAgB;IAClD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,gUAAQ,EAAU;IAEhD,IAAA,iUAAS,EAAC;QACT,IAAI,YAAY;QAChB,eAAe;YACd,IAAI,CAAC,MAAM;YACX,IAAI;gBACH,WAAW;gBACX,MAAM,WAAW,MAAM,IAAA,sIAAQ,EAAC;gBAEhC,IAAI,CAAC,WAAW;oBACf,QAAQ;oBACR,SAAS;oBACT,WAAW;gBACZ;YACD,EAAE,OAAO,GAAQ;gBAChB,IAAI,CAAC,WAAW,SAAS,GAAG,WAAW;YACxC,SAAU;gBACT,IAAI,CAAC,WAAW,WAAW;YAC5B;QACD;QACA;QACA,OAAO;YACN,YAAY;QACb;IACD,GAAG;QAAC;QAAM;KAAW;IAErB,MAAM,QAAQ,IAAA,+TAAO,EAAC,IAAO,MAAM,OAAO,QAAQ,KAAK,MAAM,CAAC,KAAK,GAAG,MAAO;QAAC,MAAM,OAAO;QAAO;KAAK;IACvG,MAAM,OAAO,IAAA,+TAAO,EAAC,IAAM,IAAA,oMAAK,EAAC,MAAM,OAAO,MAAM,MAAM,CAAC,gBAAgB;QAAC,MAAM,OAAO;KAAK;IAC9F,MAAM,OAAO,MAAM,OAAO,QAAQ,EAAE;IAEpC,MAAM,aAAa;QAClB,OAAO,IAAI,CAAC,CAAC,OAAO,EAAE,MAAM;IAC7B;IAEA,IAAI,CAAC,MAAM;QACV,qBAAO,6VAAC;YAAI,WAAU;sBAAiE;;;;;;IACxF;IAEA,IAAI,SAAS;QACZ,qBAAO,6VAAC;YAAI,WAAU;sBAAiE;;;;;;IACxF;IAEA,IAAI,OAAO;QACV,qBAAO,6VAAC;YAAI,WAAU;sBAAgE;;;;;;IACvF;IAEA,IAAI,CAAC,MAAM;QACV,qBAAO,6VAAC;YAAI,WAAU;sBAAiE;;;;;;IACxF;IAEA,qBACC;;0BACC,6VAAC,oJAAW;gBACX,UAAU,KAAK,QAAQ;gBACvB,OAAO;gBACP,MAAM;gBACN,MAAM;gBACN,SAAS,KAAK,MAAM,CAAC,OAAO;gBAC5B,OAAO,KAAK,KAAK,GAAG,GAAG,SAAS,KAAK,KAAK,EAAE,GAAG;gBAC/C,MAAM;;;;;;0BAGP,6VAAC,0SAAM,CAAC,MAAM;gBACb,SAAS;oBAAE,SAAS;oBAAG,OAAO;gBAAI;gBAClC,SAAS;oBAAE,SAAS;oBAAG,OAAO;gBAAE;gBAChC,YAAY;oBAAE,OAAO;gBAAK;gBAC1B,UAAU;oBAAE,OAAO;gBAAK;gBACxB,SAAS;gBACT,WAAU;0BAA4I;;;;;;YAItJ,SAAS,gCAAkB,6VAAC,yJAAW;;;;;;;AAG3C","debugId":null}}]
}