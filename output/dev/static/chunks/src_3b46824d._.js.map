{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///E:/qbb/github/blog-public/src/svgs/short-line.svg.js"],"sourcesContent":["var _path;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport * as React from \"react\";\nvar SvgShortLine = function SvgShortLine(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 16,\n    height: 16,\n    fill: \"none\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    stroke: \"#AFAFAF\",\n    strokeLinecap: \"round\",\n    d: \"M8 .5v3M8 6.5v3M8 12.5v3\"\n  })));\n};\nexport default SvgShortLine;"],"names":[],"mappings":";;;;AAEA;AAFA,IAAI;AACJ,SAAS;IAAa,OAAO,WAAW,uCAAgB,OAAO,MAAM,CAAC,IAAI,KAAK,yBAAmK,SAAS,KAAK,CAAC,MAAM;AAAY;;AAEnR,IAAI,eAAe,SAAS,aAAa,KAAK;IAC5C,OAAO,WAAW,GAAE,6RAAmB,CAAC,OAAO,SAAS;QACtD,OAAO;QACP,OAAO;QACP,QAAQ;QACR,MAAM;IACR,GAAG,QAAQ,SAAS,CAAC,QAAQ,WAAW,GAAE,6RAAmB,CAAC,QAAQ;QACpE,QAAQ;QACR,eAAe;QACf,GAAG;IACL,EAAE;AACJ;KAXI;uCAYW","debugId":null}},
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["E:/qbb/github/blog-public/src/hooks/use-blog-index.ts"],"sourcesContent":["import useSWR from 'swr'\r\n\r\nexport type BlogIndexItem = {\r\n\tslug: string\r\n\ttitle: string\r\n\ttags: string[]\r\n\tdate: string\r\n\tsummary?: string\r\n\tcover?: string\r\n}\r\n\r\nconst fetcher = async (url: string) => {\r\n\tconst res = await fetch(url, { cache: 'no-store' })\r\n\tif (!res.ok) {\r\n\t\tthrow new Error('Failed to load blog index')\r\n\t}\r\n\tconst data = await res.json()\r\n\treturn Array.isArray(data) ? data : []\r\n}\r\n\r\nexport function useBlogIndex() {\r\n\tconst { data, error, isLoading } = useSWR<BlogIndexItem[]>('/blogs/index.json', fetcher, {\r\n\t\trevalidateOnFocus: false,\r\n\t\trevalidateOnReconnect: true\r\n\t})\r\n\r\n\treturn {\r\n\t\titems: data || [],\r\n\t\tloading: isLoading,\r\n\t\terror\r\n\t}\r\n}\r\n\r\nexport function useLatestBlog() {\r\n\tconst { items, loading, error } = useBlogIndex()\r\n\r\n\tconst latestBlog = items.length > 0 ? items.sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime())[0] : null\r\n\r\n\treturn {\r\n\t\tblog: latestBlog,\r\n\t\tloading,\r\n\t\terror\r\n\t}\r\n}\r\n"],"names":["useSWR","BlogIndexItem","slug","title","tags","date","summary","cover","fetcher","url","res","fetch","cache","ok","Error","data","json","Array","isArray","useBlogIndex","$","_c","$i","Symbol","for","t0","revalidateOnFocus","revalidateOnReconnect","error","isLoading","t1","t2","items","loading","useLatestBlog","length","sort","_useLatestBlogItemsSort","latestBlog","blog","a","b","Date","getTime"],"mappings":"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","ignoreList":[],"debugId":null}},
    {"offset": {"line": 157, "column": 0}, "map": {"version":3,"sources":["file:///E:/qbb/github/blog-public/src/hooks/use-read-articles.ts"],"sourcesContent":["import { create } from 'zustand'\r\nimport { persist } from 'zustand/middleware'\r\n\r\n// Use object hash for faster lookup - O(1) time complexity\r\ntype ReadArticlesHash = Record<string, boolean>\r\n\r\ninterface ReadArticlesStore {\r\n\treadArticles: ReadArticlesHash\r\n\tmarkAsRead: (slug: string) => void\r\n\tisRead: (slug: string) => boolean\r\n\tclearAll: () => void\r\n}\r\n\r\nexport const useReadArticles = create<ReadArticlesStore>()(\r\n\tpersist(\r\n\t\t(set, get) => ({\r\n\t\t\treadArticles: {},\r\n\t\t\tmarkAsRead: (slug: string) => {\r\n\t\t\t\tset(state => ({\r\n\t\t\t\t\treadArticles: {\r\n\t\t\t\t\t\t...state.readArticles,\r\n\t\t\t\t\t\t[slug]: true\r\n\t\t\t\t\t}\r\n\t\t\t\t}))\r\n\t\t\t},\r\n\t\t\tisRead: (slug: string) => {\r\n\t\t\t\treturn get().readArticles[slug] === true\r\n\t\t\t},\r\n\t\t\tclearAll: () => {\r\n\t\t\t\tset({ readArticles: {} })\r\n\t\t\t}\r\n\t\t}),\r\n\t\t{\r\n\t\t\tname: 'blog-read-articles'\r\n\t\t}\r\n\t)\r\n)\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAYO,MAAM,kBAAkB,IAAA,iQAAM,IACpC,IAAA,uQAAO,EACN,CAAC,KAAK,MAAQ,CAAC;QACd,cAAc,CAAC;QACf,YAAY,CAAC;YACZ,IAAI,CAAA,QAAS,CAAC;oBACb,cAAc;wBACb,GAAG,MAAM,YAAY;wBACrB,CAAC,KAAK,EAAE;oBACT;gBACD,CAAC;QACF;QACA,QAAQ,CAAC;YACR,OAAO,MAAM,YAAY,CAAC,KAAK,KAAK;QACrC;QACA,UAAU;YACT,IAAI;gBAAE,cAAc,CAAC;YAAE;QACxB;IACD,CAAC,GACD;IACC,MAAM;AACP","debugId":null}},
    {"offset": {"line": 193, "column": 0}, "map": {"version":3,"sources":["file:///E:/qbb/github/blog-public/src/svgs/bilibili.svg.js"],"sourcesContent":["var _path, _path2;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport * as React from \"react\";\nvar SvgBilibili = function SvgBilibili(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 220.508,\n    height: 200,\n    className: \"bilibili_svg__icon\",\n    viewBox: \"0 0 1129 1024\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"#20B0E3\",\n    d: \"M234.909 9.656a80.47 80.47 0 0 1 68.398 0 167.4 167.4 0 0 1 41.843 30.578l160.937 140.82h115.07l160.936-140.82a169 169 0 0 1 41.843-30.578A80.468 80.468 0 0 1 930.96 76.445a80.47 80.47 0 0 1-17.703 53.914 450 450 0 0 1-35.406 32.187 233 233 0 0 1-22.531 18.508h100.585a170.6 170.6 0 0 1 118.289 53.109 171.4 171.4 0 0 1 53.914 118.288v462.693a326 326 0 0 1-4.024 70.007 178.64 178.64 0 0 1-80.468 112.656 173 173 0 0 1-92.539 25.75h-738.7a341.2 341.2 0 0 1-72.421-4.024A177.84 177.84 0 0 1 28.91 939.065a172.2 172.2 0 0 1-27.36-92.539V388.662a360.5 360.5 0 0 1 0-66.789A177.03 177.03 0 0 1 162.487 178.64h105.414c-16.899-12.07-31.383-26.555-46.672-39.43a80.47 80.47 0 0 1-25.75-65.984 80.47 80.47 0 0 1 39.43-63.57M216.4 321.873a80.47 80.47 0 0 0-63.57 57.937 108.6 108.6 0 0 0 0 30.578v380.615a80.47 80.47 0 0 0 55.523 80.469 106.2 106.2 0 0 0 34.601 5.632h654.208a80.47 80.47 0 0 0 76.444-47.476 112.66 112.66 0 0 0 8.047-53.109v-354.06a135.2 135.2 0 0 0 0-38.625 80.47 80.47 0 0 0-52.304-54.719 129.6 129.6 0 0 0-49.89-7.242H254.22a269 269 0 0 0-37.82 0m0 0\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"#20B0E3\",\n    d: \"M348.369 447.404a80.47 80.47 0 0 1 55.523 18.507 80.47 80.47 0 0 1 28.164 59.547v80.468a80.47 80.47 0 0 1-16.094 51.5 80.468 80.468 0 0 1-131.968-9.656 104.6 104.6 0 0 1-10.46-54.719v-80.468a80.47 80.47 0 0 1 70.007-67.593zm416.02 0a80.47 80.47 0 0 1 86.102 75.64v80.468a94.15 94.15 0 0 1-12.07 53.11 80.468 80.468 0 0 1-132.773 0 95.76 95.76 0 0 1-12.875-57.133V519.02a80.47 80.47 0 0 1 70.007-70.812zm0 0\"\n  })));\n};\nexport default SvgBilibili;"],"names":[],"mappings":";;;;AAEA;AAFA,IAAI,OAAO;AACX,SAAS;IAAa,OAAO,WAAW,uCAAgB,OAAO,MAAM,CAAC,IAAI,KAAK,yBAAmK,SAAS,KAAK,CAAC,MAAM;AAAY;;AAEnR,IAAI,cAAc,SAAS,YAAY,KAAK;IAC1C,OAAO,WAAW,GAAE,6RAAmB,CAAC,OAAO,SAAS;QACtD,OAAO;QACP,OAAO;QACP,QAAQ;QACR,WAAW;QACX,SAAS;IACX,GAAG,QAAQ,SAAS,CAAC,QAAQ,WAAW,GAAE,6RAAmB,CAAC,QAAQ;QACpE,MAAM;QACN,GAAG;IACL,EAAE,GAAG,UAAU,CAAC,SAAS,WAAW,GAAE,6RAAmB,CAAC,QAAQ;QAChE,MAAM;QACN,GAAG;IACL,EAAE;AACJ;KAdI;uCAeW","debugId":null}},
    {"offset": {"line": 229, "column": 0}, "map": {"version":3,"sources":["file:///E:/qbb/github/blog-public/src/lib/github-client.ts"],"sourcesContent":["'use client'\r\n\r\nimport { useAuthStore } from '@/hooks/use-auth'\r\nimport { KJUR, KEYUTIL } from 'jsrsasign'\r\n\r\nexport const GH_API = 'https://api.github.com'\r\n\r\nfunction handle401Error(): void {\r\n\tif (typeof sessionStorage === 'undefined') return\r\n\ttry {\r\n\t\tuseAuthStore.getState().clearAuth()\r\n\t} catch (error) {\r\n\t\tconsole.error('Failed to clear auth cache:', error)\r\n\t}\r\n}\r\n\r\nexport function toBase64Utf8(input: string): string {\r\n\treturn btoa(unescape(encodeURIComponent(input)))\r\n}\r\n\r\nexport function signAppJwt(appId: string, privateKeyPem: string): string {\r\n\tconst now = Math.floor(Date.now() / 1000)\r\n\tconst header = { alg: 'RS256', typ: 'JWT' }\r\n\tconst payload = { iat: now - 60, exp: now + 8 * 60, iss: appId }\r\n\tconst prv = KEYUTIL.getKey(privateKeyPem) as unknown as string\r\n\treturn KJUR.jws.JWS.sign('RS256', JSON.stringify(header), JSON.stringify(payload), prv)\r\n}\r\n\r\nexport async function getInstallationId(jwt: string, owner: string, repo: string): Promise<number> {\r\n\tconst res = await fetch(`${GH_API}/repos/${owner}/${repo}/installation`, {\r\n\t\theaders: {\r\n\t\t\tAuthorization: `Bearer ${jwt}`,\r\n\t\t\tAccept: 'application/vnd.github+json',\r\n\t\t\t'X-GitHub-Api-Version': '2022-11-28'\r\n\t\t}\r\n\t})\r\n\tif (res.status === 401) handle401Error()\r\n\tif (!res.ok) throw new Error(`installation lookup failed: ${res.status}`)\r\n\tconst data = await res.json()\r\n\treturn data.id\r\n}\r\n\r\nexport async function createInstallationToken(jwt: string, installationId: number): Promise<string> {\r\n\tconst res = await fetch(`${GH_API}/app/installations/${installationId}/access_tokens`, {\r\n\t\tmethod: 'POST',\r\n\t\theaders: {\r\n\t\t\tAuthorization: `Bearer ${jwt}`,\r\n\t\t\tAccept: 'application/vnd.github+json',\r\n\t\t\t'X-GitHub-Api-Version': '2022-11-28'\r\n\t\t}\r\n\t})\r\n\tif (res.status === 401) handle401Error()\r\n\tif (!res.ok) throw new Error(`create token failed: ${res.status}`)\r\n\tconst data = await res.json()\r\n\treturn data.token as string\r\n}\r\n\r\nexport async function getFileSha(token: string, owner: string, repo: string, path: string, branch: string): Promise<string | undefined> {\r\n\tconst res = await fetch(`${GH_API}/repos/${owner}/${repo}/contents/${encodeURIComponent(path)}?ref=${encodeURIComponent(branch)}`, {\r\n\t\theaders: {\r\n\t\t\tAuthorization: `Bearer ${token}`,\r\n\t\t\tAccept: 'application/vnd.github+json',\r\n\t\t\t'X-GitHub-Api-Version': '2022-11-28'\r\n\t\t}\r\n\t})\r\n\tif (res.status === 401) handle401Error()\r\n\tif (res.status === 404) return undefined\r\n\tif (!res.ok) throw new Error(`get file sha failed: ${res.status}`)\r\n\tconst data = await res.json()\r\n\treturn (data && data.sha) || undefined\r\n}\r\n\r\nexport async function putFile(token: string, owner: string, repo: string, path: string, contentBase64: string, message: string, branch: string) {\r\n\tconst sha = await getFileSha(token, owner, repo, path, branch)\r\n\tconst res = await fetch(`${GH_API}/repos/${owner}/${repo}/contents/${encodeURIComponent(path)}`, {\r\n\t\tmethod: 'PUT',\r\n\t\theaders: {\r\n\t\t\tAuthorization: `Bearer ${token}`,\r\n\t\t\tAccept: 'application/vnd.github+json',\r\n\t\t\t'X-GitHub-Api-Version': '2022-11-28',\r\n\t\t\t'Content-Type': 'application/json'\r\n\t\t},\r\n\t\tbody: JSON.stringify({ message, content: contentBase64, branch, ...(sha ? { sha } : {}) })\r\n\t})\r\n\tif (res.status === 401) handle401Error()\r\n\tif (!res.ok) throw new Error(`put file failed: ${res.status}`)\r\n\treturn res.json()\r\n}\r\n\r\n// Batch commit APIs\r\n\r\nexport async function getRef(token: string, owner: string, repo: string, ref: string): Promise<{ sha: string }> {\r\n\tconst res = await fetch(`${GH_API}/repos/${owner}/${repo}/git/ref/${encodeURIComponent(ref)}`, {\r\n\t\theaders: {\r\n\t\t\tAuthorization: `Bearer ${token}`,\r\n\t\t\tAccept: 'application/vnd.github+json',\r\n\t\t\t'X-GitHub-Api-Version': '2022-11-28'\r\n\t\t}\r\n\t})\r\n\tif (res.status === 401) handle401Error()\r\n\tif (!res.ok) throw new Error(`get ref failed: ${res.status}`)\r\n\tconst data = await res.json()\r\n\treturn { sha: data.object.sha }\r\n}\r\n\r\nexport type TreeItem = {\r\n\tpath: string\r\n\tmode: '100644' | '100755' | '040000' | '160000' | '120000'\r\n\ttype: 'blob' | 'tree' | 'commit'\r\n\tcontent?: string\r\n\tsha?: string | null\r\n}\r\n\r\nexport async function createTree(token: string, owner: string, repo: string, tree: TreeItem[], baseTree?: string): Promise<{ sha: string }> {\r\n\tconst res = await fetch(`${GH_API}/repos/${owner}/${repo}/git/trees`, {\r\n\t\tmethod: 'POST',\r\n\t\theaders: {\r\n\t\t\tAuthorization: `Bearer ${token}`,\r\n\t\t\tAccept: 'application/vnd.github+json',\r\n\t\t\t'X-GitHub-Api-Version': '2022-11-28',\r\n\t\t\t'Content-Type': 'application/json'\r\n\t\t},\r\n\t\tbody: JSON.stringify({ tree, base_tree: baseTree })\r\n\t})\r\n\tif (res.status === 401) handle401Error()\r\n\tif (!res.ok) throw new Error(`create tree failed: ${res.status}`)\r\n\tconst data = await res.json()\r\n\treturn { sha: data.sha }\r\n}\r\n\r\nexport async function createCommit(token: string, owner: string, repo: string, message: string, tree: string, parents: string[]): Promise<{ sha: string }> {\r\n\tconst res = await fetch(`${GH_API}/repos/${owner}/${repo}/git/commits`, {\r\n\t\tmethod: 'POST',\r\n\t\theaders: {\r\n\t\t\tAuthorization: `Bearer ${token}`,\r\n\t\t\tAccept: 'application/vnd.github+json',\r\n\t\t\t'X-GitHub-Api-Version': '2022-11-28',\r\n\t\t\t'Content-Type': 'application/json'\r\n\t\t},\r\n\t\tbody: JSON.stringify({ message, tree, parents })\r\n\t})\r\n\tif (res.status === 401) handle401Error()\r\n\tif (!res.ok) throw new Error(`create commit failed: ${res.status}`)\r\n\tconst data = await res.json()\r\n\treturn { sha: data.sha }\r\n}\r\n\r\nexport async function updateRef(token: string, owner: string, repo: string, ref: string, sha: string, force = false): Promise<void> {\r\n\tconst res = await fetch(`${GH_API}/repos/${owner}/${repo}/git/refs/${encodeURIComponent(ref)}`, {\r\n\t\tmethod: 'PATCH',\r\n\t\theaders: {\r\n\t\t\tAuthorization: `Bearer ${token}`,\r\n\t\t\tAccept: 'application/vnd.github+json',\r\n\t\t\t'X-GitHub-Api-Version': '2022-11-28',\r\n\t\t\t'Content-Type': 'application/json'\r\n\t\t},\r\n\t\tbody: JSON.stringify({ sha, force })\r\n\t})\r\n\tif (res.status === 401) handle401Error()\r\n\tif (!res.ok) throw new Error(`update ref failed: ${res.status}`)\r\n}\r\n\r\nexport async function readTextFileFromRepo(token: string, owner: string, repo: string, path: string, ref: string): Promise<string | null> {\r\n\tconst res = await fetch(`${GH_API}/repos/${owner}/${repo}/contents/${encodeURIComponent(path)}?ref=${encodeURIComponent(ref)}`, {\r\n\t\theaders: {\r\n\t\t\tAuthorization: `Bearer ${token}`,\r\n\t\t\tAccept: 'application/vnd.github+json',\r\n\t\t\t'X-GitHub-Api-Version': '2022-11-28'\r\n\t\t}\r\n\t})\r\n\tif (res.status === 401) handle401Error()\r\n\tif (res.status === 404) return null\r\n\tif (!res.ok) throw new Error(`read file failed: ${res.status}`)\r\n\tconst data: any = await res.json()\r\n\tif (Array.isArray(data) || !data.content) return null\r\n\ttry {\r\n\t\treturn decodeURIComponent(escape(atob(data.content)))\r\n\t} catch {\r\n\t\treturn atob(data.content)\r\n\t}\r\n}\r\n\r\nexport async function listRepoFilesRecursive(token: string, owner: string, repo: string, path: string, ref: string): Promise<string[]> {\r\n\tasync function fetchPath(targetPath: string): Promise<string[]> {\r\n\t\tconst res = await fetch(`${GH_API}/repos/${owner}/${repo}/contents/${encodeURIComponent(targetPath)}?ref=${encodeURIComponent(ref)}`, {\r\n\t\t\theaders: {\r\n\t\t\t\tAuthorization: `Bearer ${token}`,\r\n\t\t\t\tAccept: 'application/vnd.github+json',\r\n\t\t\t\t'X-GitHub-Api-Version': '2022-11-28'\r\n\t\t\t}\r\n\t\t})\r\n\t\tif (res.status === 401) handle401Error()\r\n\t\tif (res.status === 404) return []\r\n\t\tif (!res.ok) throw new Error(`read directory failed: ${res.status}`)\r\n\t\tconst data: any = await res.json()\r\n\t\tif (Array.isArray(data)) {\r\n\t\t\tconst files: string[] = []\r\n\t\t\tfor (const item of data) {\r\n\t\t\t\tif (item.type === 'file') {\r\n\t\t\t\t\tfiles.push(item.path)\r\n\t\t\t\t} else if (item.type === 'dir') {\r\n\t\t\t\t\tconst nested = await fetchPath(item.path)\r\n\t\t\t\t\tfiles.push(...nested)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn files\r\n\t\t}\r\n\t\tif (data?.type === 'file') return [data.path]\r\n\t\tif (data?.type === 'dir') return fetchPath(data.path)\r\n\t\treturn []\r\n\t}\r\n\r\n\treturn fetchPath(path)\r\n}\r\n\r\nexport async function createBlob(\r\n\ttoken: string,\r\n\towner: string,\r\n\trepo: string,\r\n\tcontent: string,\r\n\tencoding: 'utf-8' | 'base64' = 'base64'\r\n): Promise<{ sha: string }> {\r\n\tconst res = await fetch(`${GH_API}/repos/${owner}/${repo}/git/blobs`, {\r\n\t\tmethod: 'POST',\r\n\t\theaders: {\r\n\t\t\tAuthorization: `Bearer ${token}`,\r\n\t\t\tAccept: 'application/vnd.github+json',\r\n\t\t\t'X-GitHub-Api-Version': '2022-11-28',\r\n\t\t\t'Content-Type': 'application/json'\r\n\t\t},\r\n\t\tbody: JSON.stringify({ content, encoding })\r\n\t})\r\n\tif (res.status === 401) handle401Error()\r\n\tif (!res.ok) throw new Error(`create blob failed: ${res.status}`)\r\n\tconst data = await res.json()\r\n\treturn { sha: data.sha }\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 509, "column": 0}, "map": {"version":3,"sources":["file:///E:/qbb/github/blog-public/src/lib/auth.ts"],"sourcesContent":["import { createInstallationToken, getInstallationId, signAppJwt } from './github-client'\r\nimport { GITHUB_CONFIG } from '@/consts'\r\nimport { useAuthStore } from '@/hooks/use-auth'\r\nimport { toast } from 'sonner'\r\n\r\nconst GITHUB_TOKEN_CACHE_KEY = 'github_token'\r\n\r\nfunction getTokenFromCache(): string | null {\r\n\tif (typeof sessionStorage === 'undefined') return null\r\n\ttry {\r\n\t\treturn sessionStorage.getItem(GITHUB_TOKEN_CACHE_KEY)\r\n\t} catch {\r\n\t\treturn null\r\n\t}\r\n}\r\n\r\nfunction saveTokenToCache(token: string): void {\r\n\tif (typeof sessionStorage === 'undefined') return\r\n\ttry {\r\n\t\tsessionStorage.setItem(GITHUB_TOKEN_CACHE_KEY, token)\r\n\t} catch (error) {\r\n\t\tconsole.error('Failed to save token to cache:', error)\r\n\t}\r\n}\r\n\r\nfunction clearTokenCache(): void {\r\n\tif (typeof sessionStorage === 'undefined') return\r\n\ttry {\r\n\t\tsessionStorage.removeItem(GITHUB_TOKEN_CACHE_KEY)\r\n\t} catch (error) {\r\n\t\tconsole.error('Failed to clear token cache:', error)\r\n\t}\r\n}\r\n\r\nexport function clearAllAuthCache(): void {\r\n\tclearTokenCache()\r\n}\r\n\r\nexport function hasAuth(): boolean {\r\n\treturn !!getTokenFromCache()\r\n}\r\n\r\n/**\r\n * 统一的认证 Token 获取\r\n * 自动处理缓存、签发等逻辑\r\n * @returns GitHub Installation Token\r\n */\r\nexport async function getAuthToken(): Promise<string> {\r\n\t// 1. 先尝试从缓存获取 token\r\n\tconst cachedToken = getTokenFromCache()\r\n\tif (cachedToken) {\r\n\t\ttoast.info('使用缓存的令牌...')\r\n\t\treturn cachedToken\r\n\t}\r\n\r\n\t// 2. 获取私钥（从缓存）\r\n\tconst privateKey = useAuthStore.getState().privateKey\r\n\tif (!privateKey) {\r\n\t\tthrow new Error('需要先设置私钥。请使用 useAuth().setPrivateKey()')\r\n\t}\r\n\r\n\ttoast.info('正在签发 JWT...')\r\n\tconst jwt = signAppJwt(GITHUB_CONFIG.APP_ID, privateKey)\r\n\r\n\ttoast.info('正在获取安装信息...')\r\n\tconst installationId = await getInstallationId(jwt, GITHUB_CONFIG.OWNER, GITHUB_CONFIG.REPO)\r\n\r\n\ttoast.info('正在创建安装令牌...')\r\n\tconst token = await createInstallationToken(jwt, installationId)\r\n\r\n\tsaveTokenToCache(token)\r\n\r\n\treturn token\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AACA;AACA;;;;;AAEA,MAAM,yBAAyB;AAE/B,SAAS;IACR,IAAI,OAAO,mBAAmB,aAAa,OAAO;IAClD,IAAI;QACH,OAAO,eAAe,OAAO,CAAC;IAC/B,EAAE,OAAM;QACP,OAAO;IACR;AACD;AAEA,SAAS,iBAAiB,KAAa;IACtC,IAAI,OAAO,mBAAmB,aAAa;IAC3C,IAAI;QACH,eAAe,OAAO,CAAC,wBAAwB;IAChD,EAAE,OAAO,OAAO;QACf,QAAQ,KAAK,CAAC,kCAAkC;IACjD;AACD;AAEA,SAAS;IACR,IAAI,OAAO,mBAAmB,aAAa;IAC3C,IAAI;QACH,eAAe,UAAU,CAAC;IAC3B,EAAE,OAAO,OAAO;QACf,QAAQ,KAAK,CAAC,gCAAgC;IAC/C;AACD;AAEO,SAAS;IACf;AACD;AAEO,SAAS;IACf,OAAO,CAAC,CAAC;AACV;AAOO,eAAe;IACrB,oBAAoB;IACpB,MAAM,cAAc;IACpB,IAAI,aAAa;QAChB,oRAAK,CAAC,IAAI,CAAC;QACX,OAAO;IACR;IAEA,eAAe;IACf,MAAM,aAAa,8IAAY,CAAC,QAAQ,GAAG,UAAU;IACrD,IAAI,CAAC,YAAY;QAChB,MAAM,IAAI,MAAM;IACjB;IAEA,oRAAK,CAAC,IAAI,CAAC;IACX,MAAM,MAAM,IAAA,+IAAU,EAAC,iIAAa,CAAC,MAAM,EAAE;IAE7C,oRAAK,CAAC,IAAI,CAAC;IACX,MAAM,iBAAiB,MAAM,IAAA,sJAAiB,EAAC,KAAK,iIAAa,CAAC,KAAK,EAAE,iIAAa,CAAC,IAAI;IAE3F,oRAAK,CAAC,IAAI,CAAC;IACX,MAAM,QAAQ,MAAM,IAAA,4JAAuB,EAAC,KAAK;IAEjD,iBAAiB;IAEjB,OAAO;AACR","debugId":null}},
    {"offset": {"line": 584, "column": 0}, "map": {"version":3,"sources":["file:///E:/qbb/github/blog-public/src/hooks/use-auth.ts"],"sourcesContent":["import { create } from 'zustand'\r\nimport { clearAllAuthCache, getAuthToken as getToken, hasAuth as checkAuth } from '@/lib/auth'\r\n\r\ninterface AuthStore {\r\n\t// State\r\n\tisAuth: boolean\r\n\tprivateKey: string | null\r\n\r\n\t// Actions\r\n\tsetPrivateKey: (key: string) => void\r\n\tclearAuth: () => void\r\n\trefreshAuthState: () => void\r\n\tgetAuthToken: () => Promise<string>\r\n}\r\n\r\nexport const useAuthStore = create<AuthStore>((set, get) => ({\r\n\tisAuth: checkAuth(),\r\n\tprivateKey: null,\r\n\r\n\tsetPrivateKey: (key: string) => {\r\n\t\tset({ isAuth: true, privateKey: key })\r\n\t},\r\n\r\n\tclearAuth: () => {\r\n\t\tclearAllAuthCache()\r\n\t\tset({ isAuth: false })\r\n\t},\r\n\r\n\trefreshAuthState: () => {\r\n\t\tset({ isAuth: checkAuth() })\r\n\t},\r\n\r\n\tgetAuthToken: async () => {\r\n\t\tconst token = await getToken()\r\n\t\tget().refreshAuthState()\r\n\t\treturn token\r\n\t}\r\n}))\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAcO,MAAM,eAAe,IAAA,iQAAM,EAAY,CAAC,KAAK,MAAQ,CAAC;QAC5D,QAAQ,IAAA,gIAAS;QACjB,YAAY;QAEZ,eAAe,CAAC;YACf,IAAI;gBAAE,QAAQ;gBAAM,YAAY;YAAI;QACrC;QAEA,WAAW;YACV,IAAA,0IAAiB;YACjB,IAAI;gBAAE,QAAQ;YAAM;QACrB;QAEA,kBAAkB;YACjB,IAAI;gBAAE,QAAQ,IAAA,gIAAS;YAAG;QAC3B;QAEA,cAAc;YACb,MAAM,QAAQ,MAAM,IAAA,qIAAQ;YAC5B,MAAM,gBAAgB;YACtB,OAAO;QACR;IACD,CAAC","debugId":null}},
    {"offset": {"line": 625, "column": 0}, "map": {"version":3,"sources":["file:///E:/qbb/github/blog-public/src/lib/file-utils.ts"],"sourcesContent":["'use client'\r\n\r\nexport function readFileAsText(file: File): Promise<string> {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tconst reader = new FileReader()\r\n\t\treader.onload = () => resolve(String(reader.result || ''))\r\n\t\treader.onerror = reject\r\n\t\treader.readAsText(file)\r\n\t})\r\n}\r\n\r\nexport function fileToBase64NoPrefix(file: File): Promise<string> {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tconst reader = new FileReader()\r\n\t\treader.onload = () => {\r\n\t\t\tconst dataUrl = String(reader.result || '')\r\n\t\t\tresolve(dataUrl.replace(/^data:[^;]+;base64,/, ''))\r\n\t\t}\r\n\t\treader.onerror = reject\r\n\t\treader.readAsDataURL(file)\r\n\t})\r\n}\r\n\r\nexport async function hashFileSHA256(file: File): Promise<string> {\r\n\tconst buf = await file.arrayBuffer()\r\n\tconst digest = await crypto.subtle.digest('SHA-256', buf)\r\n\tconst bytes = new Uint8Array(digest)\r\n\tlet hex = ''\r\n\tfor (let i = 0; i < bytes.length; i++) {\r\n\t\tconst h = bytes[i].toString(16).padStart(2, '0')\r\n\t\thex += h\r\n\t}\r\n\treturn hex.slice(0, 16)\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA;AAEO,SAAS,eAAe,IAAU;IACxC,OAAO,IAAI,QAAQ,CAAC,SAAS;QAC5B,MAAM,SAAS,IAAI;QACnB,OAAO,MAAM,GAAG,IAAM,QAAQ,OAAO,OAAO,MAAM,IAAI;QACtD,OAAO,OAAO,GAAG;QACjB,OAAO,UAAU,CAAC;IACnB;AACD;AAEO,SAAS,qBAAqB,IAAU;IAC9C,OAAO,IAAI,QAAQ,CAAC,SAAS;QAC5B,MAAM,SAAS,IAAI;QACnB,OAAO,MAAM,GAAG;YACf,MAAM,UAAU,OAAO,OAAO,MAAM,IAAI;YACxC,QAAQ,QAAQ,OAAO,CAAC,uBAAuB;QAChD;QACA,OAAO,OAAO,GAAG;QACjB,OAAO,aAAa,CAAC;IACtB;AACD;AAEO,eAAe,eAAe,IAAU;IAC9C,MAAM,MAAM,MAAM,KAAK,WAAW;IAClC,MAAM,SAAS,MAAM,OAAO,MAAM,CAAC,MAAM,CAAC,WAAW;IACrD,MAAM,QAAQ,IAAI,WAAW;IAC7B,IAAI,MAAM;IACV,IAAK,IAAI,IAAI,GAAG,IAAI,MAAM,MAAM,EAAE,IAAK;QACtC,MAAM,IAAI,KAAK,CAAC,EAAE,CAAC,QAAQ,CAAC,IAAI,QAAQ,CAAC,GAAG;QAC5C,OAAO;IACR;IACA,OAAO,IAAI,KAAK,CAAC,GAAG;AACrB","debugId":null}},
    {"offset": {"line": 671, "column": 0}, "map": {"version":3,"sources":["file:///E:/qbb/github/blog-public/src/lib/blog-index.ts"],"sourcesContent":["'use client'\r\n\r\nimport { putFile, toBase64Utf8, readTextFileFromRepo } from '@/lib/github-client'\r\n\r\nexport type BlogIndexItem = {\r\n\tslug: string\r\n\ttitle: string\r\n\ttags: string[]\r\n\tdate: string\r\n\tsummary?: string\r\n\tcover?: string\r\n}\r\n\r\nexport async function upsertBlogsIndex(token: string, owner: string, repo: string, item: BlogIndexItem, branch: string): Promise<void> {\r\n\tconst indexPath = 'public/blogs/index.json'\r\n\tlet list: BlogIndexItem[] = []\r\n\ttry {\r\n\t\tconst txt = await readTextFileFromRepo(token, owner, repo, indexPath, branch)\r\n\t\tif (txt) list = JSON.parse(txt)\r\n\t} catch {\r\n\t\t// ignore parse errors and start from empty list\r\n\t}\r\n\tconst map = new Map<string, BlogIndexItem>(list.map(i => [i.slug, i]))\r\n\tmap.set(item.slug, item)\r\n\tconst next = Array.from(map.values()).sort((a, b) => (b.date || '').localeCompare(a.date || ''))\r\n\tconst base64 = toBase64Utf8(JSON.stringify(next, null, 2))\r\n\tawait putFile(token, owner, repo, indexPath, base64, 'Update blogs index', branch)\r\n}\r\n\r\nexport async function prepareBlogsIndex(token: string, owner: string, repo: string, item: BlogIndexItem, branch: string): Promise<string> {\r\n\tconst indexPath = 'public/blogs/index.json'\r\n\tlet list: BlogIndexItem[] = []\r\n\ttry {\r\n\t\tconst txt = await readTextFileFromRepo(token, owner, repo, indexPath, branch)\r\n\t\tif (txt) list = JSON.parse(txt)\r\n\t} catch {\r\n\t\t// ignore parse errors and start from empty list\r\n\t}\r\n\tconst map = new Map<string, BlogIndexItem>(list.map(i => [i.slug, i]))\r\n\tmap.set(item.slug, item)\r\n\tconst next = Array.from(map.values()).sort((a, b) => (b.date || '').localeCompare(a.date || ''))\r\n\treturn JSON.stringify(next, null, 2)\r\n}\r\n\r\nexport async function removeBlogsFromIndex(token: string, owner: string, repo: string, slugs: string[], branch: string): Promise<string> {\r\n\tconst indexPath = 'public/blogs/index.json'\r\n\tlet list: BlogIndexItem[] = []\r\n\ttry {\r\n\t\tconst txt = await readTextFileFromRepo(token, owner, repo, indexPath, branch)\r\n\t\tif (txt) list = JSON.parse(txt)\r\n\t} catch {\r\n\t\t// ignore parse errors and keep empty list\r\n\t}\r\n\tconst slugSet = new Set(slugs.filter(Boolean))\r\n\tif (slugSet.size === 0) {\r\n\t\treturn JSON.stringify(list, null, 2)\r\n\t}\r\n\tconst next = list.filter(item => !slugSet.has(item.slug))\r\n\treturn JSON.stringify(next, null, 2)\r\n}\r\n\r\nexport async function removeBlogFromIndex(token: string, owner: string, repo: string, slug: string, branch: string): Promise<string> {\r\n\treturn removeBlogsFromIndex(token, owner, repo, [slug], branch)\r\n}"],"names":[],"mappings":";;;;;;;;;;AAEA;AAFA;;AAaO,eAAe,iBAAiB,KAAa,EAAE,KAAa,EAAE,IAAY,EAAE,IAAmB,EAAE,MAAc;IACrH,MAAM,YAAY;IAClB,IAAI,OAAwB,EAAE;IAC9B,IAAI;QACH,MAAM,MAAM,MAAM,IAAA,yJAAoB,EAAC,OAAO,OAAO,MAAM,WAAW;QACtE,IAAI,KAAK,OAAO,KAAK,KAAK,CAAC;IAC5B,EAAE,OAAM;IACP,gDAAgD;IACjD;IACA,MAAM,MAAM,IAAI,IAA2B,KAAK,GAAG,CAAC,CAAA,IAAK;YAAC,EAAE,IAAI;YAAE;SAAE;IACpE,IAAI,GAAG,CAAC,KAAK,IAAI,EAAE;IACnB,MAAM,OAAO,MAAM,IAAI,CAAC,IAAI,MAAM,IAAI,IAAI,CAAC,CAAC,GAAG,IAAM,CAAC,EAAE,IAAI,IAAI,EAAE,EAAE,aAAa,CAAC,EAAE,IAAI,IAAI;IAC5F,MAAM,SAAS,IAAA,iJAAY,EAAC,KAAK,SAAS,CAAC,MAAM,MAAM;IACvD,MAAM,IAAA,4IAAO,EAAC,OAAO,OAAO,MAAM,WAAW,QAAQ,sBAAsB;AAC5E;AAEO,eAAe,kBAAkB,KAAa,EAAE,KAAa,EAAE,IAAY,EAAE,IAAmB,EAAE,MAAc;IACtH,MAAM,YAAY;IAClB,IAAI,OAAwB,EAAE;IAC9B,IAAI;QACH,MAAM,MAAM,MAAM,IAAA,yJAAoB,EAAC,OAAO,OAAO,MAAM,WAAW;QACtE,IAAI,KAAK,OAAO,KAAK,KAAK,CAAC;IAC5B,EAAE,OAAM;IACP,gDAAgD;IACjD;IACA,MAAM,MAAM,IAAI,IAA2B,KAAK,GAAG,CAAC,CAAA,IAAK;YAAC,EAAE,IAAI;YAAE;SAAE;IACpE,IAAI,GAAG,CAAC,KAAK,IAAI,EAAE;IACnB,MAAM,OAAO,MAAM,IAAI,CAAC,IAAI,MAAM,IAAI,IAAI,CAAC,CAAC,GAAG,IAAM,CAAC,EAAE,IAAI,IAAI,EAAE,EAAE,aAAa,CAAC,EAAE,IAAI,IAAI;IAC5F,OAAO,KAAK,SAAS,CAAC,MAAM,MAAM;AACnC;AAEO,eAAe,qBAAqB,KAAa,EAAE,KAAa,EAAE,IAAY,EAAE,KAAe,EAAE,MAAc;IACrH,MAAM,YAAY;IAClB,IAAI,OAAwB,EAAE;IAC9B,IAAI;QACH,MAAM,MAAM,MAAM,IAAA,yJAAoB,EAAC,OAAO,OAAO,MAAM,WAAW;QACtE,IAAI,KAAK,OAAO,KAAK,KAAK,CAAC;IAC5B,EAAE,OAAM;IACP,0CAA0C;IAC3C;IACA,MAAM,UAAU,IAAI,IAAI,MAAM,MAAM,CAAC;IACrC,IAAI,QAAQ,IAAI,KAAK,GAAG;QACvB,OAAO,KAAK,SAAS,CAAC,MAAM,MAAM;IACnC;IACA,MAAM,OAAO,KAAK,MAAM,CAAC,CAAA,OAAQ,CAAC,QAAQ,GAAG,CAAC,KAAK,IAAI;IACvD,OAAO,KAAK,SAAS,CAAC,MAAM,MAAM;AACnC;AAEO,eAAe,oBAAoB,KAAa,EAAE,KAAa,EAAE,IAAY,EAAE,IAAY,EAAE,MAAc;IACjH,OAAO,qBAAqB,OAAO,OAAO,MAAM;QAAC;KAAK,EAAE;AACzD","debugId":null}},
    {"offset": {"line": 747, "column": 0}, "map": {"version":3,"sources":["file:///E:/qbb/github/blog-public/src/app/blog/services/batch-delete-blogs.ts"],"sourcesContent":["import { toast } from 'sonner'\r\nimport { getAuthToken } from '@/lib/auth'\r\nimport { GITHUB_CONFIG } from '@/consts'\r\nimport { createBlob, createCommit, createTree, getRef, listRepoFilesRecursive, toBase64Utf8, type TreeItem, updateRef } from '@/lib/github-client'\r\nimport { removeBlogsFromIndex } from '@/lib/blog-index'\r\n\r\nexport async function batchDeleteBlogs(slugs: string[]): Promise<void> {\r\n\tconst uniqueSlugs = Array.from(new Set(slugs.filter(Boolean)))\r\n\tif (uniqueSlugs.length === 0) {\r\n\t\tthrow new Error('需要至少选择一篇文章')\r\n\t}\r\n\r\n\tconst token = await getAuthToken()\r\n\r\n\ttoast.info('正在获取分支信息...')\r\n\tconst refData = await getRef(token, GITHUB_CONFIG.OWNER, GITHUB_CONFIG.REPO, `heads/${GITHUB_CONFIG.BRANCH}`)\r\n\tconst latestCommitSha = refData.sha\r\n\r\n\tconst treeItems: TreeItem[] = []\r\n\r\n\tfor (const slug of uniqueSlugs) {\r\n\t\ttoast.info(`正在收集 ${slug} 文件...`)\r\n\t\tconst basePath = `public/blogs/${slug}`\r\n\t\tconst files = await listRepoFilesRecursive(token, GITHUB_CONFIG.OWNER, GITHUB_CONFIG.REPO, basePath, GITHUB_CONFIG.BRANCH)\r\n\r\n\t\tfor (const path of files) {\r\n\t\t\ttreeItems.push({\r\n\t\t\t\tpath,\r\n\t\t\t\tmode: '100644',\r\n\t\t\t\ttype: 'blob',\r\n\t\t\t\tsha: null\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\ttoast.info('正在更新索引...')\r\n\tconst indexJson = await removeBlogsFromIndex(token, GITHUB_CONFIG.OWNER, GITHUB_CONFIG.REPO, uniqueSlugs, GITHUB_CONFIG.BRANCH)\r\n\tconst indexBlob = await createBlob(token, GITHUB_CONFIG.OWNER, GITHUB_CONFIG.REPO, toBase64Utf8(indexJson), 'base64')\r\n\ttreeItems.push({\r\n\t\tpath: 'public/blogs/index.json',\r\n\t\tmode: '100644',\r\n\t\ttype: 'blob',\r\n\t\tsha: indexBlob.sha\r\n\t})\r\n\r\n\ttoast.info('正在创建提交...')\r\n\tconst treeData = await createTree(token, GITHUB_CONFIG.OWNER, GITHUB_CONFIG.REPO, treeItems, latestCommitSha)\r\n\tconst commitLabel = uniqueSlugs.length === 1 ? `删除文章: ${uniqueSlugs[0]}` : `批量删除文章: ${uniqueSlugs.join(', ')}`\r\n\tconst commitData = await createCommit(token, GITHUB_CONFIG.OWNER, GITHUB_CONFIG.REPO, commitLabel, treeData.sha, [latestCommitSha])\r\n\r\n\ttoast.info('正在更新分支...')\r\n\tawait updateRef(token, GITHUB_CONFIG.OWNER, GITHUB_CONFIG.REPO, `heads/${GITHUB_CONFIG.BRANCH}`, commitData.sha)\r\n\r\n\ttoast.success('删除成功！请等待页面部署后刷新')\r\n}\r\n\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;;;;;;AAEO,eAAe,iBAAiB,KAAe;IACrD,MAAM,cAAc,MAAM,IAAI,CAAC,IAAI,IAAI,MAAM,MAAM,CAAC;IACpD,IAAI,YAAY,MAAM,KAAK,GAAG;QAC7B,MAAM,IAAI,MAAM;IACjB;IAEA,MAAM,QAAQ,MAAM,IAAA,qIAAY;IAEhC,oRAAK,CAAC,IAAI,CAAC;IACX,MAAM,UAAU,MAAM,IAAA,2IAAM,EAAC,OAAO,iIAAa,CAAC,KAAK,EAAE,iIAAa,CAAC,IAAI,EAAE,CAAC,MAAM,EAAE,iIAAa,CAAC,MAAM,EAAE;IAC5G,MAAM,kBAAkB,QAAQ,GAAG;IAEnC,MAAM,YAAwB,EAAE;IAEhC,KAAK,MAAM,QAAQ,YAAa;QAC/B,oRAAK,CAAC,IAAI,CAAC,CAAC,KAAK,EAAE,KAAK,MAAM,CAAC;QAC/B,MAAM,WAAW,CAAC,aAAa,EAAE,MAAM;QACvC,MAAM,QAAQ,MAAM,IAAA,2JAAsB,EAAC,OAAO,iIAAa,CAAC,KAAK,EAAE,iIAAa,CAAC,IAAI,EAAE,UAAU,iIAAa,CAAC,MAAM;QAEzH,KAAK,MAAM,QAAQ,MAAO;YACzB,UAAU,IAAI,CAAC;gBACd;gBACA,MAAM;gBACN,MAAM;gBACN,KAAK;YACN;QACD;IACD;IAEA,oRAAK,CAAC,IAAI,CAAC;IACX,MAAM,YAAY,MAAM,IAAA,sJAAoB,EAAC,OAAO,iIAAa,CAAC,KAAK,EAAE,iIAAa,CAAC,IAAI,EAAE,aAAa,iIAAa,CAAC,MAAM;IAC9H,MAAM,YAAY,MAAM,IAAA,+IAAU,EAAC,OAAO,iIAAa,CAAC,KAAK,EAAE,iIAAa,CAAC,IAAI,EAAE,IAAA,iJAAY,EAAC,YAAY;IAC5G,UAAU,IAAI,CAAC;QACd,MAAM;QACN,MAAM;QACN,MAAM;QACN,KAAK,UAAU,GAAG;IACnB;IAEA,oRAAK,CAAC,IAAI,CAAC;IACX,MAAM,WAAW,MAAM,IAAA,+IAAU,EAAC,OAAO,iIAAa,CAAC,KAAK,EAAE,iIAAa,CAAC,IAAI,EAAE,WAAW;IAC7F,MAAM,cAAc,YAAY,MAAM,KAAK,IAAI,CAAC,MAAM,EAAE,WAAW,CAAC,EAAE,EAAE,GAAG,CAAC,QAAQ,EAAE,YAAY,IAAI,CAAC,OAAO;IAC9G,MAAM,aAAa,MAAM,IAAA,iJAAY,EAAC,OAAO,iIAAa,CAAC,KAAK,EAAE,iIAAa,CAAC,IAAI,EAAE,aAAa,SAAS,GAAG,EAAE;QAAC;KAAgB;IAElI,oRAAK,CAAC,IAAI,CAAC;IACX,MAAM,IAAA,8IAAS,EAAC,OAAO,iIAAa,CAAC,KAAK,EAAE,iIAAa,CAAC,IAAI,EAAE,CAAC,MAAM,EAAE,iIAAa,CAAC,MAAM,EAAE,EAAE,WAAW,GAAG;IAE/G,oRAAK,CAAC,OAAO,CAAC;AACf","debugId":null}},
    {"offset": {"line": 810, "column": 0}, "map": {"version":3,"sources":["E:/qbb/github/blog-public/src/app/blog/page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport Link from 'next/link'\r\nimport dayjs from 'dayjs'\r\nimport { motion } from 'motion/react'\r\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react'\r\nimport { toast } from 'sonner'\r\nimport { ANIMATION_DELAY, GITHUB_CONFIG, INIT_DELAY } from '@/consts'\r\nimport ShortLineSVG from '@/svgs/short-line.svg'\r\nimport { useBlogIndex, type BlogIndexItem } from '@/hooks/use-blog-index'\r\nimport { useReadArticles } from '@/hooks/use-read-articles'\r\nimport BilibiliSVG from '@/svgs/bilibili.svg'\r\nimport { useAuthStore } from '@/hooks/use-auth'\r\nimport { readFileAsText } from '@/lib/file-utils'\r\nimport { cn } from '@/lib/utils'\r\nimport { batchDeleteBlogs } from './services/batch-delete-blogs'\r\nimport { Check } from 'lucide-react'\r\n\r\nexport default function BlogPage() {\r\n\tconst { items, loading } = useBlogIndex()\r\n\tconst { isRead } = useReadArticles()\r\n\tconst { isAuth, setPrivateKey } = useAuthStore()\r\n\r\n\tconst keyInputRef = useRef<HTMLInputElement>(null)\r\n\tconst [editMode, setEditMode] = useState(false)\r\n\tconst [editableItems, setEditableItems] = useState<BlogIndexItem[]>([])\r\n\tconst [selectedSlugs, setSelectedSlugs] = useState<Set<string>>(new Set())\r\n\tconst [saving, setSaving] = useState(false)\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!editMode) {\r\n\t\t\tsetEditableItems(items)\r\n\t\t}\r\n\t\tconsole.log(666, GITHUB_CONFIG)\r\n\t}, [items, editMode])\r\n\r\n\tconst displayItems = editMode ? editableItems : items\r\n\r\n\tconst { groupedItems, years } = useMemo(() => {\r\n\t\tconst sorted = [...displayItems].sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime())\r\n\t\tconst grouped = sorted.reduce(\r\n\t\t\t(acc, item) => {\r\n\t\t\t\tconst year = dayjs(item.date).format('YYYY')\r\n\t\t\t\tif (!acc[year]) {\r\n\t\t\t\t\tacc[year] = []\r\n\t\t\t\t}\r\n\t\t\t\tacc[year].push(item)\r\n\t\t\t\treturn acc\r\n\t\t\t},\r\n\t\t\t{} as Record<string, BlogIndexItem[]>\r\n\t\t)\r\n\t\tconst yearKeys = Object.keys(grouped).sort((a, b) => Number(b) - Number(a))\r\n\t\treturn { groupedItems: grouped, years: yearKeys }\r\n\t}, [displayItems])\r\n\r\n\tconst selectedCount = selectedSlugs.size\r\n\tconst buttonText = isAuth ? '保存' : '导入密钥'\r\n\r\n\tconst toggleEditMode = useCallback(() => {\r\n\t\tif (editMode) {\r\n\t\t\tsetEditMode(false)\r\n\t\t\tsetEditableItems(items)\r\n\t\t\tsetSelectedSlugs(new Set())\r\n\t\t} else {\r\n\t\t\tsetEditableItems(items)\r\n\t\t\tsetEditMode(true)\r\n\t\t}\r\n\t}, [editMode, items])\r\n\r\n\tconst toggleSelect = useCallback((slug: string) => {\r\n\t\tsetSelectedSlugs(prev => {\r\n\t\t\tconst next = new Set(prev)\r\n\t\t\tif (next.has(slug)) {\r\n\t\t\t\tnext.delete(slug)\r\n\t\t\t} else {\r\n\t\t\t\tnext.add(slug)\r\n\t\t\t}\r\n\t\t\treturn next\r\n\t\t})\r\n\t}, [])\r\n\r\n\tconst handleItemClick = useCallback(\r\n\t\t(event: React.MouseEvent, slug: string) => {\r\n\t\t\tif (!editMode) return\r\n\t\t\tevent.preventDefault()\r\n\t\t\tevent.stopPropagation()\r\n\t\t\ttoggleSelect(slug)\r\n\t\t},\r\n\t\t[editMode, toggleSelect]\r\n\t)\r\n\r\n\tconst handleDeleteSelected = useCallback(() => {\r\n\t\tif (selectedCount === 0) {\r\n\t\t\ttoast.info('请选择要删除的文章')\r\n\t\t\treturn\r\n\t\t}\r\n\t\tsetEditableItems(prev => prev.filter(item => !selectedSlugs.has(item.slug)))\r\n\t\tsetSelectedSlugs(new Set())\r\n\t}, [selectedCount, selectedSlugs])\r\n\r\n\tconst handleCancel = useCallback(() => {\r\n\t\tsetEditableItems(items)\r\n\t\tsetSelectedSlugs(new Set())\r\n\t\tsetEditMode(false)\r\n\t}, [items])\r\n\r\n\tconst handleSave = useCallback(async () => {\r\n\t\tconst removedSlugs = items.filter(item => !editableItems.some(editItem => editItem.slug === item.slug)).map(item => item.slug)\r\n\r\n\t\tif (removedSlugs.length === 0) {\r\n\t\t\ttoast.info('没有需要保存的改动')\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tsetSaving(true)\r\n\t\t\tawait batchDeleteBlogs(removedSlugs)\r\n\t\t\tsetEditMode(false)\r\n\t\t\tsetSelectedSlugs(new Set())\r\n\t\t} catch (error: any) {\r\n\t\t\tconsole.error(error)\r\n\t\t\ttoast.error(error?.message || '保存失败')\r\n\t\t} finally {\r\n\t\t\tsetSaving(false)\r\n\t\t}\r\n\t}, [editableItems, items])\r\n\r\n\tconst handleSaveClick = useCallback(() => {\r\n\t\tif (!isAuth) {\r\n\t\t\tkeyInputRef.current?.click()\r\n\t\t\treturn\r\n\t\t}\r\n\t\tvoid handleSave()\r\n\t}, [handleSave, isAuth])\r\n\r\n\tconst handlePrivateKeySelection = useCallback(\r\n\t\tasync (file: File) => {\r\n\t\t\ttry {\r\n\t\t\t\tconst pem = await readFileAsText(file)\r\n\t\t\t\tsetPrivateKey(pem)\r\n\t\t\t\ttoast.success('密钥导入成功，请再次点击保存')\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error(error)\r\n\t\t\t\ttoast.error('读取密钥失败')\r\n\t\t\t}\r\n\t\t},\r\n\t\t[setPrivateKey]\r\n\t)\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<input\r\n\t\t\t\tref={keyInputRef}\r\n\t\t\t\ttype='file'\r\n\t\t\t\taccept='.pem'\r\n\t\t\t\tclassName='hidden'\r\n\t\t\t\tonChange={async e => {\r\n\t\t\t\t\tconst f = e.target.files?.[0]\r\n\t\t\t\t\tif (f) await handlePrivateKeySelection(f)\r\n\t\t\t\t\tif (e.currentTarget) e.currentTarget.value = ''\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\r\n\t\t\t<div className='flex flex-col items-center justify-center gap-6 px-6 pt-32 pb-12 max-sm:pt-28'>\r\n\t\t\t\t<>\r\n\t\t\t\t\t{years.map((year, index) => (\r\n\t\t\t\t\t\t<motion.div\r\n\t\t\t\t\t\t\tkey={year}\r\n\t\t\t\t\t\t\tinitial={{ opacity: 0, scale: 0.9 }}\r\n\t\t\t\t\t\t\tanimate={{ opacity: 1, scale: 1 }}\r\n\t\t\t\t\t\t\ttransition={{ delay: INIT_DELAY + ANIMATION_DELAY * index }}\r\n\t\t\t\t\t\t\tclassName='card relative w-full max-w-[840px] space-y-6'>\r\n\t\t\t\t\t\t\t<div className='mb-3 flex items-center gap-3 text-base'>\r\n\t\t\t\t\t\t\t\t<div className='w-[44px] font-medium'>{year}</div>\r\n\r\n\t\t\t\t\t\t\t\t<div className='h-2 w-2 rounded-full bg-[#D9D9D9]'></div>\r\n\r\n\t\t\t\t\t\t\t\t<div className='text-secondary text-sm'>{groupedItems[year].length} 篇文章</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t{groupedItems[year].map(it => {\r\n\t\t\t\t\t\t\t\t\tconst hasRead = isRead(it.slug)\r\n\t\t\t\t\t\t\t\t\tconst isSelected = selectedSlugs.has(it.slug)\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\t\t\thref={`/blog/${it.slug}`}\r\n\t\t\t\t\t\t\t\t\t\t\tkey={it.slug}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={event => handleItemClick(event, it.slug)}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={cn(\r\n\t\t\t\t\t\t\t\t\t\t\t\t'group flex min-h-10 items-center gap-3 py-3 transition-all',\r\n\t\t\t\t\t\t\t\t\t\t\t\teditMode\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t? cn(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'rounded-lg border px-3',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisSelected ? 'border-brand/60 bg-brand/5' : 'hover:border-brand/40 border-transparent hover:bg-white/60'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'cursor-pointer'\r\n\t\t\t\t\t\t\t\t\t\t\t)}>\r\n\t\t\t\t\t\t\t\t\t\t\t{editMode && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={cn(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'flex h-4 w-4 items-center justify-center rounded-full border text-[10px] font-semibold',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisSelected ? 'border-brand bg-brand text-white' : 'border-[#D9D9D9] text-transparent'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Check />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t<span className='text-secondary w-[44px] shrink-0 text-sm font-medium'>{dayjs(it.date).format('MM-DD')}</span>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<div className='relative flex h-2 w-2 items-center justify-center'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className='bg-secondary group-hover:bg-brand h-[5px] w-[5px] rounded-full transition-all group-hover:h-4'></div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<ShortLineSVG className='absolute bottom-4' />\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={cn(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'flex-1 truncate text-sm font-medium transition-all',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\teditMode ? null : 'group-hover:text-brand group-hover:translate-x-2'\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{it.title || it.slug}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{hasRead && <span className='text-secondary ml-2 text-xs'>[已阅读]</span>}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className='flex flex-wrap items-center gap-2 max-sm:hidden'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{(it.tags || []).map(t => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span key={t} className='text-secondary text-sm'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t#{t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</motion.div>\r\n\t\t\t\t\t))}\r\n\t\t\t\t\t{items.length > 0 && (\r\n\t\t\t\t\t\t<div className='text-center'>\r\n\t\t\t\t\t\t\t<motion.a\r\n\t\t\t\t\t\t\t\tinitial={{ opacity: 0, scale: 0.6 }}\r\n\t\t\t\t\t\t\t\tanimate={{ opacity: 1, scale: 1 }}\r\n\t\t\t\t\t\t\t\twhileHover={{ scale: 1.05 }}\r\n\t\t\t\t\t\t\t\twhileTap={{ scale: 0.95 }}\r\n\t\t\t\t\t\t\t\thref='https://space.bilibili.com/189975021'\r\n\t\t\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\t\t\tclassName='card text-secondary static inline-flex items-center gap-2 rounded-xl px-4 py-2 text-xs'>\r\n\t\t\t\t\t\t\t\t<BilibiliSVG className='h-4 w-4' />\r\n\t\t\t\t\t\t\t\t已经到底啦，去看看我的视频？\r\n\t\t\t\t\t\t\t</motion.a>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{!loading && items.length === 0 && <div className='text-secondary py-6 text-center text-sm'>暂无文章</div>}\r\n\t\t\t\t\t{loading && <div className='text-secondary py-6 text-center text-sm'>加载中...</div>}\r\n\t\t\t\t</>\r\n\t\t\t</div>\r\n\r\n\t\t\t<motion.div initial={{ opacity: 0, scale: 0.6 }} animate={{ opacity: 1, scale: 1 }} className='absolute top-4 right-6 flex gap-3 max-sm:hidden'>\r\n\t\t\t\t{editMode ? (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<motion.button\r\n\t\t\t\t\t\t\twhileHover={{ scale: 1.05 }}\r\n\t\t\t\t\t\t\twhileTap={{ scale: 0.95 }}\r\n\t\t\t\t\t\t\tonClick={handleCancel}\r\n\t\t\t\t\t\t\tdisabled={saving}\r\n\t\t\t\t\t\t\tclassName='rounded-xl border bg-white/60 px-6 py-2 text-sm'>\r\n\t\t\t\t\t\t\t取消\r\n\t\t\t\t\t\t</motion.button>\r\n\t\t\t\t\t\t<motion.button\r\n\t\t\t\t\t\t\twhileHover={{ scale: 1.05 }}\r\n\t\t\t\t\t\t\twhileTap={{ scale: 0.95 }}\r\n\t\t\t\t\t\t\tonClick={handleDeleteSelected}\r\n\t\t\t\t\t\t\tdisabled={selectedCount === 0}\r\n\t\t\t\t\t\t\tclassName='rounded-xl border border-red-200 bg-red-50 px-4 py-2 text-sm text-red-600 transition-colors disabled:opacity-60'>\r\n\t\t\t\t\t\t\t删除(已选:{selectedCount}篇)\r\n\t\t\t\t\t\t</motion.button>\r\n\t\t\t\t\t\t<motion.button whileHover={{ scale: 1.05 }} whileTap={{ scale: 0.95 }} onClick={handleSaveClick} disabled={saving} className='brand-btn px-6'>\r\n\t\t\t\t\t\t\t{saving ? '保存中...' : buttonText}\r\n\t\t\t\t\t\t</motion.button>\r\n\t\t\t\t\t</>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<motion.button\r\n\t\t\t\t\t\twhileHover={{ scale: 1.05 }}\r\n\t\t\t\t\t\twhileTap={{ scale: 0.95 }}\r\n\t\t\t\t\t\tonClick={toggleEditMode}\r\n\t\t\t\t\t\tclassName='rounded-xl border bg-white/60 px-6 py-2 text-sm backdrop-blur-sm transition-colors hover:bg-white/80'>\r\n\t\t\t\t\t\t编辑\r\n\t\t\t\t\t</motion.button>\r\n\t\t\t\t)}\r\n\t\t\t</motion.div>\r\n\t\t</>\r\n\t)\r\n}\r\n"],"names":["Link","dayjs","motion","useCallback","useEffect","useMemo","useRef","useState","toast","ANIMATION_DELAY","GITHUB_CONFIG","INIT_DELAY","ShortLineSVG","useBlogIndex","BlogIndexItem","useReadArticles","BilibiliSVG","useAuthStore","readFileAsText","cn","batchDeleteBlogs","Check","BlogPage","items","loading","isRead","isAuth","setPrivateKey","keyInputRef","HTMLInputElement","editMode","setEditMode","editableItems","setEditableItems","selectedSlugs","setSelectedSlugs","Set","saving","setSaving","console","log","displayItems","groupedItems","years","sorted","sort","a","b","Date","date","getTime","grouped","reduce","acc","item","year","format","push","Record","yearKeys","Object","keys","Number","selectedCount","size","buttonText","toggleEditMode","toggleSelect","slug","prev","next","has","delete","add","handleItemClick","event","React","MouseEvent","preventDefault","stopPropagation","handleDeleteSelected","info","filter","handleCancel","handleSave","removedSlugs","some","editItem","map","length","error","message","handleSaveClick","current","click","handlePrivateKeySelection","file","File","pem","success","e","f","target","files","currentTarget","value","index","opacity","scale","delay","it","hasRead","isSelected","title","tags","t"],"mappings":"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","ignoreList":[],"debugId":null}}]
}