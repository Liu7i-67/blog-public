{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["E:/qbb/github/blog-public/src/components/dialog-modal.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect, useState, type ReactNode } from 'react'\r\nimport { createPortal } from 'react-dom'\r\nimport { AnimatePresence, motion } from 'motion/react'\r\nimport { cn } from '@/lib/utils'\r\n\r\ninterface DialogModalProps {\r\n\topen: boolean\r\n\tonClose: () => void\r\n\tchildren: ReactNode\r\n\tclassName?: string\r\n\toverlayClassName?: string\r\n\tdisableCloseOnOverlay?: boolean\r\n\tlockScroll?: boolean\r\n\tcloseOnEsc?: boolean\r\n}\r\n\r\nexport function DialogModal({ open, onClose, children, className, disableCloseOnOverlay = false, lockScroll = true, closeOnEsc = true }: DialogModalProps) {\r\n\tconst [mounted, setMounted] = useState(false)\r\n\r\n\tuseEffect(() => {\r\n\t\tsetMounted(true)\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!lockScroll || !open) return\r\n\t\tconst previous = document.body.style.overflow\r\n\t\tdocument.body.style.overflow = 'hidden'\r\n\t\treturn () => {\r\n\t\t\tdocument.body.style.overflow = previous\r\n\t\t}\r\n\t}, [lockScroll, open])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!closeOnEsc || !open) return\r\n\t\tconst handler = (event: KeyboardEvent) => {\r\n\t\t\tif (event.key === 'Escape') {\r\n\t\t\t\tonClose()\r\n\t\t\t}\r\n\t\t}\r\n\t\twindow.addEventListener('keydown', handler)\r\n\t\treturn () => {\r\n\t\t\twindow.removeEventListener('keydown', handler)\r\n\t\t}\r\n\t}, [closeOnEsc, onClose, open])\r\n\r\n\tif (!mounted) return null\r\n\r\n\treturn createPortal(\r\n\t\t<AnimatePresence>\r\n\t\t\t{open && (\r\n\t\t\t\t<motion.div\r\n\t\t\t\t\tinitial={{ opacity: 0 }}\r\n\t\t\t\t\tanimate={{ opacity: 1 }}\r\n\t\t\t\t\texit={{ opacity: 0 }}\r\n\t\t\t\t\tclassName={'fixed inset-0 z-50 flex items-center justify-center bg-card p-4 backdrop-blur-xl'}\r\n\t\t\t\t\tonClick={disableCloseOnOverlay ? undefined : onClose}>\r\n\t\t\t\t\t<motion.div\r\n\t\t\t\t\t\tinitial={{ opacity: 0, scale: 0.8, y: 20 }}\r\n\t\t\t\t\t\tanimate={{ opacity: 1, scale: 1, y: 0 }}\r\n\t\t\t\t\t\texit={{ opacity: 0, scale: 0.8, y: 20 }}\r\n\t\t\t\t\t\tclassName={cn('static', className)}\r\n\t\t\t\t\t\tonClick={e => e.stopPropagation()}>\r\n\t\t\t\t\t\t{children}\r\n\t\t\t\t\t</motion.div>\r\n\t\t\t\t</motion.div>\r\n\t\t\t)}\r\n\t\t</AnimatePresence>,\r\n\t\tdocument.body\r\n\t)\r\n}\r\n"],"names":["c","_c","useEffect","useState","ReactNode","createPortal","AnimatePresence","motion","cn","DialogModalProps","open","onClose","children","className","overlayClassName","disableCloseOnOverlay","lockScroll","closeOnEsc","DialogModal","t0","$","$i","Symbol","for","t1","t2","t3","undefined","mounted","setMounted","t4","t5","DialogModal[useEffect()]","t6","t7","previous","document","body","style","overflow","t8","t9","handler","event","key","window","addEventListener","removeEventListener","t10","opacity","scale","y","_DialogModalMotionDivOnClick","t11","e","stopPropagation"],"mappings":"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","ignoreList":[],"debugId":null}},
    {"offset": {"line": 202, "column": 0}, "map": {"version":3,"sources":["E:/qbb/github/blog-public/src/app/projects/components/image-upload-dialog.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useRef } from 'react'\r\nimport { toast } from 'sonner'\r\nimport { Plus } from 'lucide-react'\r\nimport { DialogModal } from '@/components/dialog-modal'\r\n\r\nexport type ImageItem = { type: 'url'; url: string } | { type: 'file'; file: File; previewUrl: string; hash?: string }\r\n\r\ninterface ImageUploadDialogProps {\r\n\tcurrentImage?: string\r\n\tonClose: () => void\r\n\tonSubmit: (image: ImageItem) => void\r\n}\r\n\r\nexport default function ImageUploadDialog({ currentImage, onClose, onSubmit }: ImageUploadDialogProps) {\r\n\tconst [urlInput, setUrlInput] = useState(currentImage || '')\r\n\tconst [previewFile, setPreviewFile] = useState<{ file: File; previewUrl: string } | null>(null)\r\n\tconst fileInputRef = useRef<HTMLInputElement>(null)\r\n\r\n\tconst handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n\t\tconst file = e.target.files?.[0]\r\n\t\tif (!file) return\r\n\r\n\t\tif (!file.type.startsWith('image/')) {\r\n\t\t\ttoast.error('请选择图片文件')\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tconst previewUrl = URL.createObjectURL(file)\r\n\t\tsetPreviewFile({ file, previewUrl })\r\n\t\tsetUrlInput('')\r\n\t}\r\n\r\n\tconst handleSubmit = (e: React.FormEvent) => {\r\n\t\te.preventDefault()\r\n\r\n\t\tif (previewFile) {\r\n\t\t\tonSubmit({\r\n\t\t\t\ttype: 'file',\r\n\t\t\t\tfile: previewFile.file,\r\n\t\t\t\tpreviewUrl: previewFile.previewUrl\r\n\t\t\t})\r\n\t\t} else if (urlInput.trim()) {\r\n\t\t\tonSubmit({\r\n\t\t\t\ttype: 'url',\r\n\t\t\t\turl: urlInput.trim()\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\ttoast.error('请上传图片或输入 URL')\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tsetPreviewFile(null)\r\n\t\tsetUrlInput(currentImage || '')\r\n\t\tonClose()\r\n\t}\r\n\r\n\tconst handleClose = () => {\r\n\t\tif (previewFile) {\r\n\t\t\tURL.revokeObjectURL(previewFile.previewUrl)\r\n\t\t}\r\n\t\tsetPreviewFile(null)\r\n\t\tsetUrlInput(currentImage || '')\r\n\t\tonClose()\r\n\t}\r\n\r\n\treturn (\r\n\t\t<DialogModal open onClose={handleClose} className='card w-md'>\r\n\t\t\t<h2 className='mb-4 text-xl font-bold'>选择图片</h2>\r\n\t\t\t<form onSubmit={handleSubmit} className='space-y-4'>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<label className='text-secondary mb-2 block text-sm font-medium'>上传图片</label>\r\n\t\t\t\t\t<input ref={fileInputRef} type='file' accept='image/*' className='hidden' onChange={handleFileSelect} />\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tonClick={() => fileInputRef.current?.click()}\r\n\t\t\t\t\t\tclassName='mx-auto flex h-32 w-32 cursor-pointer items-center justify-center rounded-xl border border-gray-300 bg-secondary/10 transition-colors hover:bg-gray-200'>\r\n\t\t\t\t\t\t{previewFile ? (\r\n\t\t\t\t\t\t\t<img src={previewFile.previewUrl} alt='preview' className='h-full w-full rounded-xl object-cover' />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<div className='text-center'>\r\n\t\t\t\t\t\t\t\t<Plus className='text-secondary mx-auto mb-1 h-8 w-8' />\r\n\t\t\t\t\t\t\t\t<p className='text-secondary text-xs'>点击上传图片</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className='relative'>\r\n\t\t\t\t\t<div className='absolute inset-0 flex items-center'>\r\n\t\t\t\t\t\t<div className='w-full border-t border-gray-300'></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='relative flex justify-center text-sm'>\r\n\t\t\t\t\t\t<span className='text-secondary rounded-lg bg-white px-4 py-1'>或</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<label className='text-secondary mb-2 block text-sm font-medium'>图片 URL</label>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype='url'\r\n\t\t\t\t\t\tvalue={urlInput}\r\n\t\t\t\t\t\tonChange={e => {\r\n\t\t\t\t\t\t\tsetUrlInput(e.target.value)\r\n\t\t\t\t\t\t\tif (previewFile) {\r\n\t\t\t\t\t\t\t\tURL.revokeObjectURL(previewFile.previewUrl)\r\n\t\t\t\t\t\t\t\tsetPreviewFile(null)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tplaceholder='https://example.com/image.png'\r\n\t\t\t\t\t\tclassName='focus:ring-brand w-full rounded-lg border border-gray-300 bg-gray-200 px-4 py-2 focus:ring-2 focus:outline-none'\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className='flex gap-3 pt-2'>\r\n\t\t\t\t\t<button type='submit' className='brand-btn flex-1 justify-center rounded-lg px-6 py-2.5'>\r\n\t\t\t\t\t\t确认\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\ttype='button'\r\n\t\t\t\t\t\tonClick={handleClose}\r\n\t\t\t\t\t\tclassName='flex-1 rounded-lg border border-gray-300 bg-white px-6 py-2.5 transition-colors hover:bg-gray-50'>\r\n\t\t\t\t\t\t取消\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</form>\r\n\t\t</DialogModal>\r\n\t)\r\n}\r\n"],"names":["c","_c","useState","useRef","toast","Plus","DialogModal","ImageItem","type","url","file","File","previewUrl","hash","ImageUploadDialogProps","currentImage","onClose","onSubmit","image","ImageUploadDialog","t0","$","$i","Symbol","for","urlInput","setUrlInput","previewFile","setPreviewFile","fileInputRef","t1","e","target","files","startsWith","error","URL","createObjectURL","handleFileSelect","t2","e_0","preventDefault","trim","handleSubmit","t3","ImageUploadDialog[handleClose]","revokeObjectURL","handleClose","t4","t5","t6","t7","ImageUploadDialog[<div>.onClick]","current","click","t8","t9","t10","t11","t12","e_1","value","t13","t14","t15","t16","t17"],"mappings":"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","ignoreList":[],"debugId":null}},
    {"offset": {"line": 626, "column": 0}, "map": {"version":3,"sources":["E:/qbb/github/blog-public/src/app/projects/components/project-card.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { motion } from 'motion/react'\r\nimport Link from 'next/link'\r\nimport { cn } from '@/lib/utils'\r\nimport { useSize } from '@/hooks/use-size'\r\nimport ImageUploadDialog, { type ImageItem } from './image-upload-dialog'\r\n\r\nexport interface Project {\r\n\tname: string\r\n\tyear: number\r\n\tdescription: string\r\n\timage: string\r\n\turl: string\r\n\ttags: string[]\r\n\tgithub?: string\r\n\tnpm?: string\r\n}\r\n\r\ninterface ProjectCardProps {\r\n\tproject: Project\r\n\tisEditMode?: boolean\r\n\tonUpdate?: (project: Project, oldProject: Project, imageItem?: ImageItem) => void\r\n\tonDelete?: () => void\r\n}\r\n\r\nexport function ProjectCard({ project, isEditMode = false, onUpdate, onDelete }: ProjectCardProps) {\r\n\tconst [isEditing, setIsEditing] = useState(false)\r\n\tconst { maxSM } = useSize()\r\n\tconst [localProject, setLocalProject] = useState(project)\r\n\tconst [showImageDialog, setShowImageDialog] = useState(false)\r\n\tconst [imageItem, setImageItem] = useState<ImageItem | null>(null)\r\n\r\n\tconst handleFieldChange = (field: keyof Project, value: any) => {\r\n\t\tconst updated = { ...localProject, [field]: value }\r\n\t\tsetLocalProject(updated)\r\n\t\tonUpdate?.(updated, project, imageItem || undefined)\r\n\t}\r\n\r\n\tconst handleImageSubmit = (image: ImageItem) => {\r\n\t\tsetImageItem(image)\r\n\t\tconst imageUrl = image.type === 'url' ? image.url : image.previewUrl\r\n\t\tconst updated = { ...localProject, image: imageUrl }\r\n\t\tsetLocalProject(updated)\r\n\t\tonUpdate?.(updated, project, image)\r\n\t}\r\n\r\n\tconst handleTagsChange = (tagsStr: string) => {\r\n\t\tconst tags = tagsStr\r\n\t\t\t.split(',')\r\n\t\t\t.map(t => t.trim())\r\n\t\t\t.filter(t => t)\r\n\t\thandleFieldChange('tags', tags)\r\n\t}\r\n\r\n\tconst handleCancel = () => {\r\n\t\tsetLocalProject(project)\r\n\t\tsetIsEditing(false)\r\n\t\tsetImageItem(null)\r\n\t}\r\n\r\n\tconst canEdit = isEditMode && isEditing\r\n\r\n\treturn (\r\n\t\t<motion.div\r\n\t\t\tinitial={{ opacity: 0, scale: 0.9 }}\r\n\t\t\t{...(maxSM ? { animate: { opacity: 1, scale: 1 } } : { whileInView: { opacity: 1, scale: 1 } })}\r\n\t\t\tclassName='card relative flex flex-col gap-4'>\r\n\t\t\t{isEditMode && (\r\n\t\t\t\t<div className='absolute top-3 right-3 z-10 flex gap-2'>\r\n\t\t\t\t\t{isEditing ? (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<button onClick={handleCancel} className='rounded-lg px-2 py-1.5 text-xs text-gray-400 transition-colors hover:text-gray-600'>\r\n\t\t\t\t\t\t\t\t取消\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button onClick={() => setIsEditing(false)} className='rounded-lg px-2 py-1.5 text-xs text-blue-400 transition-colors hover:text-blue-600'>\r\n\t\t\t\t\t\t\t\t完成\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<button onClick={() => setIsEditing(true)} className='rounded-lg px-2 py-1.5 text-xs text-blue-400 transition-colors hover:text-blue-600'>\r\n\t\t\t\t\t\t\t\t编辑\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button onClick={onDelete} className='rounded-lg px-2 py-1.5 text-xs text-red-400 transition-colors hover:text-red-600'>\r\n\t\t\t\t\t\t\t\t删除\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\r\n\t\t\t<div className='flex items-start gap-4'>\r\n\t\t\t\t<div className='group relative'>\r\n\t\t\t\t\t<img\r\n\t\t\t\t\t\tsrc={localProject.image}\r\n\t\t\t\t\t\talt={localProject.name}\r\n\t\t\t\t\t\tclassName={cn('h-16 w-16 shrink-0 rounded-xl object-cover', canEdit && 'cursor-pointer')}\r\n\t\t\t\t\t\tonClick={() => canEdit && setShowImageDialog(true)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{canEdit && (\r\n\t\t\t\t\t\t<div className='pointer-events-none absolute inset-0 flex items-center justify-center rounded-xl bg-black/40 opacity-0 transition-opacity group-hover:opacity-100'>\r\n\t\t\t\t\t\t\t<span className='text-xs text-white'>更换</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='flex-1'>\r\n\t\t\t\t\t<div className='flex items-center gap-2'>\r\n\t\t\t\t\t\t<h3\r\n\t\t\t\t\t\t\tcontentEditable={canEdit}\r\n\t\t\t\t\t\t\tsuppressContentEditableWarning\r\n\t\t\t\t\t\t\tonBlur={e => handleFieldChange('name', e.currentTarget.textContent || '')}\r\n\t\t\t\t\t\t\tclassName={cn('text-lg font-semibold', canEdit && 'cursor-text focus:outline-none')}>\r\n\t\t\t\t\t\t\t{localProject.name}\r\n\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t{canEdit ? (\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype='number'\r\n\t\t\t\t\t\t\t\tvalue={localProject.year}\r\n\t\t\t\t\t\t\t\tonChange={e => handleFieldChange('year', parseInt(e.target.value) || 0)}\r\n\t\t\t\t\t\t\t\tclassName='text-secondary w-18 rounded border border-gray-300 px-2 py-1 text-sm focus:outline-none'\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<span className='text-secondary text-sm'>{localProject.year}</span>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='mt-2 flex flex-wrap gap-2'>\r\n\t\t\t\t\t\t{canEdit ? (\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\tvalue={localProject.tags.join(', ')}\r\n\t\t\t\t\t\t\t\tonChange={e => handleTagsChange(e.target.value)}\r\n\t\t\t\t\t\t\t\tplaceholder='标签，用逗号分隔'\r\n\t\t\t\t\t\t\t\tclassName='w-full rounded-lg border border-gray-300 bg-gray-50 px-2 py-1 text-xs focus:outline-none'\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\tlocalProject.tags.map(tag => (\r\n\t\t\t\t\t\t\t\t<span key={tag} className='text-secondary rounded-lg bg-white/50 px-2 py-1 text-xs'>\r\n\t\t\t\t\t\t\t\t\t{tag}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<p\r\n\t\t\t\tcontentEditable={canEdit}\r\n\t\t\t\tsuppressContentEditableWarning\r\n\t\t\t\tonBlur={e => handleFieldChange('description', e.currentTarget.textContent || '')}\r\n\t\t\t\tclassName={cn('text-secondary text-sm leading-relaxed', canEdit && 'cursor-text focus:outline-none')}>\r\n\t\t\t\t{localProject.description}\r\n\t\t\t</p>\r\n\r\n\t\t\t<div className='flex flex-wrap gap-2'>\r\n\t\t\t\t{canEdit ? (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype='url'\r\n\t\t\t\t\t\t\tvalue={localProject.url}\r\n\t\t\t\t\t\t\tonChange={e => handleFieldChange('url', e.target.value)}\r\n\t\t\t\t\t\t\tplaceholder='网站 URL'\r\n\t\t\t\t\t\t\tclassName='flex-1 rounded-lg border border-gray-300 bg-gray-50 px-3 py-1.5 text-sm focus:outline-none'\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype='url'\r\n\t\t\t\t\t\t\tvalue={localProject.github || ''}\r\n\t\t\t\t\t\t\tonChange={e => handleFieldChange('github', e.target.value || undefined)}\r\n\t\t\t\t\t\t\tplaceholder='GitHub URL（可选）'\r\n\t\t\t\t\t\t\tclassName='flex-1 rounded-lg border border-gray-300 bg-gray-50 px-3 py-1.5 text-sm focus:outline-none'\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype='url'\r\n\t\t\t\t\t\t\tvalue={localProject.npm || ''}\r\n\t\t\t\t\t\t\tonChange={e => handleFieldChange('npm', e.target.value || undefined)}\r\n\t\t\t\t\t\t\tplaceholder='NPM URL（可选）'\r\n\t\t\t\t\t\t\tclassName='flex-1 rounded-lg border border-gray-300 bg-gray-50 px-3 py-1.5 text-sm focus:outline-none'\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\thref={localProject.url}\r\n\t\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\t\trel='noopener noreferrer'\r\n\t\t\t\t\t\t\tclassName='rounded-lg border bg-white/50 px-3 py-1.5 text-sm font-medium transition-colors hover:bg-white/80'>\r\n\t\t\t\t\t\t\tWebsite\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t{localProject.github && (\r\n\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\thref={localProject.github}\r\n\t\t\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\t\t\trel='noopener noreferrer'\r\n\t\t\t\t\t\t\t\tclassName='rounded-lg border bg-white/50 px-3 py-1.5 text-sm font-medium transition-colors hover:bg-white/80'>\r\n\t\t\t\t\t\t\t\tGitHub\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{localProject.npm && (\r\n\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\thref={localProject.npm}\r\n\t\t\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\t\t\trel='noopener noreferrer'\r\n\t\t\t\t\t\t\t\tclassName='rounded-lg border bg-white/50 px-3 py-1.5 text-sm font-medium transition-colors hover:bg-white/80'>\r\n\t\t\t\t\t\t\t\tNPM\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\r\n\t\t\t{canEdit && showImageDialog && (\r\n\t\t\t\t<ImageUploadDialog currentImage={localProject.image} onClose={() => setShowImageDialog(false)} onSubmit={handleImageSubmit} />\r\n\t\t\t)}\r\n\t\t</motion.div>\r\n\t)\r\n}\r\n"],"names":["c","_c","useState","motion","Link","cn","useSize","ImageUploadDialog","ImageItem","Project","name","year","description","image","url","tags","github","npm","ProjectCardProps","project","isEditMode","onUpdate","oldProject","imageItem","onDelete","ProjectCard","t0","$","$i","Symbol","for","t1","undefined","isEditing","setIsEditing","maxSM","localProject","setLocalProject","showImageDialog","setShowImageDialog","setImageItem","t2","ProjectCard[handleFieldChange]","field","value","updated","handleFieldChange","t3","imageUrl","type","previewUrl","updated_0","handleImageSubmit","t4","tagsStr","split","map","_ProjectCardHandleTagsChangeAnonymous","filter","_ProjectCardHandleTagsChangeAnonymous2","handleTagsChange","t5","ProjectCard[handleCancel]","handleCancel","canEdit","t6","opacity","scale","t7","animate","whileInView","t8","ProjectCard[<button>.onClick]","t9","t10","t11","t12","t13","ProjectCard[<img>.onClick]","t14","t15","t16","t17","e","currentTarget","textContent","t18","t19","t20","t21","e_0","parseInt","target","t22","t23","join","e_1","_ProjectCardLocalProjectTagsMap","t24","t25","t26","t27","e_2","t28","t29","t30","t31","e_3","e_4","e_5","t32","ProjectCard[<ImageUploadDialog>.onClose]","t33","tag","t_0","t","trim"],"mappings":"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","ignoreList":[],"debugId":null}},
    {"offset": {"line": 1292, "column": 0}, "map": {"version":3,"sources":["E:/qbb/github/blog-public/src/app/projects/components/create-dialog.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { toast } from 'sonner'\r\nimport { Plus } from 'lucide-react'\r\nimport ImageUploadDialog, { type ImageItem } from './image-upload-dialog'\r\nimport type { Project } from './project-card'\r\nimport { DialogModal } from '@/components/dialog-modal'\r\n\r\ninterface CreateDialogProps {\r\n\tproject: Project | null\r\n\tonClose: () => void\r\n\tonSave: (project: Project) => void\r\n}\r\n\r\nexport default function CreateDialog({ project, onClose, onSave }: CreateDialogProps) {\r\n\tconst [formData, setFormData] = useState<Project>({\r\n\t\tname: '',\r\n\t\tyear: new Date().getFullYear(),\r\n\t\timage: '',\r\n\t\turl: '',\r\n\t\tdescription: '',\r\n\t\ttags: [],\r\n\t\tgithub: undefined,\r\n\t\tnpm: undefined\r\n\t})\r\n\tconst [showImageDialog, setShowImageDialog] = useState(false)\r\n\tconst [tagsInput, setTagsInput] = useState('')\r\n\r\n\tuseEffect(() => {\r\n\t\tif (project) {\r\n\t\t\tsetFormData(project)\r\n\t\t\tsetTagsInput(project.tags.join(', '))\r\n\t\t} else {\r\n\t\t\tsetFormData({\r\n\t\t\t\tname: '',\r\n\t\t\t\tyear: new Date().getFullYear(),\r\n\t\t\t\timage: '',\r\n\t\t\t\turl: '',\r\n\t\t\t\tdescription: '',\r\n\t\t\t\ttags: [],\r\n\t\t\t\tgithub: undefined,\r\n\t\t\t\tnpm: undefined\r\n\t\t\t})\r\n\t\t\tsetTagsInput('')\r\n\t\t}\r\n\t}, [project])\r\n\r\n\tconst handleImageSubmit = (image: ImageItem) => {\r\n\t\tconst imageUrl = image.type === 'url' ? image.url : image.previewUrl\r\n\t\tsetFormData({ ...formData, image: imageUrl })\r\n\t}\r\n\r\n\tconst handleTagsChange = (value: string) => {\r\n\t\tsetTagsInput(value)\r\n\t\tconst tags = value\r\n\t\t\t.split(',')\r\n\t\t\t.map(t => t.trim())\r\n\t\t\t.filter(t => t)\r\n\t\tsetFormData({ ...formData, tags })\r\n\t}\r\n\r\n\tconst handleSubmit = () => {\r\n\t\tif (!formData.name.trim() || !formData.image.trim() || !formData.url.trim() || !formData.description.trim()) {\r\n\t\t\ttoast.error('请填写所有必填项')\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif (formData.tags.length === 0) {\r\n\t\t\ttoast.error('请至少添加一个标签')\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tonSave(formData)\r\n\t\tonClose()\r\n\t\ttoast.success(project ? '更新成功' : '添加成功')\r\n\t}\r\n\r\n\treturn (\r\n\t\t<DialogModal open onClose={onClose} className='card static w-md max-sm:w-full'>\r\n\t\t\t<div>\r\n\t\t\t\t<div className='mb-4 flex items-center gap-4'>\r\n\t\t\t\t\t<div className='group relative cursor-pointer' onClick={() => setShowImageDialog(true)}>\r\n\t\t\t\t\t\t{formData.image ? (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<img src={formData.image} alt={formData.name} className='h-16 w-16 rounded-xl object-cover' />\r\n\t\t\t\t\t\t\t\t<div className='pointer-events-none absolute inset-0 flex items-center justify-center rounded-xl bg-black/40 opacity-0 transition-opacity group-hover:opacity-100'>\r\n\t\t\t\t\t\t\t\t\t<span className='text-xs text-white'>更换</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<div className='flex h-16 w-16 items-center justify-center rounded-xl bg-gray-200'>\r\n\t\t\t\t\t\t\t\t<Plus className='h-6 w-6 text-gray-500' />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='flex-1'>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\tvalue={formData.name}\r\n\t\t\t\t\t\t\tonChange={e => setFormData({ ...formData, name: e.target.value })}\r\n\t\t\t\t\t\t\tplaceholder='项目名称'\r\n\t\t\t\t\t\t\tclassName='w-full text-lg font-bold focus:outline-none'\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<div className='mt-1 flex items-center gap-2'>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype='number'\r\n\t\t\t\t\t\t\t\tvalue={formData.year}\r\n\t\t\t\t\t\t\t\tonChange={e => setFormData({ ...formData, year: parseInt(e.target.value) || 0 })}\r\n\t\t\t\t\t\t\t\tplaceholder='年份'\r\n\t\t\t\t\t\t\t\tclassName='text-secondary w-20 rounded border border-gray-300 px-2 py-1 text-xs focus:outline-none'\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype='url'\r\n\t\t\t\t\t\t\t\tvalue={formData.url}\r\n\t\t\t\t\t\t\t\tonChange={e => setFormData({ ...formData, url: e.target.value })}\r\n\t\t\t\t\t\t\t\tplaceholder='https://example.com'\r\n\t\t\t\t\t\t\t\tclassName='text-secondary flex-1 truncate text-xs focus:outline-none'\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className='mt-3'>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\tvalue={tagsInput}\r\n\t\t\t\t\t\tonChange={e => handleTagsChange(e.target.value)}\r\n\t\t\t\t\t\tplaceholder='标签，用逗号分隔（如：React, Vue）'\r\n\t\t\t\t\t\tclassName='w-full rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-sm focus:outline-none'\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<div className='mt-2 flex flex-wrap gap-1.5'>\r\n\t\t\t\t\t\t{formData.tags.map(tag => (\r\n\t\t\t\t\t\t\t<span key={tag} className='rounded-full bg-secondary/10 px-2.5 py-0.5 text-xs text-gray-600'>\r\n\t\t\t\t\t\t\t\t{tag}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<textarea\r\n\t\t\t\t\tvalue={formData.description}\r\n\t\t\t\t\tonChange={e => setFormData({ ...formData, description: e.target.value })}\r\n\t\t\t\t\tplaceholder='项目介绍...'\r\n\t\t\t\t\tclassName='mt-3 w-full resize-none text-sm leading-relaxed focus:outline-none'\r\n\t\t\t\t\trows={4}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<div className='mt-3 space-y-2'>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype='url'\r\n\t\t\t\t\t\tvalue={formData.github || ''}\r\n\t\t\t\t\t\tonChange={e => setFormData({ ...formData, github: e.target.value || undefined })}\r\n\t\t\t\t\t\tplaceholder='GitHub URL（可选）'\r\n\t\t\t\t\t\tclassName='w-full rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-sm focus:outline-none'\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype='url'\r\n\t\t\t\t\t\tvalue={formData.npm || ''}\r\n\t\t\t\t\t\tonChange={e => setFormData({ ...formData, npm: e.target.value || undefined })}\r\n\t\t\t\t\t\tplaceholder='NPM URL（可选）'\r\n\t\t\t\t\t\tclassName='w-full rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-sm focus:outline-none'\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className='mt-6 flex gap-3'>\r\n\t\t\t\t<button onClick={onClose} className='flex-1 rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm transition-colors hover:bg-gray-50'>\r\n\t\t\t\t\t取消\r\n\t\t\t\t</button>\r\n\t\t\t\t<button onClick={handleSubmit} className='brand-btn flex-1 justify-center px-4'>\r\n\t\t\t\t\t{project ? '保存' : '添加'}\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\r\n\t\t\t{showImageDialog && <ImageUploadDialog currentImage={formData.image} onClose={() => setShowImageDialog(false)} onSubmit={handleImageSubmit} />}\r\n\t\t</DialogModal>\r\n\t)\r\n}\r\n"],"names":["c","_c","useState","useEffect","toast","Plus","ImageUploadDialog","ImageItem","Project","DialogModal","CreateDialogProps","project","onClose","onSave","CreateDialog","t0","$","$i","Symbol","for","t1","Date","getFullYear","t2","name","year","image","url","description","tags","github","undefined","npm","formData","setFormData","showImageDialog","setShowImageDialog","tagsInput","setTagsInput","t3","t4","CreateDialog[useEffect()]","join","t5","imageUrl","type","previewUrl","handleImageSubmit","t6","value","split","map","_CreateDialogHandleTagsChangeAnonymous","filter","_CreateDialogHandleTagsChangeAnonymous2","handleTagsChange","t7","CreateDialog[handleSubmit]","trim","error","length","success","handleSubmit","t8","CreateDialog[<div>.onClick]","t9","t10","e","target","t11","t12","e_0","parseInt","t13","t14","e_1","t15","t16","t17","t18","t19","e_2","t20","t21","_CreateDialogFormDataTagsMap","t22","t23","t24","e_3","t25","t26","t27","e_4","t28","t29","t30","e_5","t31","t32","t33","t34","t35","t36","t37","t38","CreateDialog[<ImageUploadDialog>.onClose]","t39","tag","t_0","t"],"mappings":"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","ignoreList":[],"debugId":null}},
    {"offset": {"line": 1998, "column": 0}, "map": {"version":3,"sources":["file:///E:/qbb/github/blog-public/src/lib/auth.ts"],"sourcesContent":["import { createInstallationToken, getInstallationId, signAppJwt } from './github-client'\r\nimport { GITHUB_CONFIG } from '@/consts'\r\nimport { useAuthStore } from '@/hooks/use-auth'\r\nimport { toast } from 'sonner'\r\n\r\nconst GITHUB_TOKEN_CACHE_KEY = 'github_token'\r\n\r\nfunction getTokenFromCache(): string | null {\r\n\tif (typeof sessionStorage === 'undefined') return null\r\n\ttry {\r\n\t\treturn sessionStorage.getItem(GITHUB_TOKEN_CACHE_KEY)\r\n\t} catch {\r\n\t\treturn null\r\n\t}\r\n}\r\n\r\nfunction saveTokenToCache(token: string): void {\r\n\tif (typeof sessionStorage === 'undefined') return\r\n\ttry {\r\n\t\tsessionStorage.setItem(GITHUB_TOKEN_CACHE_KEY, token)\r\n\t} catch (error) {\r\n\t\tconsole.error('Failed to save token to cache:', error)\r\n\t}\r\n}\r\n\r\nfunction clearTokenCache(): void {\r\n\tif (typeof sessionStorage === 'undefined') return\r\n\ttry {\r\n\t\tsessionStorage.removeItem(GITHUB_TOKEN_CACHE_KEY)\r\n\t} catch (error) {\r\n\t\tconsole.error('Failed to clear token cache:', error)\r\n\t}\r\n}\r\n\r\nexport function clearAllAuthCache(): void {\r\n\tclearTokenCache()\r\n}\r\n\r\nexport function hasAuth(): boolean {\r\n\treturn !!getTokenFromCache()\r\n}\r\n\r\n/**\r\n * 统一的认证 Token 获取\r\n * 自动处理缓存、签发等逻辑\r\n * @returns GitHub Installation Token\r\n */\r\nexport async function getAuthToken(): Promise<string> {\r\n\t// 1. 先尝试从缓存获取 token\r\n\tconst cachedToken = getTokenFromCache()\r\n\tif (cachedToken) {\r\n\t\ttoast.info('使用缓存的令牌...')\r\n\t\treturn cachedToken\r\n\t}\r\n\r\n\t// 2. 获取私钥（从缓存）\r\n\tconst privateKey = useAuthStore.getState().privateKey\r\n\tif (!privateKey) {\r\n\t\tthrow new Error('需要先设置私钥。请使用 useAuth().setPrivateKey()')\r\n\t}\r\n\r\n\ttoast.info('正在签发 JWT...')\r\n\tconst jwt = signAppJwt(GITHUB_CONFIG.APP_ID, privateKey)\r\n\r\n\ttoast.info('正在获取安装信息...')\r\n\tconst installationId = await getInstallationId(jwt, GITHUB_CONFIG.OWNER, GITHUB_CONFIG.REPO)\r\n\r\n\ttoast.info('正在创建安装令牌...')\r\n\tconst token = await createInstallationToken(jwt, installationId)\r\n\r\n\tsaveTokenToCache(token)\r\n\r\n\treturn token\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AACA;AACA;;;;;AAEA,MAAM,yBAAyB;AAE/B,SAAS;IACR,IAAI,OAAO,mBAAmB,aAAa,OAAO;IAClD,IAAI;QACH,OAAO,eAAe,OAAO,CAAC;IAC/B,EAAE,OAAM;QACP,OAAO;IACR;AACD;AAEA,SAAS,iBAAiB,KAAa;IACtC,IAAI,OAAO,mBAAmB,aAAa;IAC3C,IAAI;QACH,eAAe,OAAO,CAAC,wBAAwB;IAChD,EAAE,OAAO,OAAO;QACf,QAAQ,KAAK,CAAC,kCAAkC;IACjD;AACD;AAEA,SAAS;IACR,IAAI,OAAO,mBAAmB,aAAa;IAC3C,IAAI;QACH,eAAe,UAAU,CAAC;IAC3B,EAAE,OAAO,OAAO;QACf,QAAQ,KAAK,CAAC,gCAAgC;IAC/C;AACD;AAEO,SAAS;IACf;AACD;AAEO,SAAS;IACf,OAAO,CAAC,CAAC;AACV;AAOO,eAAe;IACrB,oBAAoB;IACpB,MAAM,cAAc;IACpB,IAAI,aAAa;QAChB,oRAAK,CAAC,IAAI,CAAC;QACX,OAAO;IACR;IAEA,eAAe;IACf,MAAM,aAAa,8IAAY,CAAC,QAAQ,GAAG,UAAU;IACrD,IAAI,CAAC,YAAY;QAChB,MAAM,IAAI,MAAM;IACjB;IAEA,oRAAK,CAAC,IAAI,CAAC;IACX,MAAM,MAAM,IAAA,+IAAU,EAAC,iIAAa,CAAC,MAAM,EAAE;IAE7C,oRAAK,CAAC,IAAI,CAAC;IACX,MAAM,iBAAiB,MAAM,IAAA,sJAAiB,EAAC,KAAK,iIAAa,CAAC,KAAK,EAAE,iIAAa,CAAC,IAAI;IAE3F,oRAAK,CAAC,IAAI,CAAC;IACX,MAAM,QAAQ,MAAM,IAAA,4JAAuB,EAAC,KAAK;IAEjD,iBAAiB;IAEjB,OAAO;AACR","debugId":null}},
    {"offset": {"line": 2073, "column": 0}, "map": {"version":3,"sources":["file:///E:/qbb/github/blog-public/src/hooks/use-auth.ts"],"sourcesContent":["import { create } from 'zustand'\r\nimport { clearAllAuthCache, getAuthToken as getToken, hasAuth as checkAuth } from '@/lib/auth'\r\n\r\ninterface AuthStore {\r\n\t// State\r\n\tisAuth: boolean\r\n\tprivateKey: string | null\r\n\r\n\t// Actions\r\n\tsetPrivateKey: (key: string) => void\r\n\tclearAuth: () => void\r\n\trefreshAuthState: () => void\r\n\tgetAuthToken: () => Promise<string>\r\n}\r\n\r\nexport const useAuthStore = create<AuthStore>((set, get) => ({\r\n\tisAuth: checkAuth(),\r\n\tprivateKey: null,\r\n\r\n\tsetPrivateKey: (key: string) => {\r\n\t\tset({ isAuth: true, privateKey: key })\r\n\t},\r\n\r\n\tclearAuth: () => {\r\n\t\tclearAllAuthCache()\r\n\t\tset({ isAuth: false })\r\n\t},\r\n\r\n\trefreshAuthState: () => {\r\n\t\tset({ isAuth: checkAuth() })\r\n\t},\r\n\r\n\tgetAuthToken: async () => {\r\n\t\tconst token = await getToken()\r\n\t\tget().refreshAuthState()\r\n\t\treturn token\r\n\t}\r\n}))\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAcO,MAAM,eAAe,IAAA,iQAAM,EAAY,CAAC,KAAK,MAAQ,CAAC;QAC5D,QAAQ,IAAA,gIAAS;QACjB,YAAY;QAEZ,eAAe,CAAC;YACf,IAAI;gBAAE,QAAQ;gBAAM,YAAY;YAAI;QACrC;QAEA,WAAW;YACV,IAAA,0IAAiB;YACjB,IAAI;gBAAE,QAAQ;YAAM;QACrB;QAEA,kBAAkB;YACjB,IAAI;gBAAE,QAAQ,IAAA,gIAAS;YAAG;QAC3B;QAEA,cAAc;YACb,MAAM,QAAQ,MAAM,IAAA,qIAAQ;YAC5B,MAAM,gBAAgB;YACtB,OAAO;QACR;IACD,CAAC","debugId":null}},
    {"offset": {"line": 2114, "column": 0}, "map": {"version":3,"sources":["file:///E:/qbb/github/blog-public/src/lib/github-client.ts"],"sourcesContent":["'use client'\r\n\r\nimport { useAuthStore } from '@/hooks/use-auth'\r\nimport { KJUR, KEYUTIL } from 'jsrsasign'\r\n\r\nexport const GH_API = 'https://api.github.com'\r\n\r\nfunction handle401Error(): void {\r\n\tif (typeof sessionStorage === 'undefined') return\r\n\ttry {\r\n\t\tuseAuthStore.getState().clearAuth()\r\n\t} catch (error) {\r\n\t\tconsole.error('Failed to clear auth cache:', error)\r\n\t}\r\n}\r\n\r\nexport function toBase64Utf8(input: string): string {\r\n\treturn btoa(unescape(encodeURIComponent(input)))\r\n}\r\n\r\nexport function signAppJwt(appId: string, privateKeyPem: string): string {\r\n\tconst now = Math.floor(Date.now() / 1000)\r\n\tconst header = { alg: 'RS256', typ: 'JWT' }\r\n\tconst payload = { iat: now - 60, exp: now + 8 * 60, iss: appId }\r\n\tconst prv = KEYUTIL.getKey(privateKeyPem) as unknown as string\r\n\treturn KJUR.jws.JWS.sign('RS256', JSON.stringify(header), JSON.stringify(payload), prv)\r\n}\r\n\r\nexport async function getInstallationId(jwt: string, owner: string, repo: string): Promise<number> {\r\n\tconst res = await fetch(`${GH_API}/repos/${owner}/${repo}/installation`, {\r\n\t\theaders: {\r\n\t\t\tAuthorization: `Bearer ${jwt}`,\r\n\t\t\tAccept: 'application/vnd.github+json',\r\n\t\t\t'X-GitHub-Api-Version': '2022-11-28'\r\n\t\t}\r\n\t})\r\n\tif (res.status === 401) handle401Error()\r\n\tif (!res.ok) throw new Error(`installation lookup failed: ${res.status}`)\r\n\tconst data = await res.json()\r\n\treturn data.id\r\n}\r\n\r\nexport async function createInstallationToken(jwt: string, installationId: number): Promise<string> {\r\n\tconst res = await fetch(`${GH_API}/app/installations/${installationId}/access_tokens`, {\r\n\t\tmethod: 'POST',\r\n\t\theaders: {\r\n\t\t\tAuthorization: `Bearer ${jwt}`,\r\n\t\t\tAccept: 'application/vnd.github+json',\r\n\t\t\t'X-GitHub-Api-Version': '2022-11-28'\r\n\t\t}\r\n\t})\r\n\tif (res.status === 401) handle401Error()\r\n\tif (!res.ok) throw new Error(`create token failed: ${res.status}`)\r\n\tconst data = await res.json()\r\n\treturn data.token as string\r\n}\r\n\r\nexport async function getFileSha(token: string, owner: string, repo: string, path: string, branch: string): Promise<string | undefined> {\r\n\tconst res = await fetch(`${GH_API}/repos/${owner}/${repo}/contents/${encodeURIComponent(path)}?ref=${encodeURIComponent(branch)}`, {\r\n\t\theaders: {\r\n\t\t\tAuthorization: `Bearer ${token}`,\r\n\t\t\tAccept: 'application/vnd.github+json',\r\n\t\t\t'X-GitHub-Api-Version': '2022-11-28'\r\n\t\t}\r\n\t})\r\n\tif (res.status === 401) handle401Error()\r\n\tif (res.status === 404) return undefined\r\n\tif (!res.ok) throw new Error(`get file sha failed: ${res.status}`)\r\n\tconst data = await res.json()\r\n\treturn (data && data.sha) || undefined\r\n}\r\n\r\nexport async function putFile(token: string, owner: string, repo: string, path: string, contentBase64: string, message: string, branch: string) {\r\n\tconst sha = await getFileSha(token, owner, repo, path, branch)\r\n\tconst res = await fetch(`${GH_API}/repos/${owner}/${repo}/contents/${encodeURIComponent(path)}`, {\r\n\t\tmethod: 'PUT',\r\n\t\theaders: {\r\n\t\t\tAuthorization: `Bearer ${token}`,\r\n\t\t\tAccept: 'application/vnd.github+json',\r\n\t\t\t'X-GitHub-Api-Version': '2022-11-28',\r\n\t\t\t'Content-Type': 'application/json'\r\n\t\t},\r\n\t\tbody: JSON.stringify({ message, content: contentBase64, branch, ...(sha ? { sha } : {}) })\r\n\t})\r\n\tif (res.status === 401) handle401Error()\r\n\tif (!res.ok) throw new Error(`put file failed: ${res.status}`)\r\n\treturn res.json()\r\n}\r\n\r\n// Batch commit APIs\r\n\r\nexport async function getRef(token: string, owner: string, repo: string, ref: string): Promise<{ sha: string }> {\r\n\tconst res = await fetch(`${GH_API}/repos/${owner}/${repo}/git/ref/${encodeURIComponent(ref)}`, {\r\n\t\theaders: {\r\n\t\t\tAuthorization: `Bearer ${token}`,\r\n\t\t\tAccept: 'application/vnd.github+json',\r\n\t\t\t'X-GitHub-Api-Version': '2022-11-28'\r\n\t\t}\r\n\t})\r\n\tif (res.status === 401) handle401Error()\r\n\tif (!res.ok) throw new Error(`get ref failed: ${res.status}`)\r\n\tconst data = await res.json()\r\n\treturn { sha: data.object.sha }\r\n}\r\n\r\nexport type TreeItem = {\r\n\tpath: string\r\n\tmode: '100644' | '100755' | '040000' | '160000' | '120000'\r\n\ttype: 'blob' | 'tree' | 'commit'\r\n\tcontent?: string\r\n\tsha?: string | null\r\n}\r\n\r\nexport async function createTree(token: string, owner: string, repo: string, tree: TreeItem[], baseTree?: string): Promise<{ sha: string }> {\r\n\tconst res = await fetch(`${GH_API}/repos/${owner}/${repo}/git/trees`, {\r\n\t\tmethod: 'POST',\r\n\t\theaders: {\r\n\t\t\tAuthorization: `Bearer ${token}`,\r\n\t\t\tAccept: 'application/vnd.github+json',\r\n\t\t\t'X-GitHub-Api-Version': '2022-11-28',\r\n\t\t\t'Content-Type': 'application/json'\r\n\t\t},\r\n\t\tbody: JSON.stringify({ tree, base_tree: baseTree })\r\n\t})\r\n\tif (res.status === 401) handle401Error()\r\n\tif (!res.ok) throw new Error(`create tree failed: ${res.status}`)\r\n\tconst data = await res.json()\r\n\treturn { sha: data.sha }\r\n}\r\n\r\nexport async function createCommit(token: string, owner: string, repo: string, message: string, tree: string, parents: string[]): Promise<{ sha: string }> {\r\n\tconst res = await fetch(`${GH_API}/repos/${owner}/${repo}/git/commits`, {\r\n\t\tmethod: 'POST',\r\n\t\theaders: {\r\n\t\t\tAuthorization: `Bearer ${token}`,\r\n\t\t\tAccept: 'application/vnd.github+json',\r\n\t\t\t'X-GitHub-Api-Version': '2022-11-28',\r\n\t\t\t'Content-Type': 'application/json'\r\n\t\t},\r\n\t\tbody: JSON.stringify({ message, tree, parents })\r\n\t})\r\n\tif (res.status === 401) handle401Error()\r\n\tif (!res.ok) throw new Error(`create commit failed: ${res.status}`)\r\n\tconst data = await res.json()\r\n\treturn { sha: data.sha }\r\n}\r\n\r\nexport async function updateRef(token: string, owner: string, repo: string, ref: string, sha: string, force = false): Promise<void> {\r\n\tconst res = await fetch(`${GH_API}/repos/${owner}/${repo}/git/refs/${encodeURIComponent(ref)}`, {\r\n\t\tmethod: 'PATCH',\r\n\t\theaders: {\r\n\t\t\tAuthorization: `Bearer ${token}`,\r\n\t\t\tAccept: 'application/vnd.github+json',\r\n\t\t\t'X-GitHub-Api-Version': '2022-11-28',\r\n\t\t\t'Content-Type': 'application/json'\r\n\t\t},\r\n\t\tbody: JSON.stringify({ sha, force })\r\n\t})\r\n\tif (res.status === 401) handle401Error()\r\n\tif (!res.ok) throw new Error(`update ref failed: ${res.status}`)\r\n}\r\n\r\nexport async function readTextFileFromRepo(token: string, owner: string, repo: string, path: string, ref: string): Promise<string | null> {\r\n\tconst res = await fetch(`${GH_API}/repos/${owner}/${repo}/contents/${encodeURIComponent(path)}?ref=${encodeURIComponent(ref)}`, {\r\n\t\theaders: {\r\n\t\t\tAuthorization: `Bearer ${token}`,\r\n\t\t\tAccept: 'application/vnd.github+json',\r\n\t\t\t'X-GitHub-Api-Version': '2022-11-28'\r\n\t\t}\r\n\t})\r\n\tif (res.status === 401) handle401Error()\r\n\tif (res.status === 404) return null\r\n\tif (!res.ok) throw new Error(`read file failed: ${res.status}`)\r\n\tconst data: any = await res.json()\r\n\tif (Array.isArray(data) || !data.content) return null\r\n\ttry {\r\n\t\treturn decodeURIComponent(escape(atob(data.content)))\r\n\t} catch {\r\n\t\treturn atob(data.content)\r\n\t}\r\n}\r\n\r\nexport async function listRepoFilesRecursive(token: string, owner: string, repo: string, path: string, ref: string): Promise<string[]> {\r\n\tasync function fetchPath(targetPath: string): Promise<string[]> {\r\n\t\tconst res = await fetch(`${GH_API}/repos/${owner}/${repo}/contents/${encodeURIComponent(targetPath)}?ref=${encodeURIComponent(ref)}`, {\r\n\t\t\theaders: {\r\n\t\t\t\tAuthorization: `Bearer ${token}`,\r\n\t\t\t\tAccept: 'application/vnd.github+json',\r\n\t\t\t\t'X-GitHub-Api-Version': '2022-11-28'\r\n\t\t\t}\r\n\t\t})\r\n\t\tif (res.status === 401) handle401Error()\r\n\t\tif (res.status === 404) return []\r\n\t\tif (!res.ok) throw new Error(`read directory failed: ${res.status}`)\r\n\t\tconst data: any = await res.json()\r\n\t\tif (Array.isArray(data)) {\r\n\t\t\tconst files: string[] = []\r\n\t\t\tfor (const item of data) {\r\n\t\t\t\tif (item.type === 'file') {\r\n\t\t\t\t\tfiles.push(item.path)\r\n\t\t\t\t} else if (item.type === 'dir') {\r\n\t\t\t\t\tconst nested = await fetchPath(item.path)\r\n\t\t\t\t\tfiles.push(...nested)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn files\r\n\t\t}\r\n\t\tif (data?.type === 'file') return [data.path]\r\n\t\tif (data?.type === 'dir') return fetchPath(data.path)\r\n\t\treturn []\r\n\t}\r\n\r\n\treturn fetchPath(path)\r\n}\r\n\r\nexport async function createBlob(\r\n\ttoken: string,\r\n\towner: string,\r\n\trepo: string,\r\n\tcontent: string,\r\n\tencoding: 'utf-8' | 'base64' = 'base64'\r\n): Promise<{ sha: string }> {\r\n\tconst res = await fetch(`${GH_API}/repos/${owner}/${repo}/git/blobs`, {\r\n\t\tmethod: 'POST',\r\n\t\theaders: {\r\n\t\t\tAuthorization: `Bearer ${token}`,\r\n\t\t\tAccept: 'application/vnd.github+json',\r\n\t\t\t'X-GitHub-Api-Version': '2022-11-28',\r\n\t\t\t'Content-Type': 'application/json'\r\n\t\t},\r\n\t\tbody: JSON.stringify({ content, encoding })\r\n\t})\r\n\tif (res.status === 401) handle401Error()\r\n\tif (!res.ok) throw new Error(`create blob failed: ${res.status}`)\r\n\tconst data = await res.json()\r\n\treturn { sha: data.sha }\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2394, "column": 0}, "map": {"version":3,"sources":["file:///E:/qbb/github/blog-public/src/lib/file-utils.ts"],"sourcesContent":["'use client'\r\n\r\nexport function readFileAsText(file: File): Promise<string> {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tconst reader = new FileReader()\r\n\t\treader.onload = () => resolve(String(reader.result || ''))\r\n\t\treader.onerror = reject\r\n\t\treader.readAsText(file)\r\n\t})\r\n}\r\n\r\nexport function fileToBase64NoPrefix(file: File): Promise<string> {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tconst reader = new FileReader()\r\n\t\treader.onload = () => {\r\n\t\t\tconst dataUrl = String(reader.result || '')\r\n\t\t\tresolve(dataUrl.replace(/^data:[^;]+;base64,/, ''))\r\n\t\t}\r\n\t\treader.onerror = reject\r\n\t\treader.readAsDataURL(file)\r\n\t})\r\n}\r\n\r\nexport async function hashFileSHA256(file: File): Promise<string> {\r\n\tconst buf = await file.arrayBuffer()\r\n\tconst digest = await crypto.subtle.digest('SHA-256', buf)\r\n\tconst bytes = new Uint8Array(digest)\r\n\tlet hex = ''\r\n\tfor (let i = 0; i < bytes.length; i++) {\r\n\t\tconst h = bytes[i].toString(16).padStart(2, '0')\r\n\t\thex += h\r\n\t}\r\n\treturn hex.slice(0, 16)\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA;AAEO,SAAS,eAAe,IAAU;IACxC,OAAO,IAAI,QAAQ,CAAC,SAAS;QAC5B,MAAM,SAAS,IAAI;QACnB,OAAO,MAAM,GAAG,IAAM,QAAQ,OAAO,OAAO,MAAM,IAAI;QACtD,OAAO,OAAO,GAAG;QACjB,OAAO,UAAU,CAAC;IACnB;AACD;AAEO,SAAS,qBAAqB,IAAU;IAC9C,OAAO,IAAI,QAAQ,CAAC,SAAS;QAC5B,MAAM,SAAS,IAAI;QACnB,OAAO,MAAM,GAAG;YACf,MAAM,UAAU,OAAO,OAAO,MAAM,IAAI;YACxC,QAAQ,QAAQ,OAAO,CAAC,uBAAuB;QAChD;QACA,OAAO,OAAO,GAAG;QACjB,OAAO,aAAa,CAAC;IACtB;AACD;AAEO,eAAe,eAAe,IAAU;IAC9C,MAAM,MAAM,MAAM,KAAK,WAAW;IAClC,MAAM,SAAS,MAAM,OAAO,MAAM,CAAC,MAAM,CAAC,WAAW;IACrD,MAAM,QAAQ,IAAI,WAAW;IAC7B,IAAI,MAAM;IACV,IAAK,IAAI,IAAI,GAAG,IAAI,MAAM,MAAM,EAAE,IAAK;QACtC,MAAM,IAAI,KAAK,CAAC,EAAE,CAAC,QAAQ,CAAC,IAAI,QAAQ,CAAC,GAAG;QAC5C,OAAO;IACR;IACA,OAAO,IAAI,KAAK,CAAC,GAAG;AACrB","debugId":null}},
    {"offset": {"line": 2440, "column": 0}, "map": {"version":3,"sources":["file:///E:/qbb/github/blog-public/src/app/projects/services/push-projects.ts"],"sourcesContent":["import { toBase64Utf8, getRef, createTree, createCommit, updateRef, createBlob, type TreeItem } from '@/lib/github-client'\r\nimport { fileToBase64NoPrefix, hashFileSHA256 } from '@/lib/file-utils'\r\nimport { getAuthToken } from '@/lib/auth'\r\nimport { GITHUB_CONFIG } from '@/consts'\r\nimport type { Project } from '../components/project-card'\r\nimport type { ImageItem } from '../components/image-upload-dialog'\r\nimport { getFileExt } from '@/lib/utils'\r\nimport { toast } from 'sonner'\r\n\r\nexport type PushProjectsParams = {\r\n\tprojects: Project[]\r\n\timageItems?: Map<string, ImageItem>\r\n}\r\n\r\nexport async function pushProjects(params: PushProjectsParams): Promise<void> {\r\n\tconst { projects, imageItems } = params\r\n\r\n\tconst token = await getAuthToken()\r\n\r\n\ttoast.info('正在获取分支信息...')\r\n\tconst refData = await getRef(token, GITHUB_CONFIG.OWNER, GITHUB_CONFIG.REPO, `heads/${GITHUB_CONFIG.BRANCH}`)\r\n\tconst latestCommitSha = refData.sha\r\n\r\n\tconst commitMessage = `更新项目列表`\r\n\r\n\ttoast.info('正在准备文件...')\r\n\r\n\tconst treeItems: TreeItem[] = []\r\n\tconst uploadedHashes = new Set<string>()\r\n\tlet updatedProjects = [...projects]\r\n\r\n\tif (imageItems && imageItems.size > 0) {\r\n\t\ttoast.info('正在上传图片...')\r\n\t\tfor (const [url, imageItem] of imageItems.entries()) {\r\n\t\t\tif (imageItem.type === 'file') {\r\n\t\t\t\tconst hash = imageItem.hash || (await hashFileSHA256(imageItem.file))\r\n\t\t\t\tconst ext = getFileExt(imageItem.file.name)\r\n\t\t\t\tconst filename = `${hash}${ext}`\r\n\t\t\t\tconst publicPath = `/images/project/${filename}`\r\n\r\n\t\t\t\tif (!uploadedHashes.has(hash)) {\r\n\t\t\t\t\tconst path = `public/images/project/${filename}`\r\n\t\t\t\t\tconst contentBase64 = await fileToBase64NoPrefix(imageItem.file)\r\n\t\t\t\t\tconst blobData = await createBlob(token, GITHUB_CONFIG.OWNER, GITHUB_CONFIG.REPO, contentBase64, 'base64')\r\n\t\t\t\t\ttreeItems.push({\r\n\t\t\t\t\t\tpath,\r\n\t\t\t\t\t\tmode: '100644',\r\n\t\t\t\t\t\ttype: 'blob',\r\n\t\t\t\t\t\tsha: blobData.sha\r\n\t\t\t\t\t})\r\n\t\t\t\t\tuploadedHashes.add(hash)\r\n\t\t\t\t}\r\n\r\n\t\t\t\tupdatedProjects = updatedProjects.map(p => (p.url === url ? { ...p, image: publicPath } : p))\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst projectsJson = JSON.stringify(updatedProjects, null, '\\t')\r\n\tconst projectsBlob = await createBlob(token, GITHUB_CONFIG.OWNER, GITHUB_CONFIG.REPO, toBase64Utf8(projectsJson), 'base64')\r\n\ttreeItems.push({\r\n\t\tpath: 'src/app/projects/list.json',\r\n\t\tmode: '100644',\r\n\t\ttype: 'blob',\r\n\t\tsha: projectsBlob.sha\r\n\t})\r\n\r\n\ttoast.info('正在创建文件树...')\r\n\tconst treeData = await createTree(token, GITHUB_CONFIG.OWNER, GITHUB_CONFIG.REPO, treeItems, latestCommitSha)\r\n\r\n\ttoast.info('正在创建提交...')\r\n\tconst commitData = await createCommit(token, GITHUB_CONFIG.OWNER, GITHUB_CONFIG.REPO, commitMessage, treeData.sha, [latestCommitSha])\r\n\r\n\ttoast.info('正在更新分支...')\r\n\tawait updateRef(token, GITHUB_CONFIG.OWNER, GITHUB_CONFIG.REPO, `heads/${GITHUB_CONFIG.BRANCH}`, commitData.sha)\r\n\r\n\ttoast.success('发布成功！')\r\n}\r\n\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AAGA;AACA;;;;;;;AAOO,eAAe,aAAa,MAA0B;IAC5D,MAAM,EAAE,QAAQ,EAAE,UAAU,EAAE,GAAG;IAEjC,MAAM,QAAQ,MAAM,IAAA,qIAAY;IAEhC,oRAAK,CAAC,IAAI,CAAC;IACX,MAAM,UAAU,MAAM,IAAA,2IAAM,EAAC,OAAO,iIAAa,CAAC,KAAK,EAAE,iIAAa,CAAC,IAAI,EAAE,CAAC,MAAM,EAAE,iIAAa,CAAC,MAAM,EAAE;IAC5G,MAAM,kBAAkB,QAAQ,GAAG;IAEnC,MAAM,gBAAgB,CAAC,MAAM,CAAC;IAE9B,oRAAK,CAAC,IAAI,CAAC;IAEX,MAAM,YAAwB,EAAE;IAChC,MAAM,iBAAiB,IAAI;IAC3B,IAAI,kBAAkB;WAAI;KAAS;IAEnC,IAAI,cAAc,WAAW,IAAI,GAAG,GAAG;QACtC,oRAAK,CAAC,IAAI,CAAC;QACX,KAAK,MAAM,CAAC,KAAK,UAAU,IAAI,WAAW,OAAO,GAAI;YACpD,IAAI,UAAU,IAAI,KAAK,QAAQ;gBAC9B,MAAM,OAAO,UAAU,IAAI,IAAK,MAAM,IAAA,gJAAc,EAAC,UAAU,IAAI;gBACnE,MAAM,MAAM,IAAA,oIAAU,EAAC,UAAU,IAAI,CAAC,IAAI;gBAC1C,MAAM,WAAW,GAAG,OAAO,KAAK;gBAChC,MAAM,aAAa,CAAC,gBAAgB,EAAE,UAAU;gBAEhD,IAAI,CAAC,eAAe,GAAG,CAAC,OAAO;oBAC9B,MAAM,OAAO,CAAC,sBAAsB,EAAE,UAAU;oBAChD,MAAM,gBAAgB,MAAM,IAAA,sJAAoB,EAAC,UAAU,IAAI;oBAC/D,MAAM,WAAW,MAAM,IAAA,+IAAU,EAAC,OAAO,iIAAa,CAAC,KAAK,EAAE,iIAAa,CAAC,IAAI,EAAE,eAAe;oBACjG,UAAU,IAAI,CAAC;wBACd;wBACA,MAAM;wBACN,MAAM;wBACN,KAAK,SAAS,GAAG;oBAClB;oBACA,eAAe,GAAG,CAAC;gBACpB;gBAEA,kBAAkB,gBAAgB,GAAG,CAAC,CAAA,IAAM,EAAE,GAAG,KAAK,MAAM;wBAAE,GAAG,CAAC;wBAAE,OAAO;oBAAW,IAAI;YAC3F;QACD;IACD;IAEA,MAAM,eAAe,KAAK,SAAS,CAAC,iBAAiB,MAAM;IAC3D,MAAM,eAAe,MAAM,IAAA,+IAAU,EAAC,OAAO,iIAAa,CAAC,KAAK,EAAE,iIAAa,CAAC,IAAI,EAAE,IAAA,iJAAY,EAAC,eAAe;IAClH,UAAU,IAAI,CAAC;QACd,MAAM;QACN,MAAM;QACN,MAAM;QACN,KAAK,aAAa,GAAG;IACtB;IAEA,oRAAK,CAAC,IAAI,CAAC;IACX,MAAM,WAAW,MAAM,IAAA,+IAAU,EAAC,OAAO,iIAAa,CAAC,KAAK,EAAE,iIAAa,CAAC,IAAI,EAAE,WAAW;IAE7F,oRAAK,CAAC,IAAI,CAAC;IACX,MAAM,aAAa,MAAM,IAAA,iJAAY,EAAC,OAAO,iIAAa,CAAC,KAAK,EAAE,iIAAa,CAAC,IAAI,EAAE,eAAe,SAAS,GAAG,EAAE;QAAC;KAAgB;IAEpI,oRAAK,CAAC,IAAI,CAAC;IACX,MAAM,IAAA,8IAAS,EAAC,OAAO,iIAAa,CAAC,KAAK,EAAE,iIAAa,CAAC,IAAI,EAAE,CAAC,MAAM,EAAE,iIAAa,CAAC,MAAM,EAAE,EAAE,WAAW,GAAG;IAE/G,oRAAK,CAAC,OAAO,CAAC;AACf","debugId":null}},
    {"offset": {"line": 2520, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/app/projects/list.json"],"sourcesContent":["[{\"name\":\"Pixel Motion\",\"year\":2025,\"description\":\"网页端像素绘画工具，支持组件化画布，多画布同时绘画，色彩变量\",\"image\":\"https://pixel-motion.yysuni.com/favicon.svg\",\"url\":\"https://pixel-motion.yysuni.com/\",\"tags\":[\"像素画\",\"React\",\"Figma\",\"阮周刊\"]},{\"name\":\"Path Motion\",\"year\":2025,\"description\":\"在线 svg path 工具，针对 path 绘制、压缩、运动等功能\",\"image\":\"https://path-motion.yysuni.com/favicon.svg\",\"url\":\"https://path-motion.yysuni.com/canvas\",\"tags\":[\"SVG\",\"Path\",\"Motion\",\"阮周刊\"],\"github\":\"https://github.com/YYsuni/path-motion\"},{\"name\":\"JSON Viewer\",\"year\":2023,\"description\":\"React 的 JSON 查看/编辑组件，组件的实现方式依赖于 html 原生逻辑，比较轻量化。第二个用心的组件，学习了前辈的包装方式，介绍方式，网站样式。用户也慢慢多了起来。\",\"image\":\"https://jv.yysuni.com/favicon.svg\",\"url\":\"https://jv.yysuni.com/\",\"tags\":[\"React\",\"JSON\",\"Viewer\",\"阮周刊\"],\"github\":\"https://github.com/YYsuni/react18-json-view\",\"npm\":\"https://www.npmjs.com/package/react18-json-view\"},{\"name\":\"第一版 Blog 网站\",\"year\":2023,\"description\":\"最开始是觉得掘金这种网站写文章挺好的。后面还是想写一个自己网站，体现自己的风格。MDX 还可以自己写组件到 blog，直接交互，多好。。。没想到为以后埋下了坑。\",\"image\":\"https://blog-archive.yysuni.com/favicons/android-chrome-512x512.png\",\"url\":\"https://blog-archive.yysuni.com/\",\"tags\":[\"Next.js\",\"MDX\"]},{\"name\":\"Blockies\",\"year\":2023,\"description\":\" Blockies React组件，SVG 实现，用于生成区块链地址的图标。这是我的第一个有人用的组件，虽然人不多\",\"image\":\"/images/blockies.svg\",\"url\":\"https://blockies-react-svg.vercel.app/\",\"tags\":[\"React\",\"SVG\",\"Blockies\"],\"github\":\"https://github.com/YYsuni/blockies-react-svg\",\"npm\":\"https://www.npmjs.com/package/blockies-react-svg\"},{\"name\":\"Vue3 组件库\",\"year\":2021,\"description\":\"比较让人怀念的一个组件库了，那个时候每个前端程序员都想做一套自己的组件库，我也是。写出来的时候特别让自己开心，觉得好看，舒服。那时也第一次学会免费的 github/gitee pages 部署页面，但也倒腾半天，现在用 vercel 重新上线放着吧。\",\"image\":\"/images/vue-kit.webp\",\"url\":\"http://archive-suni.vercel.app/#/\",\"tags\":[\"Vue\",\"Library\"],\"github\":\"https://github.com/YYsuni/archive-suni\"}]"],"names":[],"mappings":"AAAA"}},
    {"offset": {"line": 2520, "column": 1807}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2524, "column": 0}, "map": {"version":3,"sources":["E:/qbb/github/blog-public/src/app/projects/page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useRef } from 'react'\r\nimport { motion } from 'motion/react'\r\nimport { toast } from 'sonner'\r\nimport { ProjectCard, type Project } from './components/project-card'\r\nimport CreateDialog from './components/create-dialog'\r\nimport { pushProjects } from './services/push-projects'\r\nimport { useAuthStore } from '@/hooks/use-auth'\r\nimport initialList from './list.json'\r\nimport type { ImageItem } from './components/image-upload-dialog'\r\n\r\nexport default function Page() {\r\n\tconst [projects, setProjects] = useState<Project[]>(initialList as Project[])\r\n\tconst [originalProjects, setOriginalProjects] = useState<Project[]>(initialList as Project[])\r\n\tconst [isEditMode, setIsEditMode] = useState(false)\r\n\tconst [isSaving, setIsSaving] = useState(false)\r\n\tconst [editingProject, setEditingProject] = useState<Project | null>(null)\r\n\tconst [isCreateDialogOpen, setIsCreateDialogOpen] = useState(false)\r\n\tconst [imageItems, setImageItems] = useState<Map<string, ImageItem>>(new Map())\r\n\tconst keyInputRef = useRef<HTMLInputElement>(null)\r\n\r\n\tconst { isAuth, setPrivateKey } = useAuthStore()\r\n\r\n\tconst handleUpdate = (updatedProject: Project, oldProject: Project, imageItem?: ImageItem) => {\r\n\t\tsetProjects(prev => prev.map(p => (p.url === oldProject.url ? updatedProject : p)))\r\n\t\tif (imageItem) {\r\n\t\t\tsetImageItems(prev => {\r\n\t\t\t\tconst newMap = new Map(prev)\r\n\t\t\t\tnewMap.set(updatedProject.url, imageItem)\r\n\t\t\t\treturn newMap\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleAdd = () => {\r\n\t\tsetEditingProject(null)\r\n\t\tsetIsCreateDialogOpen(true)\r\n\t}\r\n\r\n\tconst handleSaveProject = (updatedProject: Project) => {\r\n\t\tif (editingProject) {\r\n\t\t\tconst updated = projects.map(p => (p.url === editingProject.url ? updatedProject : p))\r\n\t\t\tsetProjects(updated)\r\n\t\t} else {\r\n\t\t\tsetProjects([...projects, updatedProject])\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleDelete = (project: Project) => {\r\n\t\tif (confirm(`确定要删除 ${project.name} 吗？`)) {\r\n\t\t\tsetProjects(projects.filter(p => p.url !== project.url))\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleChoosePrivateKey = async (file: File) => {\r\n\t\ttry {\r\n\t\t\tconst text = await file.text()\r\n\t\t\tsetPrivateKey(text)\r\n\t\t\tawait handleSave()\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Failed to read private key:', error)\r\n\t\t\ttoast.error('读取密钥文件失败')\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleSaveClick = () => {\r\n\t\tif (!isAuth) {\r\n\t\t\tkeyInputRef.current?.click()\r\n\t\t} else {\r\n\t\t\thandleSave()\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleSave = async () => {\r\n\t\tsetIsSaving(true)\r\n\r\n\t\ttry {\r\n\t\t\tawait pushProjects({\r\n\t\t\t\tprojects,\r\n\t\t\t\timageItems\r\n\t\t\t})\r\n\r\n\t\t\tsetOriginalProjects(projects)\r\n\t\t\tsetImageItems(new Map())\r\n\t\t\tsetIsEditMode(false)\r\n\t\t\ttoast.success('保存成功！')\r\n\t\t} catch (error: any) {\r\n\t\t\tconsole.error('Failed to save:', error)\r\n\t\t\ttoast.error(`保存失败: ${error?.message || '未知错误'}`)\r\n\t\t} finally {\r\n\t\t\tsetIsSaving(false)\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleCancel = () => {\r\n\t\tsetProjects(originalProjects)\r\n\t\tsetImageItems(new Map())\r\n\t\tsetIsEditMode(false)\r\n\t}\r\n\r\n\tconst buttonText = isAuth ? '保存' : '导入密钥'\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<input\r\n\t\t\t\tref={keyInputRef}\r\n\t\t\t\ttype='file'\r\n\t\t\t\taccept='.pem'\r\n\t\t\t\tclassName='hidden'\r\n\t\t\t\tonChange={async e => {\r\n\t\t\t\t\tconst f = e.target.files?.[0]\r\n\t\t\t\t\tif (f) await handleChoosePrivateKey(f)\r\n\t\t\t\t\tif (e.currentTarget) e.currentTarget.value = ''\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\r\n\t\t\t<div className='flex flex-col items-center justify-center px-6 pt-32 pb-12'>\r\n\t\t\t\t<div className='grid w-full max-w-[1200px] grid-cols-2 gap-6 max-md:grid-cols-1'>\r\n\t\t\t\t\t{projects.map((project, index) => (\r\n\t\t\t\t\t\t<ProjectCard\r\n\t\t\t\t\t\t\tkey={project.url}\r\n\t\t\t\t\t\t\tproject={project}\r\n\t\t\t\t\t\t\tisEditMode={isEditMode}\r\n\t\t\t\t\t\t\tonUpdate={handleUpdate}\r\n\t\t\t\t\t\t\tonDelete={() => handleDelete(project)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<motion.div\r\n\t\t\t\tinitial={{ opacity: 0, scale: 0.6 }}\r\n\t\t\t\tanimate={{ opacity: 1, scale: 1 }}\r\n\t\t\t\tclassName='absolute top-4 right-6 flex gap-3 max-sm:hidden'>\r\n\t\t\t\t{isEditMode ? (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<motion.button\r\n\t\t\t\t\t\t\twhileHover={{ scale: 1.05 }}\r\n\t\t\t\t\t\t\twhileTap={{ scale: 0.95 }}\r\n\t\t\t\t\t\t\tonClick={handleCancel}\r\n\t\t\t\t\t\t\tdisabled={isSaving}\r\n\t\t\t\t\t\t\tclassName='rounded-xl border bg-white/60 px-6 py-2 text-sm'>\r\n\t\t\t\t\t\t\t取消\r\n\t\t\t\t\t\t</motion.button>\r\n\t\t\t\t\t\t<motion.button\r\n\t\t\t\t\t\t\twhileHover={{ scale: 1.05 }}\r\n\t\t\t\t\t\t\twhileTap={{ scale: 0.95 }}\r\n\t\t\t\t\t\t\tonClick={handleAdd}\r\n\t\t\t\t\t\t\tclassName='rounded-xl border bg-white/60 px-6 py-2 text-sm'>\r\n\t\t\t\t\t\t\t添加\r\n\t\t\t\t\t\t</motion.button>\r\n\t\t\t\t\t\t<motion.button\r\n\t\t\t\t\t\t\twhileHover={{ scale: 1.05 }}\r\n\t\t\t\t\t\t\twhileTap={{ scale: 0.95 }}\r\n\t\t\t\t\t\t\tonClick={handleSaveClick}\r\n\t\t\t\t\t\t\tdisabled={isSaving}\r\n\t\t\t\t\t\t\tclassName='brand-btn px-6'>\r\n\t\t\t\t\t\t\t{isSaving ? '保存中...' : buttonText}\r\n\t\t\t\t\t\t</motion.button>\r\n\t\t\t\t\t</>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<motion.button\r\n\t\t\t\t\t\twhileHover={{ scale: 1.05 }}\r\n\t\t\t\t\t\twhileTap={{ scale: 0.95 }}\r\n\t\t\t\t\t\tonClick={() => setIsEditMode(true)}\r\n\t\t\t\t\t\tclassName='rounded-xl border bg-white/60 px-6 py-2 text-sm backdrop-blur-sm transition-colors hover:bg-white/80'>\r\n\t\t\t\t\t\t编辑\r\n\t\t\t\t\t</motion.button>\r\n\t\t\t\t)}\r\n\t\t\t</motion.div>\r\n\r\n\t\t\t{isCreateDialogOpen && (\r\n\t\t\t\t<CreateDialog project={editingProject} onClose={() => setIsCreateDialogOpen(false)} onSave={handleSaveProject} />\r\n\t\t\t)}\r\n\t\t</>\r\n\t)\r\n}\r\n"],"names":["useState","useRef","motion","toast","ProjectCard","Project","CreateDialog","pushProjects","useAuthStore","initialList","ImageItem","Page","projects","setProjects","originalProjects","setOriginalProjects","isEditMode","setIsEditMode","isSaving","setIsSaving","editingProject","setEditingProject","isCreateDialogOpen","setIsCreateDialogOpen","imageItems","setImageItems","Map","keyInputRef","HTMLInputElement","isAuth","setPrivateKey","handleUpdate","updatedProject","oldProject","imageItem","prev","map","p","url","newMap","set","handleAdd","handleSaveProject","updated","handleDelete","project","confirm","name","filter","handleChoosePrivateKey","file","File","text","handleSave","error","console","handleSaveClick","current","click","success","message","handleCancel","buttonText","e","f","target","files","currentTarget","value","index","opacity","scale"],"mappings":"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","ignoreList":[],"debugId":null}}]
}